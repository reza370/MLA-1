var t={2672:(t,e,n)=>{n.r(e),n.d(e,{addAggregateFunction:()=>rm,addFunction:()=>am,addPackage:()=>pm,addTableMethod:()=>hm,addVerb:()=>dm,addWindowFunction:()=>sm,agg:()=>Zf,all:()=>Jc,bin:()=>Yf,desc:()=>zd,endswith:()=>eu,escape:()=>Kf,field:()=>Wd,frac:()=>Jf,from:()=>$f,fromArrow:()=>xp,fromCSV:()=>Lp,fromFixed:()=>Pp,fromJSON:()=>Vp,internal:()=>fm,load:()=>jf,loadArrow:()=>zf,loadCSV:()=>Wf,loadFixed:()=>Hf,loadJSON:()=>qf,matches:()=>Xc,names:()=>Qf,not:()=>Qc,op:()=>dt,query:()=>hp,queryFrom:()=>dp,range:()=>Zc,rolling:()=>Hd,seed:()=>Y,startswith:()=>tu,table:()=>Rf,toArrow:()=>Pc,version:()=>mm});const i=Array.isArray;function r(t){return null!=t?i(t)?t:[t]:[]}function s(t){return t<0?`count() + ${t}`:t}class a{constructor(t){t&&(this._params=t)}params(t){return arguments.length?(t&&(this._params={...this._params,...t}),this):this._params}reify(t){return this.__reify(this,t)}count(t){return this.__count(this,t)}derive(t,e){return this.__derive(this,t,e)}filter(t){return this.__filter(this,t)}slice(t,e){return this.filter(function(t=0,e=1/0){return`${s(t)} < row_number() && row_number() <= ${s(e)}`}(t,e)).reify()}groupby(...t){return this.__groupby(this,t.flat())}orderby(...t){return this.__orderby(this,t.flat())}relocate(t,e){return this.__relocate(this,r(t),e)}rename(...t){return this.__rename(this,t.flat())}rollup(t){return this.__rollup(this,t)}sample(t,e){return this.__sample(this,t,e)}select(...t){return this.__select(this,t.flat())}ungroup(){return this.__ungroup(this)}unorder(){return this.__unorder(this)}dedupe(...t){return this.__dedupe(this,t.flat())}impute(t,e){return this.__impute(this,t,e)}fold(t,e){return this.__fold(this,t,e)}pivot(t,e,n){return this.__pivot(this,t,e,n)}spread(t,e){return this.__spread(this,t,e)}unroll(t,e){return this.__unroll(this,t,e)}lookup(t,e,...n){return this.__lookup(this,t,e,n.flat())}join(t,e,n,i){return this.__join(this,t,e,n,i)}join_left(t,e,n,i){const r={...i,left:!0,right:!1};return this.__join(this,t,e,n,r)}join_right(t,e,n,i){const r={...i,left:!1,right:!0};return this.__join(this,t,e,n,r)}join_full(t,e,n,i){const r={...i,left:!0,right:!0};return this.__join(this,t,e,n,r)}cross(t,e,n){return this.__cross(this,t,e,n)}semijoin(t,e){return this.__semijoin(this,t,e)}antijoin(t,e){return this.__antijoin(this,t,e)}concat(...t){return this.__concat(this,t.flat())}union(...t){return this.__union(this,t.flat())}intersect(...t){return this.__intersect(this,t.flat())}except(...t){return this.__except(this,t.flat())}}function o(t){throw Error(t)}function l(t){return"number"==typeof t}function c(t){return"function"==typeof t}function u(t,e){const n=Array(t);if(c(e))for(let i=0;i<t;++i)n[i]=e(i);else n.fill(e);return n}class h extends a{constructor(t,e,n,i,r,s,a){super(a),this._names=Object.freeze(t),this._data=n,this._total=e,this._nrows=i?i.count():e,this._mask=e!==this._nrows&&i||null,this._group=r||null,this._order=s||null}create(t){o("Not implemented")}get[Symbol.toStringTag](){if(!this._names)return"Object";const t=this.numRows()+" row"+(1!==this.numRows()?"s":"");return`Table: ${this.numCols()+" col"+(1!==this.numCols()?"s":"")} x ${t}`+(this.isFiltered()?` (${this.totalRows()} backing)`:"")+(this.isGrouped()?`, ${this._group.size} groups`:"")+(this.isOrdered()?", ordered":"")}isFiltered(){return!!this._mask}isGrouped(){return!!this._group}isOrdered(){return!!this._order}data(){return this._data}mask(){return this._mask}groups(){return this._group}comparator(){return this._order}totalRows(){return this._total}numRows(){return this._nrows}get size(){return this._nrows}numCols(){return this._names.length}columnNames(t){return t?this._names.filter(t):this._names.slice()}columnName(t){return this._names[t]}columnIndex(t){return this._names.indexOf(t)}columnArray(t,e){return this.array(t,e)}array(t,e){o("Not implemented")}*values(t){const e=this.getter(t),n=this.numRows();for(let t=0;t<n;++t)yield e(t)}get(t,e=0){o("Not implemented")}getter(t){o("Not implemented")}objects(t){o("Not implemented")}object(t){o("Not implemented")}[Symbol.iterator](){o("Not implemented")}print(t={}){l(t)?t={limit:t}:null==t.limit&&(t.limit=10);const e=this.objects({...t,grouped:!1}),n=`${this[Symbol.toStringTag]}. Showing ${e.length} rows.`;return console.log(n),console.table(e),this}indices(t=!0){if(this._index)return this._index;const e=this.numRows(),n=new Uint32Array(e),i=this.isOrdered(),r=this.mask();let s=-1;if(r)for(let t=r.next(0);t>=0;t=r.next(t+1))n[++s]=t;else for(let t=0;t<e;++t)n[++s]=t;if(t&&i){const t=this._order,e=this._data;n.sort(((n,i)=>t(n,i,e)))}return!t&&i||(this._index=n),n}partitions(t=!0){if(this._partitions)return this._partitions;if(!this.isGrouped())return[this.indices(t)];const{keys:e,size:n}=this._group,i=u(n,(()=>[])),r=this._index,s=this.mask(),a=this.numRows();if(r&&this.isOrdered())for(let t,n=0;n<a;++n)t=r[n],i[e[t]].push(t);else if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))i[e[t]].push(t);else for(let t=0;t<a;++t)i[e[t]].push(t);if(t&&!r&&this.isOrdered()){const t=this._order,e=this._data;for(let r=0;r<n;++r)i[r].sort(((n,i)=>t(n,i,e)))}return!t&&this.isOrdered()||(this._partitions=i),i}scan(t,e,n=1/0,i=0){const r=this._mask,s=this._nrows,a=this._data;let o=i||0;if(o>s)return;const l=Math.min(s,o+n),c=()=>o=this._total;if(e&&this.isOrdered()||r&&this._index){const e=this.indices(),n=this._data;for(;o<l;++o)t(e[o],n,c)}else if(r){let e=l-o+1;for(o=r.nth(o);--e&&o>-1;o=r.next(o+1))t(o,a,c)}else for(;o<l;++o)t(o,a,c)}slice(t=0,e=1/0){if(this.isGrouped())return super.slice(t,e);const n=[],i=this.numRows();return t=Math.max(0,t+(t<0?i:0)),e=Math.min(i,Math.max(0,e+(e<0?i:0))),this.scan((t=>n.push(t)),!0,e-t,t),this.reify(n)}reduce(t){return this.__reduce(this,t)}}class d{constructor(t){this.data=t}get length(){return this.data.length}get(t){return this.data[t]}[Symbol.iterator](){return this.data[Symbol.iterator]()}}let p=function(t){return t&&c(t.get)?t:new d(t)};function f(t){return t instanceof Date}function m(t){return t===Object(t)}function y(t){return t instanceof RegExp}function g(t){return"string"==typeof t}function b(t,e=["key","value"]){const n=[],i=[];for(const[e,r]of t)n.push(e),i.push(r);const r={};return e[0]&&(r[e[0]]=n),e[1]&&(r[e[1]]=i),r}const{hasOwnProperty:v}=Object.prototype;function _(t,e){return v.call(t,e)}function w(t){return t?new x({...t.data()},t.columnNames()):new x}class x{constructor(t,e){this.data=t||{},this.names=e||[]}add(t,e){return this.has(t)||this.names.push(t+""),this.data[t]=e}has(t){return _(this.data,t)}new(){return this.filter=null,this.groups=this.groups||null,this.order=null,this}groupby(t){return this.groups=t,this}}const S=void 0,I=Object.getPrototypeOf(Int8Array);function A(t){return t instanceof I}function T(t){return i(t)||A(t)}function C(t){return null!=t&&t==t}const N=t=>T(t)||g(t),k={compact:t=>T(t)?t.filter((t=>C(t))):t,concat:(...t)=>[].concat(...t),includes:(t,e,n)=>!!N(t)&&t.includes(e,n),indexof:(t,e)=>N(t)?t.indexOf(e):-1,join:(t,e)=>T(t)?t.join(e):S,lastindexof:(t,e)=>N(t)?t.lastIndexOf(e):-1,length:t=>N(t)?t.length:0,pluck:(t,e)=>T(t)?t.map((t=>C(t)?t[e]:S)):S,reverse:t=>T(t)?t.slice().reverse():g(t)?t.split("").reverse().join(""):S,slice:(t,e,n)=>N(t)?t.slice(e,n):S};function E(t,e,n="0"){const i=t+"",r=i.length;return r<e?Array(e-r+1).join(n)+i:i}const O=t=>(t<10?"0":"")+t;function M(t,e,n,i,r,s,a,o,l){const c=o?"Z":"";return(t=>t<0?"-"+E(-t,6):t>9999?"+"+E(t,6):E(t,4))(t)+"-"+O(e+1)+"-"+O(n)+(!l||a?"T"+O(i)+":"+O(r)+":"+O(s)+"."+E(a,3)+c:s?"T"+O(i)+":"+O(r)+":"+O(s)+c:r||i||!o?"T"+O(i)+":"+O(r)+c:"")}function D(t,e){return isNaN(t)?"Invalid Date":M(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds(),!1,e)}function B(t,e){return isNaN(t)?"Invalid Date":M(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds(),!0,e)}const L=/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/;function P(t){return t.match(L)}const F=864e5,V=6048e5,U=new Date,R=new Date,$=t=>(U.setTime("string"==typeof t?function(t,e=Date.parse){return P(t)?e(t):t}(t):t),U),j={format_date:(t,e)=>D($(t),!e),format_utcdate:(t,e)=>B($(t),!e),timestamp:t=>+$(t),year:t=>$(t).getFullYear(),quarter:t=>Math.floor($(t).getMonth()/3),month:t=>$(t).getMonth(),date:t=>$(t).getDate(),dayofweek:t=>$(t).getDay(),hours:t=>$(t).getHours(),minutes:t=>$(t).getMinutes(),seconds:t=>$(t).getSeconds(),milliseconds:t=>$(t).getMilliseconds(),utcyear:t=>$(t).getUTCFullYear(),utcquarter:t=>Math.floor($(t).getUTCMonth()/3),utcmonth:t=>$(t).getUTCMonth(),utcdate:t=>$(t).getUTCDate(),utcdayofweek:t=>$(t).getUTCDay(),utchours:t=>$(t).getUTCHours(),utcminutes:t=>$(t).getUTCMinutes(),utcseconds:t=>$(t).getUTCSeconds(),utcmilliseconds:t=>$(t).getUTCMilliseconds(),datetime:function(t,e,n,i,r,s,a){return arguments.length?new Date(t,e||0,null==n?1:n,i||0,r||0,s||0,a||0):new Date(Date.now())},dayofyear:function(t){R.setTime(+t),R.setHours(0,0,0,0),U.setTime(+R),U.setMonth(0),U.setDate(1);const e=6e4*(R.getTimezoneOffset()-U.getTimezoneOffset());return Math.floor(1+(R-U-e)/F)},week:function(t,e){const n=e||0;R.setTime(+t),R.setDate(R.getDate()-(R.getDay()+7-n)%7),R.setHours(0,0,0,0),U.setTime(+t),U.setMonth(0),U.setDate(1),U.setDate(1-(U.getDay()+7-n)%7),U.setHours(0,0,0,0);const i=6e4*(R.getTimezoneOffset()-U.getTimezoneOffset());return Math.floor((R-U+1-i)/V)},utcdatetime:function(t,e,n,i,r,s,a){return arguments.length?new Date(Date.UTC(t,e||0,null==n?1:n,i||0,r||0,s||0,a||0)):new Date(Date.now())},utcdayofyear:function(t){R.setTime(+t),R.setUTCHours(0,0,0,0);const e=Date.UTC(R.getUTCFullYear(),0,1);return Math.floor(1+(R-e)/F)},utcweek:function(t,e){const n=e||0;return R.setTime(+t),R.setUTCDate(R.getUTCDate()-(R.getUTCDay()+7-n)%7),R.setUTCHours(0,0,0,0),U.setTime(+t),U.setUTCMonth(0),U.setUTCDate(1),U.setUTCDate(1-(U.getUTCDay()+7-n)%7),U.setUTCHours(0,0,0,0),Math.floor((R-U+1)/V)},now:Date.now};function z(t,e){return null!=t&&null!=e&&t==t&&e==e&&(t===e||(f(t)||f(e)?+t==+e:y(t)&&y(e)?t+""==e+"":!(!m(t)||!m(e))&&function(t,e){if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1;if(t.length||e.length)return W(t,e);const n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;if(n.sort(),i.sort(),!W(n,i,((t,e)=>t===e)))return!1;const r=n.length;for(let i=0;i<r;++i){const r=n[i];if(!z(t[r],e[r]))return!1}return!0}(t,e)))}function W(t,e,n=z){const i=t.length;if(i!==e.length)return!1;for(let r=0;r<i;++r)if(!n(t[r],e[r]))return!1;return!0}const H={parse_json:t=>JSON.parse(t),to_json:t=>JSON.stringify(t)};let q=Math.random;function G(){return q()}function Y(t){q=C(t)&&isFinite(t=+t)?function(t){const e=1/4294967296;return t=0|(0<=t&&t<1?t/e:Math.abs(t)),()=>e*((t=1664525*t+1013904223|0)>>>0)}(t):Math.random}function K(t){return t instanceof Map}function J(t){return K(t)||function(t){return t instanceof Set}(t)}function Q(t){return Array.from(t)}const Z={has:(t,e)=>J(t)?t.has(e):null!=t&&_(t,e),keys:t=>K(t)?Q(t.keys()):null!=t?Object.keys(t):[],values:t=>J(t)?Q(t.values()):null!=t?Object.values(t):[],entries:t=>J(t)?Q(t.entries()):null!=t?Object.entries(t):[],object:t=>t?Object.fromEntries(t):S};function X(t,e,n){let i=arguments.length;t=+t,e=+e,n=i<2?(e=t,t=0,1):i<3?1:+n,i=0|Math.max(0,Math.ceil((e-t)/n));const r=new Array(i);for(let e=0;e<i;++e)r[e]=t+e*n;return r}const tt={bin:function(t,e,n,i,r){return null==t?null:t<e?-1/0:t>n?1/0:(t=Math.max(e,Math.min(t,n)),e+i*Math.floor(1e-14+(t-e)/i+(r||0)))},equal:z,recode:function(t,e,n){if(e instanceof Map){if(e.has(t))return e.get(t)}else if(_(e,t))return e[t];return void 0!==n?n:t},sequence:X,...k,...j,...H,random:G,is_nan:Number.isNaN,is_finite:Number.isFinite,abs:Math.abs,cbrt:Math.cbrt,ceil:Math.ceil,clz32:Math.clz32,exp:Math.exp,expm1:Math.expm1,floor:Math.floor,fround:Math.fround,greatest:Math.max,least:Math.min,log:Math.log,log10:Math.log10,log1p:Math.log1p,log2:Math.log2,pow:Math.pow,round:Math.round,sign:Math.sign,sqrt:Math.sqrt,trunc:Math.trunc,degrees:t=>180*t/Math.PI,radians:t=>Math.PI*t/180,acos:Math.acos,acosh:Math.acosh,asin:Math.asin,asinh:Math.asinh,atan:Math.atan,atan2:Math.atan2,atanh:Math.atanh,cos:Math.cos,cosh:Math.cosh,sin:Math.sin,sinh:Math.sinh,tan:Math.tan,tanh:Math.tanh,...Z,parse_date:t=>null==t?t:new Date(t),parse_float:t=>null==t?t:Number.parseFloat(t),parse_int:(t,e)=>null==t?t:Number.parseInt(t,e),endswith:(t,e,n)=>null!=t&&String(t).endsWith(e,n),match:(t,e,n)=>{const i=null==t?t:String(t).match(e);return null==n||null==i?i:"number"==typeof n?i[n]:i.groups?i.groups[n]:null},normalize:(t,e)=>null==t?t:String(t).normalize(e),padend:(t,e,n)=>null==t?t:String(t).padEnd(e,n),padstart:(t,e,n)=>null==t?t:String(t).padStart(e,n),upper:t=>null==t?t:String(t).toUpperCase(),lower:t=>null==t?t:String(t).toLowerCase(),repeat:(t,e)=>null==t?t:String(t).repeat(e),replace:(t,e,n)=>null==t?t:String(t).replace(e,String(n)),substring:(t,e,n)=>null==t?t:String(t).substring(e,n),split:(t,e,n)=>null==t?[]:String(t).split(e,n),startswith:(t,e,n)=>null!=t&&String(t).startsWith(e,n),trim:t=>null==t?t:String(t).trim()};function et(t){return"bigint"==typeof t}function nt(t){return void 0===t?t+"":et(t)?t+"n":JSON.stringify(t)}function it(t,e=[],n=[]){return new rt(t,r(e),r(n))}class rt{constructor(t,e,n){this.name=t,this.fields=e,this.params=n}toString(){const t=[...this.fields.map((t=>`d[${nt(t)}]`)),...this.params.map(nt)];return`d => op.${this.name}(${t})`}toObject(){return{expr:this.toString(),func:!0}}}const st=t=>it("any",t),at=()=>it("count"),ot=t=>it("array_agg",t),lt=t=>it("array_agg_distinct",t),ct=(t,e)=>it("map_agg",[t,e]),ut=(t,e)=>it("object_agg",[t,e]),ht=(t,e)=>it("entries_agg",[t,e]),dt={...tt,row_object:(...t)=>it("row_object",null,t.flat()),count:at,any:st,array_agg:ot,array_agg_distinct:lt,object_agg:ut,map_agg:ct,entries_agg:ht,valid:t=>it("valid",t),invalid:t=>it("invalid",t),distinct:t=>it("distinct",t),mode:t=>it("mode",t),sum:t=>it("sum",t),product:t=>it("product",t),mean:t=>it("mean",t),average:t=>it("average",t),variance:t=>it("variance",t),variancep:t=>it("variancep",t),stdev:t=>it("stdev",t),stdevp:t=>it("stdevp",t),min:t=>it("min",t),max:t=>it("max",t),quantile:(t,e)=>it("quantile",t,e),median:t=>it("median",t),covariance:(t,e)=>it("covariance",[t,e]),covariancep:(t,e)=>it("covariancep",[t,e]),corr:(t,e)=>it("corr",[t,e]),bins:(t,e,n,i)=>it("bins",t,[e,n,i]),row_number:()=>it("row_number"),rank:()=>it("rank"),avg_rank:()=>it("avg_rank"),dense_rank:()=>it("dense_rank"),percent_rank:()=>it("percent_rank"),cume_dist:()=>it("cume_dist"),ntile:t=>it("ntile",null,t),lag:(t,e,n)=>it("lag",t,[e,n]),lead:(t,e,n)=>it("lead",t,[e,n]),first_value:t=>it("first_value",t),last_value:t=>it("last_value",t),nth_value:(t,e)=>it("nth_value",t,e),fill_down:(t,e)=>it("fill_down",t,e),fill_up:(t,e)=>it("fill_up",t,e)};const pt="Identifier",ft="Literal",mt="MemberExpression",yt="ObjectPattern",gt="Property",bt="Column",vt=(t,e)=>{const n=Tt[t.type];return n?n(t,e):o(`Unsupported expression construct: ${t.type}`)},_t=(t,e)=>"("+vt(t.left,e)+" "+t.operator+" "+vt(t.right,e)+")",wt=(t,e)=>"("+St(t.params,e)+")=>"+vt(t.body,e),xt=(t,e)=>vt(t.callee,e)+"("+St(t.arguments,e)+")",St=(t,e,n=",")=>t.map((t=>vt(t,e))).join(n),It=t=>t.computed?`[${nt(t.name)}]`:`.${t.name}`,At=(t,e,n)=>{const i=t.table||"";return`data${i}${It(t)}.${n}(${e.index}${i})`},Tt={Constant:t=>t.raw,Column:(t,e)=>At(t,e,"get"),Dictionary:(t,e)=>At(t,e,"key"),Function:t=>`fn.${t.name}`,Parameter:t=>`$${It(t)}`,Op:(t,e)=>`op(${nt(t.name)},${e.op||e.index})`,Literal:t=>t.raw,Identifier:t=>t.name,TemplateLiteral:(t,e)=>{const{quasis:n,expressions:i}=t,r=i.length;let s=n[0].value.raw;for(let t=0;t<r;)s+="${"+vt(i[t],e)+"}"+n[++t].value.raw;return"`"+s+"`"},MemberExpression:(t,e)=>{const n=!t.computed,i=vt(t.object,e),r=vt(t.property,e);return i+(n?"."+r:"["+r+"]")},CallExpression:xt,NewExpression:(t,e)=>"new "+xt(t,e),ArrayExpression:(t,e)=>"["+St(t.elements,e)+"]",AssignmentExpression:_t,BinaryExpression:_t,LogicalExpression:_t,UnaryExpression:(t,e)=>"("+t.operator+vt(t.argument,e)+")",ConditionalExpression:(t,e)=>"("+vt(t.test,e)+"?"+vt(t.consequent,e)+":"+vt(t.alternate,e)+")",ObjectExpression:(t,e)=>"({"+St(t.properties,e)+"})",Property:(t,e)=>{const n=vt(t.key,e);return(t.computed?`[${n}]`:n)+":"+vt(t.value,e)},ArrowFunctionExpression:wt,FunctionExpression:wt,FunctionDeclaration:wt,ArrayPattern:(t,e)=>"["+St(t.elements,e)+"]",ObjectPattern:(t,e)=>"{"+St(t.properties,e)+"}",VariableDeclaration:(t,e)=>t.kind+" "+St(t.declarations,e,","),VariableDeclarator:(t,e)=>vt(t.id,e)+"="+vt(t.init,e),SpreadElement:(t,e)=>"..."+vt(t.argument,e),BlockStatement:(t,e)=>"{"+St(t.body,e,";")+";}",BreakStatement:()=>"break",ExpressionStatement:(t,e)=>vt(t.expression,e),IfStatement:(t,e)=>"if ("+vt(t.test,e)+")"+vt(t.consequent,e)+(t.alternate?" else "+vt(t.alternate,e):""),SwitchStatement:(t,e)=>"switch ("+vt(t.discriminant,e)+") {"+St(t.cases,e,"")+"}",SwitchCase:(t,e)=>(t.test?"case "+vt(t.test,e):"default")+": "+St(t.consequent,e,";")+";",ReturnStatement:(t,e)=>"return "+vt(t.argument,e),Program:(t,e)=>vt(t.body[0],e)};function Ct(t,e={index:"row"}){return vt(t,e)}function Nt(t){const e=typeof t;return"string"===e?`"${t}"`:"object"===e&&t?f(t)?+t:i(t)||A(t)?`[${t.map(Nt)}]`:y(t)?t+"":function(t){let e="{",n=-1;for(const i in t)++n>0&&(e+=","),e+=`"${i}":${Nt(t[i])}`;return e+="}",e}(t):t}function kt(t,e){const n=t.length;return 1===n?(e,n)=>Nt(t[0](e,n)):(i,r)=>{let s="";for(let a=0;a<n;++a){a>0&&(s+="|");const n=t[a](i,r);if(e&&(null==n||n!=n))return null;s+=Nt(n)}return s}}function Et(){}function Ot(t){return t.init=t.init||Et,t.add=t.add||Et,t.rem=t.rem||Et,t}function Mt(t,e){return t.product_v=!1,t.product=e}const Dt={count:{create:()=>Ot({value:t=>t.count}),param:[]},array_agg:{create:()=>Ot({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[1]},object_agg:{create:()=>Ot({init:t=>t.values=!0,value:t=>Object.fromEntries(t.list.values())}),param:[2]},map_agg:{create:()=>Ot({init:t=>t.values=!0,value:t=>new Map(t.list.values())}),param:[2]},entries_agg:{create:()=>Ot({init:t=>t.values=!0,value:t=>t.list.values(t.stream)}),param:[2]},any:{create:()=>Ot({add:(t,e)=>{null==t.any&&(t.any=e)},value:t=>t.valid?t.any:S}),param:[1]},valid:{create:()=>Ot({value:t=>t.valid}),param:[1]},invalid:{create:()=>Ot({value:t=>t.count-t.valid}),param:[1]},distinct:{create:()=>({init:t=>t.distinct=function(){const t=new Map;return{count:()=>t.size,values:()=>Array.from(t.values(),(t=>t.v)),increment(e){const n=Nt(e),i=t.get(n);i?++i.n:t.set(n,{v:e,n:1})},decrement(e){const n=Nt(e),i=t.get(n);1===i.n?t.delete(n):--i.n},forEach(e){t.forEach((({v:t,n})=>e(t,n)))}}}(),value:t=>t.distinct.count()+(t.valid===t.count?0:1),add:(t,e)=>t.distinct.increment(e),rem:(t,e)=>t.distinct.decrement(e)}),param:[1]},array_agg_distinct:{create:()=>Ot({value:t=>t.distinct.values()}),param:[1],req:["distinct"]},mode:{create:()=>Ot({value:t=>{let e=S,n=0;return t.distinct.forEach(((t,i)=>{i>n&&(n=i,e=t)})),e}}),param:[1],req:["distinct"]},sum:{create:()=>({init:t=>t.sum=0,value:t=>t.valid?t.sum:S,add:(t,e)=>et(e)?0===t.sum?t.sum=e:t.sum+=e:t.sum+=+e,rem:(t,e)=>t.sum-=e}),param:[1]},product:{create:()=>({init:t=>Mt(t,1),value:t=>t.valid?t.product_v?Mt(t,function(t,e=0,n=t.length){let i=t[e++];for(let r=e;r<n;++r)i*=t[r];return i}(t.list.values())):t.product:void 0,add:(t,e)=>et(e)&&1===t.product?t.product=e:t.product*=e,rem:(t,e)=>0==e||e===1/0||e===-1/0?t.product_v=!0:t.product/=e}),param:[1],stream:["array_agg"]},mean:{create:()=>({init:t=>t.mean=0,value:t=>t.valid?t.mean:S,add:(t,e)=>{t.mean_d=e-t.mean,t.mean+=t.mean_d/t.valid},rem:(t,e)=>{t.mean_d=e-t.mean,t.mean-=t.valid?t.mean_d/t.valid:t.mean}}),param:[1]},average:{create:()=>Ot({value:t=>t.valid?t.mean:S}),param:[1],req:["mean"]},variance:{create:()=>({init:t=>t.dev=0,value:t=>t.valid>1?t.dev/(t.valid-1):S,add:(t,e)=>t.dev+=t.mean_d*(e-t.mean),rem:(t,e)=>t.dev-=t.mean_d*(e-t.mean)}),param:[1],req:["mean"]},variancep:{create:()=>Ot({value:t=>t.valid>1?t.dev/t.valid:S}),param:[1],req:["variance"]},stdev:{create:()=>Ot({value:t=>t.valid>1?Math.sqrt(t.dev/(t.valid-1)):S}),param:[1],req:["variance"]},stdevp:{create:()=>Ot({value:t=>t.valid>1?Math.sqrt(t.dev/t.valid):S}),param:[1],req:["variance"]},min:{create:()=>({init:t=>t.min=S,value:t=>t.min=Number.isNaN(t.min)?t.list.min():t.min,add:(t,e)=>{(e<t.min||t.min===S)&&(t.min=e)},rem:(t,e)=>{e<=t.min&&(t.min=NaN)}}),param:[1],stream:["array_agg"]},max:{create:()=>({init:t=>t.max=S,value:t=>t.max=Number.isNaN(t.max)?t.list.max():t.max,add:(t,e)=>{(e>t.max||t.max===S)&&(t.max=e)},rem:(t,e)=>{e>=t.max&&(t.max=NaN)}}),param:[1],stream:["array_agg"]},quantile:{create:t=>Ot({value:e=>e.list.quantile(t)}),param:[1,1],req:["array_agg"]},median:{create:()=>Ot({value:t=>t.list.quantile(.5)}),param:[1],req:["array_agg"]},covariance:{create:()=>({init:t=>{t.cov=t.mean_x=t.mean_y=t.dev_x=t.dev_y=0},value:t=>t.valid>1?t.cov/(t.valid-1):S,add:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x+=i/t.valid,t.mean_y+=r/t.valid;const s=n-t.mean_y;t.dev_x+=i*(e-t.mean_x),t.dev_y+=r*s,t.cov+=i*s},rem:(t,e,n)=>{const i=e-t.mean_x,r=n-t.mean_y;t.mean_x-=t.valid?i/t.valid:t.mean_x,t.mean_y-=t.valid?r/t.valid:t.mean_y;const s=n-t.mean_y;t.dev_x-=i*(e-t.mean_x),t.dev_y-=r*s,t.cov-=i*s}}),param:[2]},covariancep:{create:()=>Ot({value:t=>t.valid>1?t.cov/t.valid:S}),param:[2],req:["covariance"]},corr:{create:()=>Ot({value:t=>t.valid>1?t.cov/(Math.sqrt(t.dev_x)*Math.sqrt(t.dev_y)):S}),param:[2],req:["covariance"]},bins:{create:(t,e,n,i)=>Ot({value:r=>function(t,e,n=15,i=!0,r=0,s){const a=Math.LN10;if(null==s){const i=Math.ceil(Math.log(n)/a),o=e-t||Math.abs(t)||1,l=[5,2];for(s=Math.max(r,Math.pow(10,Math.round(Math.log(o)/a)-i));Math.ceil(o/s)>n;)s*=10;const c=l.length;for(let t=0;t<c;++t){const e=s/l[t];e>=r&&o/e<=n&&(s=e)}}if(i){let n=Math.log(s);const i=n>=0?0:1+~~(-n/a),r=Math.pow(10,-i-1);n=Math.floor(t/s+r)*s,t=t<n?n-s:n,e=Math.ceil(e/s)*s}return[t,e===t?t+s:e,s]}(r.min,r.max,t,e,n,i)}),param:[1,4],req:["min","max"]}},Bt={create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?t=n+1:t}}},param:[]},Lt={create(){let t;return{init:()=>t=0,value:e=>{const{index:n,peer:i,size:r}=e;let s=n;if(t<s){for(;s+1<r&&i(s+1);)++s;t=s}return(1+t)/r}}},param:[]},Pt={row_number:{create:()=>({init:Et,value:t=>t.index+1}),param:[]},rank:Bt,avg_rank:{create(){let t,e;return{init:()=>(t=-1,e=1),value:n=>{const i=n.index;if(i>=t){for(e=t=i+1;n.peer(t);e+=++t);e/=t-i}return e}}},param:[]},dense_rank:{create(){let t;return{init:()=>t=1,value:e=>{const n=e.index;return n&&!e.peer(n)?++t:t}}},param:[]},percent_rank:{create(){const{init:t,value:e}=Bt.create();return{init:t,value:t=>(e(t)-1)/(t.size-1)}},param:[]},cume_dist:Lt,ntile:{create(t){(t=+t)>0||o("ntile num must be greater than zero.");const{init:e,value:n}=Lt.create();return{init:e,value:e=>Math.ceil(t*n(e))}},param:[0,1]},lag:{create:(t,e)=>(t=+t||1,{init:Et,value:(n,i)=>{const r=n.index-t;return r>=0?n.value(r,i):e}}),param:[1,2]},lead:{create:(t,e)=>(t=+t||1,{init:Et,value:(n,i)=>{const r=n.index+t;return r<n.size?n.value(r,i):e}}),param:[1,2]},first_value:{create:()=>({init:Et,value:(t,e)=>t.value(t.i0,e)}),param:[1]},last_value:{create:()=>({init:Et,value:(t,e)=>t.value(t.i1-1,e)}),param:[1]},nth_value:{create:t=>((t=+t)>0||o("nth_value nth must be greater than zero."),{init:Et,value:(e,n)=>{const i=e.i0+(t-1);return i<e.i1?e.value(i,n):S}}),param:[1,1]},fill_down:{create(t){let e;return{init:()=>e=t,value:(t,n)=>{const i=t.value(t.index,n);return C(i)?e=i:e}}},param:[1,1]},fill_up:{create(t){let e,n;return{init:()=>(e=t,n=-1),value:(i,r)=>i.index<=n?e:(n=function(t,e,n){for(const i=t.size;n<i;++n)if(C(t.value(n,e)))return n;return-1}(i,r,i.index))>=0?e=i.value(n,r):(n=i.size,e=t)}},param:[1,1]}};function Ft(t){return _(Dt,t)}function Vt(t){return _(Pt,t)}function Ut(t){return _(tt,t)||"row_object"===t}function Rt(t){return Ft(t)&&Dt[t]}function $t(t){return Vt(t)&&Pt[t]}function jt(t,e,n){return t=`"use strict"; return ${t};`,Function("fn","$",t)(e,n)}const zt={escape:(t,e,n)=>jt(t,e,n),expr:(t,e)=>jt(`(row,data,op)=>${t}`,tt,e),expr2:(t,e)=>jt(`(row0,data0,row,data)=>${t}`,tt,e),join:(t,e)=>jt(`(row1,data1,row2,data2)=>${t}`,tt,e),param:(t,e)=>jt(t,tt,e)},Wt={"==":1,"!=":1,"===":1,"!==":1};function Ht(t,e,n=0,i,r){if(t.type=bt,t.name=e,t.table=n,r&&i&&c(i.keyFor)){const e=Wt[r.operator]?r.left===t?r.right:r.left:r.callee&&"equal"===r.callee.name?r.arguments[r.arguments[0]===t?1:0]:null;e&&e.type===ft&&function(t,e,n,i){i<0?(t.type=ft,t.value=!1,t.raw="false"):(e.type="Dictionary",n.value=i,n.raw=i+"")}(r,t,e,i.keyFor(e.value))}return t}function qt(t){return i(t)?t:K(t)?t.entries():t?Object.entries(t):[]}const Gt="row_object";function Yt(t,e){t.type="ObjectExpression";const n=t.properties=[];for(const t of qt(e)){const[e,r]=i(t)?t:[t,t];n.push({type:gt,key:{type:ft,raw:nt(r)},value:Ht({computed:!0},e)})}return t}function Kt(t){return Ct(Yt({},t))}function Jt(t){return zt.expr(Kt(t))}var Qt,Zt,Xt,te,ee,ne,ie,re,se,ae,oe;function le(t){if(null===t)return"null";if(void 0===t)return"undefined";switch(typeof t){case"number":case"bigint":return`${t}`;case"string":return`"${t}"`}return"function"==typeof t[Symbol.toPrimitive]?t[Symbol.toPrimitive]("string"):ArrayBuffer.isView(t)?t instanceof BigInt64Array||t instanceof BigUint64Array?`[${[...t].map((t=>le(t)))}]`:`[${t}]`:ArrayBuffer.isView(t)?`[${t}]`:JSON.stringify(t,((t,e)=>"bigint"==typeof e?`${e}`:e))}function ce(t,e,n,i){return new(n||(n=Promise))((function(r,s){function a(t){try{l(i.next(t))}catch(t){s(t)}}function o(t){try{l(i.throw(t))}catch(t){s(t)}}function l(t){var e;t.done?r(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(a,o)}l((i=i.apply(t,e||[])).next())}))}function ue(t){return this instanceof ue?(this.v=t,this):new ue(t)}function he(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i,r=n.apply(t,e||[]),s=[];return i={},a("next"),a("throw"),a("return"),i[Symbol.asyncIterator]=function(){return this},i;function a(t){r[t]&&(i[t]=function(e){return new Promise((function(n,i){s.push([t,e,n,i])>1||o(t,e)}))})}function o(t,e){try{(n=r[t](e)).value instanceof ue?Promise.resolve(n.value.v).then(l,c):u(s[0][2],n)}catch(t){u(s[0][3],t)}var n}function l(t){o("next",t)}function c(t){o("throw",t)}function u(t,e){t(e),s.shift(),s.length&&o(s[0][0],s[0][1])}}function de(t){var e,n;return e={},i("next"),i("throw",(function(t){throw t})),i("return"),e[Symbol.iterator]=function(){return this},e;function i(i,r){e[i]=t[i]?function(e){return(n=!n)?{value:ue(t[i](e)),done:"return"===i}:r?r(e):e}:r}}function pe(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e,n=t[Symbol.asyncIterator];return n?n.call(t):(t=function(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),e={},i("next"),i("throw"),i("return"),e[Symbol.asyncIterator]=function(){return this},e);function i(n){e[n]=t[n]&&function(e){return new Promise((function(i,r){!function(t,e,n,i){Promise.resolve(i).then((function(e){t({value:e,done:n})}),e)}(i,r,(e=t[n](e)).done,e.value)}))}}}!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(Qt||(Qt={})),(oe=Zt||(Zt={}))[oe.Sparse=0]="Sparse",oe[oe.Dense=1]="Dense",function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(Xt||(Xt={})),function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(te||(te={})),(ae=ee||(ee={}))[ae.SECOND=0]="SECOND",ae[ae.MILLISECOND=1]="MILLISECOND",ae[ae.MICROSECOND=2]="MICROSECOND",ae[ae.NANOSECOND=3]="NANOSECOND",function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(ne||(ne={})),function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(ie||(ie={})),function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.Float=3]="Float",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct=13]="Struct",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Dictionary=-1]="Dictionary",t[t.Int8=-2]="Int8",t[t.Int16=-3]="Int16",t[t.Int32=-4]="Int32",t[t.Int64=-5]="Int64",t[t.Uint8=-6]="Uint8",t[t.Uint16=-7]="Uint16",t[t.Uint32=-8]="Uint32",t[t.Uint64=-9]="Uint64",t[t.Float16=-10]="Float16",t[t.Float32=-11]="Float32",t[t.Float64=-12]="Float64",t[t.DateDay=-13]="DateDay",t[t.DateMillisecond=-14]="DateMillisecond",t[t.TimestampSecond=-15]="TimestampSecond",t[t.TimestampMillisecond=-16]="TimestampMillisecond",t[t.TimestampMicrosecond=-17]="TimestampMicrosecond",t[t.TimestampNanosecond=-18]="TimestampNanosecond",t[t.TimeSecond=-19]="TimeSecond",t[t.TimeMillisecond=-20]="TimeMillisecond",t[t.TimeMicrosecond=-21]="TimeMicrosecond",t[t.TimeNanosecond=-22]="TimeNanosecond",t[t.DenseUnion=-23]="DenseUnion",t[t.SparseUnion=-24]="SparseUnion",t[t.IntervalDayTime=-25]="IntervalDayTime",t[t.IntervalYearMonth=-26]="IntervalYearMonth"}(re||(re={})),function(t){t[t.OFFSET=0]="OFFSET",t[t.DATA=1]="DATA",t[t.VALIDITY=2]="VALIDITY",t[t.TYPE=3]="TYPE"}(se||(se={})),Object.create,Object.create;const fe=new TextDecoder("utf-8"),me=t=>fe.decode(t),ye=new TextEncoder,ge=t=>ye.encode(t),[be,ve]=(()=>{const t=()=>{throw new Error("BigInt is not available in this environment")};function e(){throw t()}return e.asIntN=()=>{throw t()},e.asUintN=()=>{throw t()},"undefined"!=typeof BigInt?[BigInt,!0]:[e,!1]})(),[_e,we]=(()=>{const t=()=>{throw new Error("BigInt64Array is not available in this environment")};return"undefined"!=typeof BigInt64Array?[BigInt64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),[xe,Se]=(()=>{const t=()=>{throw new Error("BigUint64Array is not available in this environment")};return"undefined"!=typeof BigUint64Array?[BigUint64Array,!0]:[class{static get BYTES_PER_ELEMENT(){return 8}static of(){throw t()}static from(){throw t()}constructor(){throw t()}},!1]})(),Ie=t=>"boolean"==typeof t,Ae=t=>"function"==typeof t,Te=t=>null!=t&&Object(t)===t,Ce=t=>Te(t)&&Ae(t.then),Ne=t=>Te(t)&&Ae(t[Symbol.iterator]),ke=t=>Te(t)&&Ae(t[Symbol.asyncIterator]),Ee=t=>Te(t)&&Te(t.schema),Oe=t=>Te(t)&&"done"in t&&"value"in t,Me=t=>Te(t)&&Ae(t.stat)&&(t=>"number"==typeof t)(t.fd),De=t=>Te(t)&&Le(t.body),Be=t=>"_getDOMStream"in t&&"_getNodeStream"in t,Le=t=>Te(t)&&Ae(t.cancel)&&Ae(t.getReader)&&!Be(t),Pe=t=>Te(t)&&Ae(t.read)&&Ae(t.pipe)&&Ie(t.readable)&&!Be(t),Fe="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:ArrayBuffer;function Ve(t,e,n=0,i=e.byteLength){const r=t.byteLength,s=new Uint8Array(t.buffer,t.byteOffset,r),a=new Uint8Array(e.buffer,e.byteOffset,Math.min(i,r));return s.set(a,n),t}function Ue(t,e){const n=function(t){const e=t[0]?[t[0]]:[];let n,i,r,s;for(let a,o,l=0,c=0,u=t.length;++l<u;)a=e[c],o=t[l],!a||!o||a.buffer!==o.buffer||o.byteOffset<a.byteOffset?o&&(e[++c]=o):(({byteOffset:n,byteLength:r}=a),({byteOffset:i,byteLength:s}=o),n+r<i||i+s<n?o&&(e[++c]=o):e[c]=new Uint8Array(a.buffer,n,i-n+s));return e}(t),i=n.reduce(((t,e)=>t+e.byteLength),0);let r,s,a,o=0,l=-1;const c=Math.min(e||Number.POSITIVE_INFINITY,i);for(const t=n.length;++l<t;){if(r=n[l],s=r.subarray(0,Math.min(r.length,c-o)),c<=o+s.length){s.length<r.length?n[l]=r.subarray(s.length):s.length===r.length&&l++,a?Ve(a,s,o):a=s;break}Ve(a||(a=new Uint8Array(c)),s,o),o+=s.length}return[a||new Uint8Array(0),n.slice(l),i-(a?a.byteLength:0)]}function Re(t,e){let n=Oe(e)?e.value:e;return n instanceof t?t===Uint8Array?new t(n.buffer,n.byteOffset,n.byteLength):n:n?("string"==typeof n&&(n=ge(n)),n instanceof ArrayBuffer||n instanceof Fe?new t(n):Te(i=n)&&Ae(i.clear)&&Ae(i.bytes)&&Ae(i.position)&&Ae(i.setPosition)&&Ae(i.capacity)&&Ae(i.getBufferIdentifier)&&Ae(i.createLong)?Re(t,n.bytes()):ArrayBuffer.isView(n)?n.byteLength<=0?new t(0):new t(n.buffer,n.byteOffset,n.byteLength/t.BYTES_PER_ELEMENT):t.from(n)):new t(0);var i}const $e=t=>Re(Int32Array,t),je=t=>Re(Uint8Array,t),ze=t=>(t.next(),t);function We(t,e){return he(this,arguments,(function*(){if(Ce(e))return yield ue(yield ue(yield*de(pe(We(t,yield ue(e))))));const n=function(t){return he(this,arguments,(function*(){yield yield ue(yield ue(t))}))},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Fe?n(e):Ne(e)?function(t){return he(this,arguments,(function*(){yield ue(yield*de(pe(ze(function*(t){let e=null;do{e=t.next(yield null==e?void 0:e.value)}while(!e.done)}(t[Symbol.iterator]())))))}))}(e):ke(e)?e:n(e);return yield ue(yield*de(pe(ze(function(e){return he(this,arguments,(function*(){let n=null;do{n=yield ue(e.next(yield yield ue(Re(t,n))))}while(!n.done)}))}(i[Symbol.asyncIterator]()))))),yield ue(new t)}))}const He=t=>We(Uint8Array,t);function qe(t,e,n){if(0!==t){n=n.slice(0,e+1);for(let i=-1;++i<=e;)n[i]+=t}return n}const Ge=Symbol.for("isArrowBigNum");function Ye(t,...e){return 0===e.length?Object.setPrototypeOf(Re(this.TypedArray,t),this.constructor.prototype):Object.setPrototypeOf(new this.TypedArray(t,...e),this.constructor.prototype)}function Ke(...t){return Ye.apply(this,t)}function Je(...t){return Ye.apply(this,t)}function Qe(...t){return Ye.apply(this,t)}function Ze(t){const{buffer:e,byteOffset:n,length:i,signed:r}=t,s=new xe(e,n,i),a=r&&s[s.length-1]&BigInt(1)<<BigInt(63);let o=a?BigInt(1):BigInt(0),l=BigInt(0);if(a){for(const t of s)o+=~t*(BigInt(1)<<BigInt(32)*l++);o*=BigInt(-1)}else for(const t of s)o+=t*(BigInt(1)<<BigInt(32)*l++);return o}let Xe,tn;function en(t){let e="";const n=new Uint32Array(2);let i=new Uint16Array(t.buffer,t.byteOffset,t.byteLength/2);const r=new Uint32Array((i=new Uint16Array(i).reverse()).buffer);let s=-1;const a=i.length-1;do{for(n[0]=i[s=0];s<a;)i[s++]=n[1]=n[0]/10,n[0]=(n[0]-10*n[1]<<16)+i[s];i[s]=n[1]=n[0]/10,n[0]=n[0]-10*n[1],e=`${n[0]}${e}`}while(r[0]||r[1]||r[2]||r[3]);return e||"0"}Ye.prototype[Ge]=!0,Ye.prototype.toJSON=function(){return`"${Xe(this)}"`},Ye.prototype.valueOf=function(){return Ze(this)},Ye.prototype.toString=function(){return Xe(this)},Ye.prototype[Symbol.toPrimitive]=function(t="default"){switch(t){case"number":return Ze(this);case"string":return Xe(this);case"default":return tn(this)}return Xe(this)},Object.setPrototypeOf(Ke.prototype,Object.create(Int32Array.prototype)),Object.setPrototypeOf(Je.prototype,Object.create(Uint32Array.prototype)),Object.setPrototypeOf(Qe.prototype,Object.create(Uint32Array.prototype)),Object.assign(Ke.prototype,Ye.prototype,{constructor:Ke,signed:!0,TypedArray:Int32Array,BigIntArray:_e}),Object.assign(Je.prototype,Ye.prototype,{constructor:Je,signed:!1,TypedArray:Uint32Array,BigIntArray:xe}),Object.assign(Qe.prototype,Ye.prototype,{constructor:Qe,signed:!0,TypedArray:Uint32Array,BigIntArray:xe}),ve?(tn=t=>8===t.byteLength?new t.BigIntArray(t.buffer,t.byteOffset,1)[0]:en(t),Xe=t=>8===t.byteLength?`${new t.BigIntArray(t.buffer,t.byteOffset,1)[0]}`:en(t)):(Xe=en,tn=Xe);class nn{static new(t,e){switch(e){case!0:return new Ke(t);case!1:return new Je(t)}switch(t.constructor){case Int8Array:case Int16Array:case Int32Array:case _e:return new Ke(t)}return 16===t.byteLength?new Qe(t):new Je(t)}static signed(t){return new Ke(t)}static unsigned(t){return new Je(t)}static decimal(t){return new Qe(t)}constructor(t,e){return nn.new(t,e)}}var rn,sn,an,on,ln,cn,un,hn,dn,pn,fn,mn,yn,gn,bn,vn,_n,wn,xn;class Sn{static isNull(t){return(null==t?void 0:t.typeId)===re.Null}static isInt(t){return(null==t?void 0:t.typeId)===re.Int}static isFloat(t){return(null==t?void 0:t.typeId)===re.Float}static isBinary(t){return(null==t?void 0:t.typeId)===re.Binary}static isUtf8(t){return(null==t?void 0:t.typeId)===re.Utf8}static isBool(t){return(null==t?void 0:t.typeId)===re.Bool}static isDecimal(t){return(null==t?void 0:t.typeId)===re.Decimal}static isDate(t){return(null==t?void 0:t.typeId)===re.Date}static isTime(t){return(null==t?void 0:t.typeId)===re.Time}static isTimestamp(t){return(null==t?void 0:t.typeId)===re.Timestamp}static isInterval(t){return(null==t?void 0:t.typeId)===re.Interval}static isList(t){return(null==t?void 0:t.typeId)===re.List}static isStruct(t){return(null==t?void 0:t.typeId)===re.Struct}static isUnion(t){return(null==t?void 0:t.typeId)===re.Union}static isFixedSizeBinary(t){return(null==t?void 0:t.typeId)===re.FixedSizeBinary}static isFixedSizeList(t){return(null==t?void 0:t.typeId)===re.FixedSizeList}static isMap(t){return(null==t?void 0:t.typeId)===re.Map}static isDictionary(t){return(null==t?void 0:t.typeId)===re.Dictionary}static isDenseUnion(t){return Sn.isUnion(t)&&t.mode===Zt.Dense}static isSparseUnion(t){return Sn.isUnion(t)&&t.mode===Zt.Sparse}get typeId(){return re.NONE}}rn=Symbol.toStringTag,Sn[rn]=(t=>(t.children=null,t.ArrayType=Array,t[Symbol.toStringTag]="DataType"))(Sn.prototype);class In extends Sn{toString(){return"Null"}get typeId(){return re.Null}}sn=Symbol.toStringTag,In[sn]=(t=>t[Symbol.toStringTag]="Null")(In.prototype);class An extends Sn{constructor(t,e){super(),this.isSigned=t,this.bitWidth=e}get typeId(){return re.Int}get ArrayType(){switch(this.bitWidth){case 8:return this.isSigned?Int8Array:Uint8Array;case 16:return this.isSigned?Int16Array:Uint16Array;case 32:return this.isSigned?Int32Array:Uint32Array;case 64:return this.isSigned?BigInt64Array:BigUint64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`${this.isSigned?"I":"Ui"}nt${this.bitWidth}`}}an=Symbol.toStringTag,An[an]=(t=>(t.isSigned=null,t.bitWidth=null,t[Symbol.toStringTag]="Int"))(An.prototype);class Tn extends An{constructor(){super(!0,8)}get ArrayType(){return Int8Array}}class Cn extends An{constructor(){super(!0,16)}get ArrayType(){return Int16Array}}class Nn extends An{constructor(){super(!0,32)}get ArrayType(){return Int32Array}}class kn extends An{constructor(){super(!0,64)}get ArrayType(){return BigInt64Array}}class En extends An{constructor(){super(!1,8)}get ArrayType(){return Uint8Array}}class On extends An{constructor(){super(!1,16)}get ArrayType(){return Uint16Array}}class Mn extends An{constructor(){super(!1,32)}get ArrayType(){return Uint32Array}}class Dn extends An{constructor(){super(!1,64)}get ArrayType(){return BigUint64Array}}Object.defineProperty(Tn.prototype,"ArrayType",{value:Int8Array}),Object.defineProperty(Cn.prototype,"ArrayType",{value:Int16Array}),Object.defineProperty(Nn.prototype,"ArrayType",{value:Int32Array}),Object.defineProperty(kn.prototype,"ArrayType",{value:BigInt64Array}),Object.defineProperty(En.prototype,"ArrayType",{value:Uint8Array}),Object.defineProperty(On.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(Mn.prototype,"ArrayType",{value:Uint32Array}),Object.defineProperty(Dn.prototype,"ArrayType",{value:BigUint64Array});class Bn extends Sn{constructor(t){super(),this.precision=t}get typeId(){return re.Float}get ArrayType(){switch(this.precision){case Xt.HALF:return Uint16Array;case Xt.SINGLE:return Float32Array;case Xt.DOUBLE:return Float64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}toString(){return`Float${this.precision<<5||16}`}}on=Symbol.toStringTag,Bn[on]=(t=>(t.precision=null,t[Symbol.toStringTag]="Float"))(Bn.prototype);class Ln extends Bn{constructor(){super(Xt.HALF)}}class Pn extends Bn{constructor(){super(Xt.SINGLE)}}class Fn extends Bn{constructor(){super(Xt.DOUBLE)}}Object.defineProperty(Ln.prototype,"ArrayType",{value:Uint16Array}),Object.defineProperty(Pn.prototype,"ArrayType",{value:Float32Array}),Object.defineProperty(Fn.prototype,"ArrayType",{value:Float64Array});class Vn extends Sn{constructor(){super()}get typeId(){return re.Binary}toString(){return"Binary"}}ln=Symbol.toStringTag,Vn[ln]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Binary"))(Vn.prototype);class Un extends Sn{constructor(){super()}get typeId(){return re.Utf8}toString(){return"Utf8"}}cn=Symbol.toStringTag,Un[cn]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Utf8"))(Un.prototype);class Rn extends Sn{constructor(){super()}get typeId(){return re.Bool}toString(){return"Bool"}}un=Symbol.toStringTag,Rn[un]=(t=>(t.ArrayType=Uint8Array,t[Symbol.toStringTag]="Bool"))(Rn.prototype);class $n extends Sn{constructor(t,e,n=128){super(),this.scale=t,this.precision=e,this.bitWidth=n}get typeId(){return re.Decimal}toString(){return`Decimal[${this.precision}e${this.scale>0?"+":""}${this.scale}]`}}hn=Symbol.toStringTag,$n[hn]=(t=>(t.scale=null,t.precision=null,t.ArrayType=Uint32Array,t[Symbol.toStringTag]="Decimal"))($n.prototype);class jn extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Date}toString(){return`Date${32*(this.unit+1)}<${te[this.unit]}>`}}dn=Symbol.toStringTag,jn[dn]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Date"))(jn.prototype);class zn extends jn{constructor(){super(te.DAY)}}class Wn extends jn{constructor(){super(te.MILLISECOND)}}class Hn extends Sn{constructor(t,e){super(),this.unit=t,this.bitWidth=e}get typeId(){return re.Time}toString(){return`Time${this.bitWidth}<${ee[this.unit]}>`}get ArrayType(){switch(this.bitWidth){case 32:return Int32Array;case 64:return BigInt64Array}throw new Error(`Unrecognized ${this[Symbol.toStringTag]} type`)}}pn=Symbol.toStringTag,Hn[pn]=(t=>(t.unit=null,t.bitWidth=null,t[Symbol.toStringTag]="Time"))(Hn.prototype);class qn extends Hn{constructor(){super(ee.SECOND,32)}}class Gn extends Hn{constructor(){super(ee.MILLISECOND,32)}}class Yn extends Hn{constructor(){super(ee.MICROSECOND,64)}}class Kn extends Hn{constructor(){super(ee.NANOSECOND,64)}}class Jn extends Sn{constructor(t,e){super(),this.unit=t,this.timezone=e}get typeId(){return re.Timestamp}toString(){return`Timestamp<${ee[this.unit]}${this.timezone?`, ${this.timezone}`:""}>`}}fn=Symbol.toStringTag,Jn[fn]=(t=>(t.unit=null,t.timezone=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Timestamp"))(Jn.prototype);class Qn extends Sn{constructor(t){super(),this.unit=t}get typeId(){return re.Interval}toString(){return`Interval<${ne[this.unit]}>`}}mn=Symbol.toStringTag,Qn[mn]=(t=>(t.unit=null,t.ArrayType=Int32Array,t[Symbol.toStringTag]="Interval"))(Qn.prototype);class Zn extends Qn{constructor(){super(ne.DAY_TIME)}}class Xn extends Qn{constructor(){super(ne.YEAR_MONTH)}}class ti extends Sn{constructor(t){super(),this.children=[t]}get typeId(){return re.List}toString(){return`List<${this.valueType}>`}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}}yn=Symbol.toStringTag,ti[yn]=(t=>(t.children=null,t[Symbol.toStringTag]="List"))(ti.prototype);class ei extends Sn{constructor(t){super(),this.children=t}get typeId(){return re.Struct}toString(){return`Struct<{${this.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}gn=Symbol.toStringTag,ei[gn]=(t=>(t.children=null,t[Symbol.toStringTag]="Struct"))(ei.prototype);class ni extends Sn{constructor(t,e,n){super(),this.mode=t,this.children=n,this.typeIds=e=Int32Array.from(e),this.typeIdToChildIndex=e.reduce(((t,e,n)=>(t[e]=n)&&t||t),Object.create(null))}get typeId(){return re.Union}toString(){return`${this[Symbol.toStringTag]}<${this.children.map((t=>`${t.type}`)).join(" | ")}>`}}bn=Symbol.toStringTag,ni[bn]=(t=>(t.mode=null,t.typeIds=null,t.children=null,t.typeIdToChildIndex=null,t.ArrayType=Int8Array,t[Symbol.toStringTag]="Union"))(ni.prototype);class ii extends Sn{constructor(t){super(),this.byteWidth=t}get typeId(){return re.FixedSizeBinary}toString(){return`FixedSizeBinary[${this.byteWidth}]`}}vn=Symbol.toStringTag,ii[vn]=(t=>(t.byteWidth=null,t.ArrayType=Uint8Array,t[Symbol.toStringTag]="FixedSizeBinary"))(ii.prototype);class ri extends Sn{constructor(t,e){super(),this.listSize=t,this.children=[e]}get typeId(){return re.FixedSizeList}get valueType(){return this.children[0].type}get valueField(){return this.children[0]}get ArrayType(){return this.valueType.ArrayType}toString(){return`FixedSizeList[${this.listSize}]<${this.valueType}>`}}_n=Symbol.toStringTag,ri[_n]=(t=>(t.children=null,t.listSize=null,t[Symbol.toStringTag]="FixedSizeList"))(ri.prototype);class si extends Sn{constructor(t,e=!1){super(),this.children=[t],this.keysSorted=e}get typeId(){return re.Map}get keyType(){return this.children[0].type.children[0].type}get valueType(){return this.children[0].type.children[1].type}get childType(){return this.children[0].type}toString(){return`Map<{${this.children[0].type.children.map((t=>`${t.name}:${t.type}`)).join(", ")}}>`}}wn=Symbol.toStringTag,si[wn]=(t=>(t.children=null,t.keysSorted=null,t[Symbol.toStringTag]="Map_"))(si.prototype);const ai=(oi=-1,()=>++oi);var oi;class li extends Sn{constructor(t,e,n,i){super(),this.indices=e,this.dictionary=t,this.isOrdered=i||!1,this.id=null==n?ai():"number"==typeof n?n:n.low}get typeId(){return re.Dictionary}get children(){return this.dictionary.children}get valueType(){return this.dictionary}get ArrayType(){return this.dictionary.ArrayType}toString(){return`Dictionary<${this.indices}, ${this.dictionary}>`}}function ci(t){const e=t;switch(t.typeId){case re.Decimal:return t.bitWidth/32;case re.Timestamp:return 2;case re.Date:case re.Interval:return 1+e.unit;case re.FixedSizeList:return e.listSize;case re.FixedSizeBinary:return e.byteWidth;default:return 1}}xn=Symbol.toStringTag,li[xn]=(t=>(t.id=null,t.indices=null,t.isOrdered=null,t.dictionary=null,t[Symbol.toStringTag]="Dictionary"))(li.prototype);class ui{visitMany(t,...e){return t.map(((t,n)=>this.visit(t,...e.map((t=>t[n])))))}visit(...t){return this.getVisitFn(t[0],!1).apply(this,t)}getVisitFn(t,e=!0){return function(t,e,n=!0){return"number"==typeof e?hi(t,e,n):"string"==typeof e&&e in re?hi(t,re[e],n):e&&e instanceof Sn?hi(t,di(e),n):(null==e?void 0:e.type)&&e.type instanceof Sn?hi(t,di(e.type),n):hi(t,re.NONE,n)}(this,t,e)}getVisitFnByTypeId(t,e=!0){return hi(this,t,e)}visitNull(t,...e){return null}visitBool(t,...e){return null}visitInt(t,...e){return null}visitFloat(t,...e){return null}visitUtf8(t,...e){return null}visitBinary(t,...e){return null}visitFixedSizeBinary(t,...e){return null}visitDate(t,...e){return null}visitTimestamp(t,...e){return null}visitTime(t,...e){return null}visitDecimal(t,...e){return null}visitList(t,...e){return null}visitStruct(t,...e){return null}visitUnion(t,...e){return null}visitDictionary(t,...e){return null}visitInterval(t,...e){return null}visitFixedSizeList(t,...e){return null}visitMap(t,...e){return null}}function hi(t,e,n=!0){let i=null;switch(e){case re.Null:i=t.visitNull;break;case re.Bool:i=t.visitBool;break;case re.Int:i=t.visitInt;break;case re.Int8:i=t.visitInt8||t.visitInt;break;case re.Int16:i=t.visitInt16||t.visitInt;break;case re.Int32:i=t.visitInt32||t.visitInt;break;case re.Int64:i=t.visitInt64||t.visitInt;break;case re.Uint8:i=t.visitUint8||t.visitInt;break;case re.Uint16:i=t.visitUint16||t.visitInt;break;case re.Uint32:i=t.visitUint32||t.visitInt;break;case re.Uint64:i=t.visitUint64||t.visitInt;break;case re.Float:i=t.visitFloat;break;case re.Float16:i=t.visitFloat16||t.visitFloat;break;case re.Float32:i=t.visitFloat32||t.visitFloat;break;case re.Float64:i=t.visitFloat64||t.visitFloat;break;case re.Utf8:i=t.visitUtf8;break;case re.Binary:i=t.visitBinary;break;case re.FixedSizeBinary:i=t.visitFixedSizeBinary;break;case re.Date:i=t.visitDate;break;case re.DateDay:i=t.visitDateDay||t.visitDate;break;case re.DateMillisecond:i=t.visitDateMillisecond||t.visitDate;break;case re.Timestamp:i=t.visitTimestamp;break;case re.TimestampSecond:i=t.visitTimestampSecond||t.visitTimestamp;break;case re.TimestampMillisecond:i=t.visitTimestampMillisecond||t.visitTimestamp;break;case re.TimestampMicrosecond:i=t.visitTimestampMicrosecond||t.visitTimestamp;break;case re.TimestampNanosecond:i=t.visitTimestampNanosecond||t.visitTimestamp;break;case re.Time:i=t.visitTime;break;case re.TimeSecond:i=t.visitTimeSecond||t.visitTime;break;case re.TimeMillisecond:i=t.visitTimeMillisecond||t.visitTime;break;case re.TimeMicrosecond:i=t.visitTimeMicrosecond||t.visitTime;break;case re.TimeNanosecond:i=t.visitTimeNanosecond||t.visitTime;break;case re.Decimal:i=t.visitDecimal;break;case re.List:i=t.visitList;break;case re.Struct:i=t.visitStruct;break;case re.Union:i=t.visitUnion;break;case re.DenseUnion:i=t.visitDenseUnion||t.visitUnion;break;case re.SparseUnion:i=t.visitSparseUnion||t.visitUnion;break;case re.Dictionary:i=t.visitDictionary;break;case re.Interval:i=t.visitInterval;break;case re.IntervalDayTime:i=t.visitIntervalDayTime||t.visitInterval;break;case re.IntervalYearMonth:i=t.visitIntervalYearMonth||t.visitInterval;break;case re.FixedSizeList:i=t.visitFixedSizeList;break;case re.Map:i=t.visitMap}if("function"==typeof i)return i;if(!n)return()=>null;throw new Error(`Unrecognized type '${re[e]}'`)}function di(t){switch(t.typeId){case re.Null:return re.Null;case re.Int:{const{bitWidth:e,isSigned:n}=t;switch(e){case 8:return n?re.Int8:re.Uint8;case 16:return n?re.Int16:re.Uint16;case 32:return n?re.Int32:re.Uint32;case 64:return n?re.Int64:re.Uint64}return re.Int}case re.Float:switch(t.precision){case Xt.HALF:return re.Float16;case Xt.SINGLE:return re.Float32;case Xt.DOUBLE:return re.Float64}return re.Float;case re.Binary:return re.Binary;case re.Utf8:return re.Utf8;case re.Bool:return re.Bool;case re.Decimal:return re.Decimal;case re.Time:switch(t.unit){case ee.SECOND:return re.TimeSecond;case ee.MILLISECOND:return re.TimeMillisecond;case ee.MICROSECOND:return re.TimeMicrosecond;case ee.NANOSECOND:return re.TimeNanosecond}return re.Time;case re.Timestamp:switch(t.unit){case ee.SECOND:return re.TimestampSecond;case ee.MILLISECOND:return re.TimestampMillisecond;case ee.MICROSECOND:return re.TimestampMicrosecond;case ee.NANOSECOND:return re.TimestampNanosecond}return re.Timestamp;case re.Date:switch(t.unit){case te.DAY:return re.DateDay;case te.MILLISECOND:return re.DateMillisecond}return re.Date;case re.Interval:switch(t.unit){case ne.DAY_TIME:return re.IntervalDayTime;case ne.YEAR_MONTH:return re.IntervalYearMonth}return re.Interval;case re.Map:return re.Map;case re.List:return re.List;case re.Struct:return re.Struct;case re.Union:switch(t.mode){case Zt.Dense:return re.DenseUnion;case Zt.Sparse:return re.SparseUnion}return re.Union;case re.FixedSizeBinary:return re.FixedSizeBinary;case re.FixedSizeList:return re.FixedSizeList;case re.Dictionary:return re.Dictionary}throw new Error(`Unrecognized type '${re[t.typeId]}'`)}ui.prototype.visitInt8=null,ui.prototype.visitInt16=null,ui.prototype.visitInt32=null,ui.prototype.visitInt64=null,ui.prototype.visitUint8=null,ui.prototype.visitUint16=null,ui.prototype.visitUint32=null,ui.prototype.visitUint64=null,ui.prototype.visitFloat16=null,ui.prototype.visitFloat32=null,ui.prototype.visitFloat64=null,ui.prototype.visitDateDay=null,ui.prototype.visitDateMillisecond=null,ui.prototype.visitTimestampSecond=null,ui.prototype.visitTimestampMillisecond=null,ui.prototype.visitTimestampMicrosecond=null,ui.prototype.visitTimestampNanosecond=null,ui.prototype.visitTimeSecond=null,ui.prototype.visitTimeMillisecond=null,ui.prototype.visitTimeMicrosecond=null,ui.prototype.visitTimeNanosecond=null,ui.prototype.visitDenseUnion=null,ui.prototype.visitSparseUnion=null,ui.prototype.visitIntervalDayTime=null,ui.prototype.visitIntervalYearMonth=null;const pi=new Float64Array(1),fi=new Uint32Array(pi.buffer);function mi(t){const e=(31744&t)>>10,n=(1023&t)/1024,i=Math.pow(-1,(32768&t)>>15);switch(e){case 31:return i*(n?Number.NaN:1/0);case 0:return i*(n?6103515625e-14*n:0)}return i*Math.pow(2,e-15)*(1+n)}function yi(t){if(t!=t)return 32256;pi[0]=t;const e=(2147483648&fi[1])>>16&65535;let n=2146435072&fi[1],i=0;return n>=1089470464?fi[0]>0?n=31744:(n=(2080374784&n)>>16,i=(1048575&fi[1])>>10):n<=1056964608?(i=1048576+(1048575&fi[1]),i=1048576+(i<<(n>>20)-998)>>21,n=0):(n=n-1056964608>>10,i=512+(1048575&fi[1])>>10),e|n|65535&i}class gi extends ui{}function bi(t){return(e,n,i)=>{if(e.setValid(n,null!=i))return t(e,n,i)}}const vi=(t,e,n)=>{t[e]=Math.trunc(n%4294967296),t[e+1]=Math.trunc(n/4294967296)},_i=(t,e,n,i)=>{if(n+1<e.length){const{[n]:r,[n+1]:s}=e;t.set(i.subarray(0,s-r),r)}},wi=({values:t},e,n)=>{t[e]=n},xi=({values:t},e,n)=>{t[e]=n},Si=({values:t},e,n)=>{t[e]=yi(n)},Ii=({values:t},e,n)=>{((t,e,n)=>{t[e]=Math.trunc(n/864e5)})(t,e,n.valueOf())},Ai=({values:t},e,n)=>{vi(t,2*e,n.valueOf())},Ti=({stride:t,values:e},n,i)=>{e.set(i.subarray(0,t),t*n)},Ci=(t,e,n)=>{t.type.unit===te.DAY?Ii(t,e,n):Ai(t,e,n)},Ni=({values:t},e,n)=>vi(t,2*e,n/1e3),ki=({values:t},e,n)=>vi(t,2*e,n),Ei=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e3*n%4294967296),t[e+1]=Math.trunc(1e3*n/4294967296)})(t,2*e,n),Oi=({values:t},e,n)=>((t,e,n)=>{t[e]=Math.trunc(1e6*n%4294967296),t[e+1]=Math.trunc(1e6*n/4294967296)})(t,2*e,n),Mi=(t,e,n)=>{switch(t.type.unit){case ee.SECOND:return Ni(t,e,n);case ee.MILLISECOND:return ki(t,e,n);case ee.MICROSECOND:return Ei(t,e,n);case ee.NANOSECOND:return Oi(t,e,n)}},Di=({values:t},e,n)=>{t[e]=n},Bi=({values:t},e,n)=>{t[e]=n},Li=({values:t},e,n)=>{t[e]=n},Pi=({values:t},e,n)=>{t[e]=n},Fi=(t,e,n)=>{switch(t.type.unit){case ee.SECOND:return Di(t,e,n);case ee.MILLISECOND:return Bi(t,e,n);case ee.MICROSECOND:return Li(t,e,n);case ee.NANOSECOND:return Pi(t,e,n)}},Vi=({values:t,stride:e},n,i)=>{t.set(i.subarray(0,e),e*n)},Ui=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];Wi.visit(r,t.valueOffsets[e],n)},Ri=(t,e,n)=>{const i=t.type.typeIdToChildIndex[t.typeIds[e]],r=t.children[i];Wi.visit(r,e,n)},$i=(t,e,n)=>{t.type.unit===ne.DAY_TIME?ji(t,e,n):zi(t,e,n)},ji=({values:t},e,n)=>{t.set(n.subarray(0,2),2*e)},zi=({values:t},e,n)=>{t[e]=12*n[0]+n[1]%12};gi.prototype.visitBool=bi((({offset:t,values:e},n,i)=>{const r=t+n;i?e[r>>3]|=1<<r%8:e[r>>3]&=~(1<<r%8)})),gi.prototype.visitInt=bi(wi),gi.prototype.visitInt8=bi(wi),gi.prototype.visitInt16=bi(wi),gi.prototype.visitInt32=bi(wi),gi.prototype.visitInt64=bi(wi),gi.prototype.visitUint8=bi(wi),gi.prototype.visitUint16=bi(wi),gi.prototype.visitUint32=bi(wi),gi.prototype.visitUint64=bi(wi),gi.prototype.visitFloat=bi(((t,e,n)=>{switch(t.type.precision){case Xt.HALF:return Si(t,e,n);case Xt.SINGLE:case Xt.DOUBLE:return xi(t,e,n)}})),gi.prototype.visitFloat16=bi(Si),gi.prototype.visitFloat32=bi(xi),gi.prototype.visitFloat64=bi(xi),gi.prototype.visitUtf8=bi((({values:t,valueOffsets:e},n,i)=>{_i(t,e,n,ge(i))})),gi.prototype.visitBinary=bi((({values:t,valueOffsets:e},n,i)=>_i(t,e,n,i))),gi.prototype.visitFixedSizeBinary=bi(Ti),gi.prototype.visitDate=bi(Ci),gi.prototype.visitDateDay=bi(Ii),gi.prototype.visitDateMillisecond=bi(Ai),gi.prototype.visitTimestamp=bi(Mi),gi.prototype.visitTimestampSecond=bi(Ni),gi.prototype.visitTimestampMillisecond=bi(ki),gi.prototype.visitTimestampMicrosecond=bi(Ei),gi.prototype.visitTimestampNanosecond=bi(Oi),gi.prototype.visitTime=bi(Fi),gi.prototype.visitTimeSecond=bi(Di),gi.prototype.visitTimeMillisecond=bi(Bi),gi.prototype.visitTimeMicrosecond=bi(Li),gi.prototype.visitTimeNanosecond=bi(Pi),gi.prototype.visitDecimal=bi(Vi),gi.prototype.visitList=bi(((t,e,n)=>{const i=t.children[0],r=t.valueOffsets,s=Wi.getVisitFn(i);if(Array.isArray(n))for(let t=-1,a=r[e],o=r[e+1];a<o;)s(i,a++,n[++t]);else for(let t=-1,a=r[e],o=r[e+1];a<o;)s(i,a++,n.get(++t))})),gi.prototype.visitStruct=bi(((t,e,n)=>{const i=t.type.children.map((t=>Wi.getVisitFn(t.type))),r=n instanceof Map?(s=e,a=n,(t,e,n,i)=>e&&t(e,s,a.get(n.name))):n instanceof os?((t,e)=>(n,i,r,s)=>i&&n(i,t,e.get(s)))(e,n):Array.isArray(n)?((t,e)=>(n,i,r,s)=>i&&n(i,t,e[s]))(e,n):((t,e)=>(n,i,r,s)=>i&&n(i,t,e[r.name]))(e,n);var s,a;t.type.children.forEach(((e,n)=>r(i[n],t.children[n],e,n)))})),gi.prototype.visitUnion=bi(((t,e,n)=>{t.type.mode===Zt.Dense?Ui(t,e,n):Ri(t,e,n)})),gi.prototype.visitDenseUnion=bi(Ui),gi.prototype.visitSparseUnion=bi(Ri),gi.prototype.visitDictionary=bi(((t,e,n)=>{var i;null===(i=t.dictionary)||void 0===i||i.set(t.values[e],n)})),gi.prototype.visitInterval=bi($i),gi.prototype.visitIntervalDayTime=bi(ji),gi.prototype.visitIntervalYearMonth=bi(zi),gi.prototype.visitFixedSizeList=bi(((t,e,n)=>{const{stride:i}=t,r=t.children[0],s=Wi.getVisitFn(r);if(Array.isArray(n))for(let t=-1,a=e*i;++t<i;)s(r,a+t,n[t]);else for(let t=-1,a=e*i;++t<i;)s(r,a+t,n.get(t))})),gi.prototype.visitMap=bi(((t,e,n)=>{const i=t.children[0],{valueOffsets:r}=t,s=Wi.getVisitFn(i);let{[e]:a,[e+1]:o}=r;const l=n instanceof Map?n.entries():Object.entries(n);for(const t of l)if(s(i,a,t),++a>=o)break}));const Wi=new gi,Hi=Symbol.for("parent"),qi=Symbol.for("rowIndex");class Gi{constructor(t,e){return this[Hi]=t,this[qi]=e,new Proxy(this,new Ki)}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[qi],e=this[Hi],n=e.type.children,i={};for(let r=-1,s=n.length;++r<s;)i[n[r].name]=gr.visit(e.children[r],t);return i}toString(){return`{${[...this].map((([t,e])=>`${le(t)}: ${le(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}[Symbol.iterator](){return new Yi(this[Hi],this[qi])}}class Yi{constructor(t,e){this.childIndex=0,this.children=t.children,this.rowIndex=e,this.childFields=t.type.children,this.numChildren=this.childFields.length}[Symbol.iterator](){return this}next(){const t=this.childIndex;return t<this.numChildren?(this.childIndex=t+1,{done:!1,value:[this.childFields[t].name,gr.visit(this.children[t],this.rowIndex)]}):{done:!0,value:null}}}Object.defineProperties(Gi.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[Hi]:{writable:!0,enumerable:!1,configurable:!1,value:null},[qi]:{writable:!0,enumerable:!1,configurable:!1,value:-1}});class Ki{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[Hi].type.children.map((t=>t.name))}has(t,e){return-1!==t[Hi].type.children.findIndex((t=>t.name===e))}getOwnPropertyDescriptor(t,e){if(-1!==t[Hi].type.children.findIndex((t=>t.name===e)))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[Hi].type.children.findIndex((t=>t.name===e));if(-1!==n){const i=gr.visit(t[Hi].children[n],t[qi]);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[Hi].type.children.findIndex((t=>t.name===e));return-1!==i?(Wi.visit(t[Hi].children[i],t[qi],n),Reflect.set(t,e,n)):!(!Reflect.has(t,e)&&"symbol"!=typeof e)&&Reflect.set(t,e,n)}}class Ji extends ui{}function Qi(t){return(e,n)=>e.getValid(n)?t(e,n):null}const Zi=(t,e)=>4294967296*t[e+1]+(t[e]>>>0),Xi=t=>new Date(t),tr=(t,e,n)=>{if(n+1>=e.length)return null;const i=e[n],r=e[n+1];return t.subarray(i,r)},er=({values:t},e)=>((t,e)=>Xi(((t,e)=>864e5*t[e])(t,e)))(t,e),nr=({values:t},e)=>((t,e)=>Xi(Zi(t,e)))(t,2*e),ir=({stride:t,values:e},n)=>e[t*n],rr=({values:t},e)=>t[e],sr=({values:t},e)=>1e3*Zi(t,2*e),ar=({values:t},e)=>Zi(t,2*e),or=({values:t},e)=>((t,e)=>t[e+1]/1e3*4294967296+(t[e]>>>0)/1e3)(t,2*e),lr=({values:t},e)=>((t,e)=>t[e+1]/1e6*4294967296+(t[e]>>>0)/1e6)(t,2*e),cr=({values:t},e)=>t[e],ur=({values:t},e)=>t[e],hr=({values:t},e)=>t[e],dr=({values:t},e)=>t[e],pr=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return gr.visit(i,t.valueOffsets[e])},fr=(t,e)=>{const n=t.type.typeIdToChildIndex[t.typeIds[e]],i=t.children[n];return gr.visit(i,e)},mr=({values:t},e)=>t.subarray(2*e,2*(e+1)),yr=({values:t},e)=>{const n=t[e],i=new Int32Array(2);return i[0]=Math.trunc(n/12),i[1]=Math.trunc(n%12),i};Ji.prototype.visitNull=Qi(((t,e)=>null)),Ji.prototype.visitBool=Qi((({offset:t,values:e},n)=>{const i=t+n;return 0!=(e[i>>3]&1<<i%8)})),Ji.prototype.visitInt=Qi((({values:t},e)=>t[e])),Ji.prototype.visitInt8=Qi(ir),Ji.prototype.visitInt16=Qi(ir),Ji.prototype.visitInt32=Qi(ir),Ji.prototype.visitInt64=Qi(rr),Ji.prototype.visitUint8=Qi(ir),Ji.prototype.visitUint16=Qi(ir),Ji.prototype.visitUint32=Qi(ir),Ji.prototype.visitUint64=Qi(rr),Ji.prototype.visitFloat=Qi((({type:t,values:e},n)=>t.precision!==Xt.HALF?e[n]:mi(e[n]))),Ji.prototype.visitFloat16=Qi((({stride:t,values:e},n)=>mi(e[t*n]))),Ji.prototype.visitFloat32=Qi(ir),Ji.prototype.visitFloat64=Qi(ir),Ji.prototype.visitUtf8=Qi((({values:t,valueOffsets:e},n)=>{const i=tr(t,e,n);return null!==i?me(i):null})),Ji.prototype.visitBinary=Qi((({values:t,valueOffsets:e},n)=>tr(t,e,n))),Ji.prototype.visitFixedSizeBinary=Qi((({stride:t,values:e},n)=>e.subarray(t*n,t*(n+1)))),Ji.prototype.visitDate=Qi(((t,e)=>t.type.unit===te.DAY?er(t,e):nr(t,e))),Ji.prototype.visitDateDay=Qi(er),Ji.prototype.visitDateMillisecond=Qi(nr),Ji.prototype.visitTimestamp=Qi(((t,e)=>{switch(t.type.unit){case ee.SECOND:return sr(t,e);case ee.MILLISECOND:return ar(t,e);case ee.MICROSECOND:return or(t,e);case ee.NANOSECOND:return lr(t,e)}})),Ji.prototype.visitTimestampSecond=Qi(sr),Ji.prototype.visitTimestampMillisecond=Qi(ar),Ji.prototype.visitTimestampMicrosecond=Qi(or),Ji.prototype.visitTimestampNanosecond=Qi(lr),Ji.prototype.visitTime=Qi(((t,e)=>{switch(t.type.unit){case ee.SECOND:return cr(t,e);case ee.MILLISECOND:return ur(t,e);case ee.MICROSECOND:return hr(t,e);case ee.NANOSECOND:return dr(t,e)}})),Ji.prototype.visitTimeSecond=Qi(cr),Ji.prototype.visitTimeMillisecond=Qi(ur),Ji.prototype.visitTimeMicrosecond=Qi(hr),Ji.prototype.visitTimeNanosecond=Qi(dr),Ji.prototype.visitDecimal=Qi((({values:t,stride:e},n)=>nn.decimal(t.subarray(e*n,e*(n+1))))),Ji.prototype.visitList=Qi(((t,e)=>{const{valueOffsets:n,stride:i,children:r}=t,{[e*i]:s,[e*i+1]:a}=n,o=r[0].slice(s,a-s);return new os([o])})),Ji.prototype.visitStruct=Qi(((t,e)=>new Gi(t,e))),Ji.prototype.visitUnion=Qi(((t,e)=>t.type.mode===Zt.Dense?pr(t,e):fr(t,e))),Ji.prototype.visitDenseUnion=Qi(pr),Ji.prototype.visitSparseUnion=Qi(fr),Ji.prototype.visitDictionary=Qi(((t,e)=>{var n;return null===(n=t.dictionary)||void 0===n?void 0:n.get(t.values[e])})),Ji.prototype.visitInterval=Qi(((t,e)=>t.type.unit===ne.DAY_TIME?mr(t,e):yr(t,e))),Ji.prototype.visitIntervalDayTime=Qi(mr),Ji.prototype.visitIntervalYearMonth=Qi(yr),Ji.prototype.visitFixedSizeList=Qi(((t,e)=>{const{stride:n,children:i}=t,r=i[0].slice(e*n,n);return new os([r])})),Ji.prototype.visitMap=Qi(((t,e)=>{const{valueOffsets:n,children:i}=t,{[e]:r,[e+1]:s}=n,a=i[0];return new _r(a.slice(r,s-r))}));const gr=new Ji,br=Symbol.for("keys"),vr=Symbol.for("vals");class _r{constructor(t){return this[br]=new os([t.children[0]]).memoize(),this[vr]=t.children[1],new Proxy(this,new xr)}[Symbol.iterator](){return new wr(this[br],this[vr])}get size(){return this[br].length}toArray(){return Object.values(this.toJSON())}toJSON(){const t=this[br],e=this[vr],n={};for(let i=-1,r=t.length;++i<r;)n[t.get(i)]=gr.visit(e,i);return n}toString(){return`{${[...this].map((([t,e])=>`${le(t)}: ${le(e)}`)).join(", ")}}`}[Symbol.for("nodejs.util.inspect.custom")](){return this.toString()}}class wr{constructor(t,e){this.keys=t,this.vals=e,this.keyIndex=0,this.numKeys=t.length}[Symbol.iterator](){return this}next(){const t=this.keyIndex;return t===this.numKeys?{done:!0,value:null}:(this.keyIndex++,{done:!1,value:[this.keys.get(t),gr.visit(this.vals,t)]})}}class xr{isExtensible(){return!1}deleteProperty(){return!1}preventExtensions(){return!0}ownKeys(t){return t[br].toArray().map(String)}has(t,e){return t[br].includes(e)}getOwnPropertyDescriptor(t,e){if(-1!==t[br].indexOf(e))return{writable:!0,enumerable:!0,configurable:!0}}get(t,e){if(Reflect.has(t,e))return t[e];const n=t[br].indexOf(e);if(-1!==n){const i=gr.visit(Reflect.get(t,vr),n);return Reflect.set(t,e,i),i}}set(t,e,n){const i=t[br].indexOf(e);return-1!==i?(Wi.visit(Reflect.get(t,vr),i,n),Reflect.set(t,e,n)):!!Reflect.has(t,e)&&Reflect.set(t,e,n)}}let Sr;function Ir(t,e,n,i){const{length:r=0}=t;let s="number"!=typeof e?0:e,a="number"!=typeof n?r:n;return s<0&&(s=(s%r+r)%r),a<0&&(a=(a%r+r)%r),a<s&&(Sr=s,s=a,a=Sr),a>r&&(a=r),i?i(t,s,a):[s,a]}Object.defineProperties(_r.prototype,{[Symbol.toStringTag]:{enumerable:!1,configurable:!1,value:"Row"},[br]:{writable:!0,enumerable:!1,configurable:!1,value:null},[vr]:{writable:!0,enumerable:!1,configurable:!1,value:null}});const Ar=t=>t!=t;function Tr(t){if("object"!=typeof t||null===t)return Ar(t)?Ar:e=>e===t;if(t instanceof Date){const e=t.valueOf();return t=>t instanceof Date&&t.valueOf()===e}return ArrayBuffer.isView(t)?e=>!!e&&function(t,e){let n=0;const i=t.length;if(i!==e.length)return!1;if(i>0)do{if(t[n]!==e[n])return!1}while(++n<i);return!0}(t,e):t instanceof Map?function(t){let e=-1;const n=[];for(const i of t.values())n[++e]=Tr(i);return Cr(n)}(t):Array.isArray(t)?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Tr(t[n]);return Cr(e)}(t):t instanceof os?function(t){const e=[];for(let n=-1,i=t.length;++n<i;)e[n]=Tr(t.get(n));return Cr(e)}(t):function(t,e=!1){const n=Object.keys(t);if(!e&&0===n.length)return()=>!1;const i=[];for(let e=-1,r=n.length;++e<r;)i[e]=Tr(t[n[e]]);return Cr(i,n)}(t,!0)}function Cr(t,e){return n=>{if(!n||"object"!=typeof n)return!1;switch(n.constructor){case Array:return function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e[i]))return!1;return!0}(t,n);case Map:return Nr(t,n,n.keys());case _r:case Gi:case Object:case void 0:return Nr(t,n,e||Object.keys(n))}return n instanceof os&&function(t,e){const n=t.length;if(e.length!==n)return!1;for(let i=-1;++i<n;)if(!t[i](e.get(i)))return!1;return!0}(t,n)}}function Nr(t,e,n){const i=n[Symbol.iterator](),r=e instanceof Map?e.keys():Object.keys(e)[Symbol.iterator](),s=e instanceof Map?e.values():Object.values(e)[Symbol.iterator]();let a=0;const o=t.length;let l=s.next(),c=i.next(),u=r.next();for(;a<o&&!c.done&&!u.done&&!l.done&&c.value===u.value&&t[a](l.value);++a,c=i.next(),u=r.next(),l=s.next());return!!(a===o&&c.done&&u.done&&l.done)||(i.return&&i.return(),r.return&&r.return(),s.return&&s.return(),!1)}class kr{constructor(t=0,e){this.numChunks=t,this.getChunkIterator=e,this.chunkIndex=0,this.chunkIterator=this.getChunkIterator(0)}next(){for(;this.chunkIndex<this.numChunks;){const t=this.chunkIterator.next();if(!t.done)return t;++this.chunkIndex<this.numChunks&&(this.chunkIterator=this.getChunkIterator(this.chunkIndex))}return{done:!0,value:null}}[Symbol.iterator](){return this}}function Er(t){return t.reduce(((t,e)=>t+e.nullCount),0)}function Or(t){return t.reduce(((t,e,n)=>(t[n+1]=t[n]+e.length,t)),new Uint32Array(t.length+1))}function Mr(t,e,n,i){const r=[];for(let s=-1,a=t.length;++s<a;){const a=t[s],o=e[s],{length:l}=a;if(o>=i)break;if(n>=o+l)continue;if(o>=n&&o+l<=i){r.push(a);continue}const c=Math.max(0,n-o),u=Math.min(i-o,l);r.push(a.slice(c,u-c))}return 0===r.length&&r.push(t[0].slice(0,0)),r}function Dr(t,e,n,i){let r=0,s=0,a=e.length-1;do{if(r>=a-1)return n<e[a]?i(t,r,n-e[r]):null;s=r+Math.trunc(.5*(a-r)),n<e[s]?a=s:r=s}while(r<a)}function Br(t,e){return t.getValid(e)}function Lr(t){function e(e,n,i){return t(e[n],i)}return function(t){return Dr(this.data,this._offsets,t,e)}}function Pr(t){let e;function n(n,i,r){return t(n[i],r,e)}return function(t,i){const r=this.data;e=i;const s=Dr(r,this._offsets,t,n);return e=void 0,s}}function Fr(t){let e;function n(n,i,r){let s=r,a=0,o=0;for(let r=i-1,l=n.length;++r<l;){const i=n[r];if(~(a=t(i,e,s)))return o+a;s=0,o+=i.length}return-1}return function(t,i){e=t;const r=this.data,s="number"!=typeof i?n(r,0,0):Dr(r,this._offsets,i,n);return e=void 0,s}}function Vr(t,e,n,i){return 0!=(n&1<<i)}function Ur(t,e,n,i){return(n&1<<i)>>i}function Rr(t,e,n){const i=n.byteLength+7&-8;if(t>0||n.byteLength<i){const r=new Uint8Array(i);return r.set(t%8==0?n.subarray(t>>3):$r(new jr(n,t,e,null,Vr)).subarray(0,i)),r}return n}function $r(t){const e=[];let n=0,i=0,r=0;for(const s of t)s&&(r|=1<<i),8==++i&&(e[n++]=r,r=i=0);(0===n||i>0)&&(e[n++]=r);const s=new Uint8Array(e.length+7&-8);return s.set(e),s}class jr{constructor(t,e,n,i,r){this.bytes=t,this.length=n,this.context=i,this.get=r,this.bit=e%8,this.byteIndex=e>>3,this.byte=t[this.byteIndex++],this.index=0}next(){return this.index<this.length?(8===this.bit&&(this.bit=0,this.byte=this.bytes[this.byteIndex++]),{value:this.get(this.context,this.index++,this.byte,this.bit++)}):{done:!0,value:null}}[Symbol.iterator](){return this}}function zr(t,e,n){if(n-e<=0)return 0;if(n-e<8){let i=0;for(const r of new jr(t,e,n-e,t,Ur))i+=r;return i}const i=n>>3<<3,r=e+(e%8==0?0:8-e%8);return zr(t,e,r)+zr(t,i,n)+function(t,e,n){let i=0,r=Math.trunc(e);const s=new DataView(t.buffer,t.byteOffset,t.byteLength),a=void 0===n?t.byteLength:r+n;for(;a-r>=4;)i+=Wr(s.getUint32(r)),r+=4;for(;a-r>=2;)i+=Wr(s.getUint16(r)),r+=2;for(;a-r>=1;)i+=Wr(s.getUint8(r)),r+=1;return i}(t,r>>3,i-r>>3)}function Wr(t){let e=Math.trunc(t);return e-=e>>>1&1431655765,e=(858993459&e)+(e>>>2&858993459),16843009*(e+(e>>>4)&252645135)>>>24}class Hr extends ui{}function qr(t,e,n){if(void 0===e)return-1;if(null===e)return function(t,e){const{nullBitmap:n}=t;if(!n||t.nullCount<=0)return-1;let i=0;for(const r of new jr(n,t.offset+(e||0),t.length,n,Vr)){if(!r)return i;++i}return-1}(t,n);const i=gr.getVisitFn(t),r=Tr(e);for(let e=(n||0)-1,s=t.length;++e<s;)if(r(i(t,e)))return e;return-1}function Gr(t,e,n){const i=gr.getVisitFn(t),r=Tr(e);for(let e=(n||0)-1,s=t.length;++e<s;)if(r(i(t,e)))return e;return-1}Hr.prototype.visitNull=function(t,e){return null===e&&t.length>0?0:-1},Hr.prototype.visitBool=qr,Hr.prototype.visitInt=qr,Hr.prototype.visitInt8=qr,Hr.prototype.visitInt16=qr,Hr.prototype.visitInt32=qr,Hr.prototype.visitInt64=qr,Hr.prototype.visitUint8=qr,Hr.prototype.visitUint16=qr,Hr.prototype.visitUint32=qr,Hr.prototype.visitUint64=qr,Hr.prototype.visitFloat=qr,Hr.prototype.visitFloat16=qr,Hr.prototype.visitFloat32=qr,Hr.prototype.visitFloat64=qr,Hr.prototype.visitUtf8=qr,Hr.prototype.visitBinary=qr,Hr.prototype.visitFixedSizeBinary=qr,Hr.prototype.visitDate=qr,Hr.prototype.visitDateDay=qr,Hr.prototype.visitDateMillisecond=qr,Hr.prototype.visitTimestamp=qr,Hr.prototype.visitTimestampSecond=qr,Hr.prototype.visitTimestampMillisecond=qr,Hr.prototype.visitTimestampMicrosecond=qr,Hr.prototype.visitTimestampNanosecond=qr,Hr.prototype.visitTime=qr,Hr.prototype.visitTimeSecond=qr,Hr.prototype.visitTimeMillisecond=qr,Hr.prototype.visitTimeMicrosecond=qr,Hr.prototype.visitTimeNanosecond=qr,Hr.prototype.visitDecimal=qr,Hr.prototype.visitList=qr,Hr.prototype.visitStruct=qr,Hr.prototype.visitUnion=qr,Hr.prototype.visitDenseUnion=Gr,Hr.prototype.visitSparseUnion=Gr,Hr.prototype.visitDictionary=qr,Hr.prototype.visitInterval=qr,Hr.prototype.visitIntervalDayTime=qr,Hr.prototype.visitIntervalYearMonth=qr,Hr.prototype.visitFixedSizeList=qr,Hr.prototype.visitMap=qr;const Yr=new Hr;class Kr extends ui{}function Jr(t){const{type:e}=t;if(0===t.nullCount&&1===t.stride&&(e.typeId===re.Timestamp||e instanceof An&&64!==e.bitWidth||e instanceof Hn&&64!==e.bitWidth||e instanceof Bn&&e.precision!==Xt.HALF))return new kr(t.data.length,(e=>{const n=t.data[e];return n.values.subarray(0,n.length)[Symbol.iterator]()}));let n=0;return new kr(t.data.length,(e=>{const i=t.data[e].length,r=t.slice(n,n+i);return n+=i,new Qr(r)}))}class Qr{constructor(t){this.vector=t,this.index=0}next(){return this.index<this.vector.length?{value:this.vector.get(this.index++)}:{done:!0,value:null}}[Symbol.iterator](){return this}}Kr.prototype.visitNull=Jr,Kr.prototype.visitBool=Jr,Kr.prototype.visitInt=Jr,Kr.prototype.visitInt8=Jr,Kr.prototype.visitInt16=Jr,Kr.prototype.visitInt32=Jr,Kr.prototype.visitInt64=Jr,Kr.prototype.visitUint8=Jr,Kr.prototype.visitUint16=Jr,Kr.prototype.visitUint32=Jr,Kr.prototype.visitUint64=Jr,Kr.prototype.visitFloat=Jr,Kr.prototype.visitFloat16=Jr,Kr.prototype.visitFloat32=Jr,Kr.prototype.visitFloat64=Jr,Kr.prototype.visitUtf8=Jr,Kr.prototype.visitBinary=Jr,Kr.prototype.visitFixedSizeBinary=Jr,Kr.prototype.visitDate=Jr,Kr.prototype.visitDateDay=Jr,Kr.prototype.visitDateMillisecond=Jr,Kr.prototype.visitTimestamp=Jr,Kr.prototype.visitTimestampSecond=Jr,Kr.prototype.visitTimestampMillisecond=Jr,Kr.prototype.visitTimestampMicrosecond=Jr,Kr.prototype.visitTimestampNanosecond=Jr,Kr.prototype.visitTime=Jr,Kr.prototype.visitTimeSecond=Jr,Kr.prototype.visitTimeMillisecond=Jr,Kr.prototype.visitTimeMicrosecond=Jr,Kr.prototype.visitTimeNanosecond=Jr,Kr.prototype.visitDecimal=Jr,Kr.prototype.visitList=Jr,Kr.prototype.visitStruct=Jr,Kr.prototype.visitUnion=Jr,Kr.prototype.visitDenseUnion=Jr,Kr.prototype.visitSparseUnion=Jr,Kr.prototype.visitDictionary=Jr,Kr.prototype.visitInterval=Jr,Kr.prototype.visitIntervalDayTime=Jr,Kr.prototype.visitIntervalYearMonth=Jr,Kr.prototype.visitFixedSizeList=Jr,Kr.prototype.visitMap=Jr;const Zr=new Kr,Xr=(t,e)=>t+e;class ts extends ui{visitNull(t,e){return 0}visitInt(t,e){return t.type.bitWidth/8}visitFloat(t,e){return t.type.ArrayType.BYTES_PER_ELEMENT}visitBool(t,e){return 1/8}visitDecimal(t,e){return t.type.bitWidth/8}visitDate(t,e){return 4*(t.type.unit+1)}visitTime(t,e){return t.type.bitWidth/8}visitTimestamp(t,e){return t.type.unit===ee.SECOND?4:8}visitInterval(t,e){return 4*(t.type.unit+1)}visitStruct(t,e){return t.children.reduce(((t,n)=>t+is.visit(n,e)),0)}visitFixedSizeBinary(t,e){return t.type.byteWidth}visitMap(t,e){return 8+t.children.reduce(((t,n)=>t+is.visit(n,e)),0)}visitDictionary(t,e){var n;return t.type.indices.bitWidth/8+((null===(n=t.dictionary)||void 0===n?void 0:n.getByteLength(t.values[e]))||0)}}const es=({type:t,children:e,typeIds:n,valueOffsets:i},r)=>{const s=t.typeIdToChildIndex[n[r]];return 8+is.visit(e[s],i[r])},ns=({children:t},e)=>4+is.visitMany(t,t.map((()=>e))).reduce(Xr,0);ts.prototype.visitUtf8=({valueOffsets:t},e)=>t[e+1]-t[e]+8,ts.prototype.visitBinary=({valueOffsets:t},e)=>t[e+1]-t[e]+8,ts.prototype.visitList=({valueOffsets:t,stride:e,children:n},i)=>{const r=n[0],{[i*e]:s}=t,{[i*e+1]:a}=t,o=is.getVisitFn(r.type),l=r.slice(s,a-s);let c=8;for(let t=-1,e=a-s;++t<e;)c+=o(l,t);return c},ts.prototype.visitFixedSizeList=({stride:t,children:e},n)=>{const i=e[0],r=i.slice(n*t,t),s=is.getVisitFn(i.type);let a=0;for(let t=-1,e=r.length;++t<e;)a+=s(r,t);return a},ts.prototype.visitUnion=(t,e)=>t.type.mode===Zt.Dense?es(t,e):ns(t,e),ts.prototype.visitDenseUnion=es,ts.prototype.visitSparseUnion=ns;const is=new ts;var rs;const ss={},as={};class os{constructor(t){var e,n,i;const r=t[0]instanceof os?t.flatMap((t=>t.data)):t;if(0===r.length||r.some((t=>!(t instanceof cs))))throw new TypeError("Vector constructor expects an Array of Data instances.");const s=null===(e=r[0])||void 0===e?void 0:e.type;switch(r.length){case 0:this._offsets=[0];break;case 1:{const{get:t,set:e,indexOf:n,byteLength:i}=ss[s.typeId],a=r[0];this.isValid=t=>Br(a,t),this.get=e=>t(a,e),this.set=(t,n)=>e(a,t,n),this.indexOf=t=>n(a,t),this.getByteLength=t=>i(a,t),this._offsets=[0,a.length];break}default:Object.setPrototypeOf(this,as[s.typeId]),this._offsets=Or(r)}this.data=r,this.type=s,this.stride=ci(s),this.numChildren=null!==(i=null===(n=s.children)||void 0===n?void 0:n.length)&&void 0!==i?i:0,this.length=this._offsets[this._offsets.length-1]}get byteLength(){return-1===this._byteLength&&(this._byteLength=this.data.reduce(((t,e)=>t+e.byteLength),0)),this._byteLength}get nullCount(){return-1===this._nullCount&&(this._nullCount=Er(this.data)),this._nullCount}get ArrayType(){return this.type.ArrayType}get[Symbol.toStringTag](){return`${this.VectorName}<${this.type[Symbol.toStringTag]}>`}get VectorName(){return`${re[this.type.typeId]}Vector`}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}includes(t,e){return this.indexOf(t,e)>0}getByteLength(t){return 0}[Symbol.iterator](){return Zr.visit(this)}concat(...t){return new os(this.data.concat(t.flatMap((t=>t.data)).flat(Number.POSITIVE_INFINITY)))}slice(t,e){return new os(Ir(this,t,e,(({data:t,_offsets:e},n,i)=>Mr(t,e,n,i))))}toJSON(){return[...this]}toArray(){const{type:t,data:e,length:n,stride:i,ArrayType:r}=this;switch(t.typeId){case re.Int:case re.Float:case re.Decimal:case re.Time:case re.Timestamp:switch(e.length){case 0:return new r;case 1:return e[0].values.subarray(0,n*i);default:return e.reduce(((t,{values:e})=>(t.array.set(e,t.offset),t.offset+=e.length,t)),{array:new r(n*i),offset:0}).array}}return[...this]}toString(){return`[${[...this].join(",")}]`}getChild(t){var e;return this.getChildAt(null===(e=this.type.children)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.numChildren?new os(this.data.map((({children:e})=>e[t]))):null}get isMemoized(){return!!Sn.isDictionary(this.type)&&this.data[0].dictionary.isMemoized}memoize(){if(Sn.isDictionary(this.type)){const t=new ls(this.data[0].dictionary),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new os(e)}return new ls(this)}unmemoize(){if(Sn.isDictionary(this.type)&&this.isMemoized){const t=this.data[0].dictionary.unmemoize(),e=this.data.map((e=>{const n=e.clone();return n.dictionary=t,n}));return new os(e)}return this}}rs=Symbol.toStringTag,os[rs]=(t=>{t.type=Sn.prototype,t.data=[],t.length=0,t.stride=1,t.numChildren=0,t._nullCount=-1,t._byteLength=-1,t._offsets=new Uint32Array([0]),t[Symbol.isConcatSpreadable]=!0;const e=Object.keys(re).map((t=>re[t])).filter((t=>"number"==typeof t&&t!==re.NONE));for(const n of e){const e=gr.getVisitFnByTypeId(n),i=Wi.getVisitFnByTypeId(n),r=Yr.getVisitFnByTypeId(n),s=is.getVisitFnByTypeId(n);ss[n]={get:e,set:i,indexOf:r,byteLength:s},as[n]=Object.create(t,{isValid:{value:Lr(Br)},get:{value:Lr(gr.getVisitFnByTypeId(n))},set:{value:Pr(Wi.getVisitFnByTypeId(n))},indexOf:{value:Fr(Yr.getVisitFnByTypeId(n))},getByteLength:{value:Lr(is.getVisitFnByTypeId(n))}})}return"Vector"})(os.prototype);class ls extends os{constructor(t){super(t.data);const e=this.get,n=this.set,i=this.slice,r=new Array(this.length);Object.defineProperty(this,"get",{value(t){const n=r[t];if(void 0!==n)return n;const i=e.call(this,t);return r[t]=i,i}}),Object.defineProperty(this,"set",{value(t,e){n.call(this,t,e),r[t]=e}}),Object.defineProperty(this,"slice",{value:(t,e)=>new ls(i.call(this,t,e))}),Object.defineProperty(this,"isMemoized",{value:!0}),Object.defineProperty(this,"unmemoize",{value:()=>new os(this.data)}),Object.defineProperty(this,"memoize",{value:()=>this})}}class cs{constructor(t,e,n,i,r,s=[],a){let o;this.type=t,this.children=s,this.dictionary=a,this.offset=Math.floor(Math.max(e||0,0)),this.length=Math.floor(Math.max(n||0,0)),this._nullCount=Math.floor(Math.max(i||0,-1)),r instanceof cs?(this.stride=r.stride,this.values=r.values,this.typeIds=r.typeIds,this.nullBitmap=r.nullBitmap,this.valueOffsets=r.valueOffsets):(this.stride=ci(t),r&&((o=r[0])&&(this.valueOffsets=o),(o=r[1])&&(this.values=o),(o=r[2])&&(this.nullBitmap=o),(o=r[3])&&(this.typeIds=o))),this.nullable=0!==this._nullCount&&this.nullBitmap&&this.nullBitmap.byteLength>0}get typeId(){return this.type.typeId}get ArrayType(){return this.type.ArrayType}get buffers(){return[this.valueOffsets,this.values,this.nullBitmap,this.typeIds]}get byteLength(){let t=0;const{valueOffsets:e,values:n,nullBitmap:i,typeIds:r}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),this.children.reduce(((t,e)=>t+e.byteLength),t)}get nullCount(){let t,e=this._nullCount;return e<=-1&&(t=this.nullBitmap)&&(this._nullCount=e=this.length-zr(t,this.offset,this.offset+this.length)),e}getValid(t){if(this.nullable&&this.nullCount>0){const e=this.offset+t;return 0!=(this.nullBitmap[e>>3]&1<<e%8)}return!0}setValid(t,e){if(!this.nullable)return e;if(!this.nullBitmap||this.nullBitmap.byteLength<=t>>3){const{nullBitmap:t}=this._changeLengthAndBackfillNullBitmap(this.length);Object.assign(this,{nullBitmap:t,_nullCount:0})}const{nullBitmap:n,offset:i}=this,r=i+t>>3,s=(i+t)%8,a=n[r]>>s&1;return e?0===a&&(n[r]|=1<<s,this._nullCount=this.nullCount+1):1===a&&(n[r]&=~(1<<s),this._nullCount=this.nullCount-1),e}clone(t=this.type,e=this.offset,n=this.length,i=this._nullCount,r=this,s=this.children){return new cs(t,e,n,i,r,s,this.dictionary)}slice(t,e){const{stride:n,typeId:i,children:r}=this,s=+(0===this._nullCount)-1,a=16===i?n:1,o=this._sliceBuffers(t,e,n,i);return this.clone(this.type,this.offset+t,e,s,o,0===r.length||this.valueOffsets?r:this._sliceChildren(r,a*t,a*e))}_changeLengthAndBackfillNullBitmap(t){if(this.typeId===re.Null)return this.clone(this.type,0,t,0);const{length:e,nullCount:n}=this,i=new Uint8Array((t+63&-64)>>3).fill(255,0,e>>3);i[e>>3]=(1<<e-(-8&e))-1,n>0&&i.set(Rr(this.offset,e,this.nullBitmap),0);const r=this.buffers;return r[se.VALIDITY]=i,this.clone(this.type,0,t,n+(t-e),r)}_sliceBuffers(t,e,n,i){let r;const{buffers:s}=this;return(r=s[se.TYPE])&&(s[se.TYPE]=r.subarray(t,t+e)),(r=s[se.OFFSET])&&(s[se.OFFSET]=r.subarray(t,t+e+1))||(r=s[se.DATA])&&(s[se.DATA]=6===i?r:r.subarray(n*t,n*(t+e))),s}_sliceChildren(t,e,n){return t.map((t=>t.slice(e,n)))}}cs.prototype.children=Object.freeze([]);class us extends ui{visit(t){return this.getVisitFn(t.type).call(this,t)}visitNull(t){const{type:e,offset:n=0,length:i=0}=t;return new cs(e,n,i,0)}visitBool(t){const{type:e,offset:n=0}=t,i=je(t.nullBitmap),r=Re(e.ArrayType,t.data),{length:s=r.length>>3,nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,r,i])}visitInt(t){const{type:e,offset:n=0}=t,i=je(t.nullBitmap),r=Re(e.ArrayType,t.data),{length:s=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,r,i])}visitFloat(t){const{type:e,offset:n=0}=t,i=je(t.nullBitmap),r=Re(e.ArrayType,t.data),{length:s=r.length,nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,r,i])}visitUtf8(t){const{type:e,offset:n=0}=t,i=je(t.data),r=je(t.nullBitmap),s=$e(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new cs(e,n,a,o,[s,i,r])}visitBinary(t){const{type:e,offset:n=0}=t,i=je(t.data),r=je(t.nullBitmap),s=$e(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new cs(e,n,a,o,[s,i,r])}visitFixedSizeBinary(t){const{type:e,offset:n=0}=t,i=je(t.nullBitmap),r=Re(e.ArrayType,t.data),{length:s=r.length/ci(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,r,i])}visitDate(t){const{type:e,offset:n=0}=t,i=je(t.nullBitmap),r=Re(e.ArrayType,t.data),{length:s=r.length/ci(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,r,i])}visitTimestamp(t){const{type:e,offset:n=0}=t,i=je(t.nullBitmap),r=Re(e.ArrayType,t.data),{length:s=r.length/ci(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,r,i])}visitTime(t){const{type:e,offset:n=0}=t,i=je(t.nullBitmap),r=Re(e.ArrayType,t.data),{length:s=r.length/ci(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,r,i])}visitDecimal(t){const{type:e,offset:n=0}=t,i=je(t.nullBitmap),r=Re(e.ArrayType,t.data),{length:s=r.length/ci(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,r,i])}visitList(t){const{type:e,offset:n=0,child:i}=t,r=je(t.nullBitmap),s=$e(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new cs(e,n,a,o,[s,void 0,r],[i])}visitStruct(t){const{type:e,offset:n=0,children:i=[]}=t,r=je(t.nullBitmap),{length:s=i.reduce(((t,{length:e})=>Math.max(t,e)),0),nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,void 0,r],i)}visitUnion(t){const{type:e,offset:n=0,children:i=[]}=t,r=je(t.nullBitmap),s=Re(e.ArrayType,t.typeIds),{length:a=s.length,nullCount:o=(t.nullBitmap?-1:0)}=t;if(Sn.isSparseUnion(e))return new cs(e,n,a,o,[void 0,void 0,r,s],i);const l=$e(t.valueOffsets);return new cs(e,n,a,o,[l,void 0,r,s],i)}visitDictionary(t){const{type:e,offset:n=0}=t,i=je(t.nullBitmap),r=Re(e.indices.ArrayType,t.data),{dictionary:s=new os([(new us).visit({type:e.dictionary})])}=t,{length:a=r.length,nullCount:o=(t.nullBitmap?-1:0)}=t;return new cs(e,n,a,o,[void 0,r,i],[],s)}visitInterval(t){const{type:e,offset:n=0}=t,i=je(t.nullBitmap),r=Re(e.ArrayType,t.data),{length:s=r.length/ci(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,r,i])}visitFixedSizeList(t){const{type:e,offset:n=0,child:i=(new us).visit({type:e.valueType})}=t,r=je(t.nullBitmap),{length:s=i.length/ci(e),nullCount:a=(t.nullBitmap?-1:0)}=t;return new cs(e,n,s,a,[void 0,void 0,r],[i])}visitMap(t){const{type:e,offset:n=0,child:i=(new us).visit({type:e.childType})}=t,r=je(t.nullBitmap),s=$e(t.valueOffsets),{length:a=s.length-1,nullCount:o=(t.nullBitmap?-1:0)}=t;return new cs(e,n,a,o,[s,void 0,r],[i])}}function hs(t){return(new us).visit(t)}function ds(t,e=1){return(t*e+63&-64||64)/e}function ps(t,e,n=t.BYTES_PER_ELEMENT){return new t(ds(e,n))}function fs(t){return t instanceof cs?t:new cs(t.type,0,t.length,t.nulls,t.buffers,null,t.dict)}const ms=new TextEncoder,ys=ms.encodeInto?function(t,e,n){return ms.encodeInto(n,t.subarray(e)).written}:function(t,e,n){const i=ms.encode(n);return t.set(i,e),i.length};function gs(t,e){const n=ps(t.ArrayType,e);return{set(t,e){n[e]=t},data:()=>({type:t,length:e,buffers:[null,n]})}}function bs(t,e){const n=ps(t.ArrayType,e/8);return{set(t,e){t&&(n[e>>3]|=1<<e%8)},data:()=>({type:t,length:e,buffers:[null,n]})}}function vs(t,e){const n=ps(t.ArrayType,e);return{set(t,e){n[e]=t/864e5|0},data:()=>({type:t,length:e,buffers:[null,n]})}}function _s(t,e){const n=ps(t.ArrayType,e<<1);return{set(t,e){const i=e<<1;n[i]=t%4294967296|0,n[i+1]=t/4294967296|0},data:()=>({type:t,length:e,buffers:[null,n]})}}const ws=(t,e)=>(t*e+63&-64||64)/e;class xs{constructor(t,e=1){this.buffer=t,this.stride=e,this.BYTES_PER_ELEMENT=t.BYTES_PER_ELEMENT,this.ArrayType=t.constructor,this._resize(this.length=Math.trunc(t.length/e))}get byteLength(){return Math.trunc(this.length*this.stride*this.BYTES_PER_ELEMENT)}get reservedLength(){return this.buffer.length/this.stride}get reservedByteLength(){return this.buffer.byteLength}set(t,e){return this}append(t){return this.set(this.length,t)}reserve(t){if(t>0){this.length+=t;const e=this.stride,n=this.length*e,i=this.buffer.length;n>=i&&this._resize(ws(0===i?1*n:2*n,this.BYTES_PER_ELEMENT))}return this}flush(t=this.length){t=ws(t*this.stride,this.BYTES_PER_ELEMENT);const e=((t,e=0)=>t.length>=e?t.subarray(0,e):Ve(new t.constructor(e),t,0))(this.buffer,t);return this.clear(),e}clear(){return this.length=0,this._resize(0),this}_resize(t){return this.buffer=Ve(new this.ArrayType(t),this.buffer)}}xs.prototype.offset=0;class Ss extends xs{last(){return this.get(this.length-1)}get(t){return this.buffer[t]}set(t,e){return this.reserve(t-this.length+1),this.buffer[t*this.stride]=e,this}}class Is extends Ss{constructor(t=new Uint8Array(0)){super(t,1/8),this.numValid=0}get numInvalid(){return this.length-this.numValid}get(t){return this.buffer[t>>3]>>t%8&1}set(t,e){const{buffer:n}=this.reserve(t-this.length+1),i=t>>3,r=t%8,s=n[i]>>r&1;return e?0===s&&(n[i]|=1<<r,++this.numValid):1===s&&(n[i]&=~(1<<r),--this.numValid),this}clear(){return this.numValid=0,super.clear()}}class As extends Ss{constructor(t=new Int32Array(1)){super(t,1)}append(t){return this.set(this.length-1,t)}set(t,e){const n=this.length-1,i=this.reserve(t-n+1).buffer;return n<t++&&i.fill(i[n],n,t),i[t]=i[t-1]+e,this}flush(t=this.length-1){return t>this.length&&this.set(t-1,0),super.flush(t+1)}}class Ts{constructor({type:t,nullValues:e}){this.length=0,this.finished=!1,this.type=t,this.children=[],this.nullValues=e,this.stride=ci(t),this._nulls=new Is,e&&e.length>0&&(this._isValid=function(t){if(!t||t.length<=0)return function(t){return!0};let e="";const n=t.filter((t=>t==t));return n.length>0&&(e=`\n    switch (x) {${n.map((t=>`\n        case ${function(t){return"bigint"!=typeof t?le(t):ve?`${le(t)}n`:`"${le(t)}"`}(t)}:`)).join("")}\n            return false;\n    }`),t.length!==n.length&&(e=`if (x !== x) return false;\n${e}`),new Function("x",`${e}\nreturn true;`)}(e))}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t){throw new Error('"throughDOM" not available in this environment')}toVector(){return new os([this.flush()])}get ArrayType(){return this.type.ArrayType}get nullCount(){return this._nulls.numInvalid}get numChildren(){return this.children.length}get byteLength(){let t=0;const{_offsets:e,_values:n,_nulls:i,_typeIds:r,children:s}=this;return e&&(t+=e.byteLength),n&&(t+=n.byteLength),i&&(t+=i.byteLength),r&&(t+=r.byteLength),s.reduce(((t,e)=>t+e.byteLength),t)}get reservedLength(){return this._nulls.reservedLength}get reservedByteLength(){let t=0;return this._offsets&&(t+=this._offsets.reservedByteLength),this._values&&(t+=this._values.reservedByteLength),this._nulls&&(t+=this._nulls.reservedByteLength),this._typeIds&&(t+=this._typeIds.reservedByteLength),this.children.reduce(((t,e)=>t+e.reservedByteLength),t)}get valueOffsets(){return this._offsets?this._offsets.buffer:null}get values(){return this._values?this._values.buffer:null}get nullBitmap(){return this._nulls?this._nulls.buffer:null}get typeIds(){return this._typeIds?this._typeIds.buffer:null}append(t){return this.set(this.length,t)}isValid(t){return this._isValid(t)}set(t,e){return this.setValid(t,this.isValid(e))&&this.setValue(t,e),this}setValue(t,e){this._setValue(this,t,e)}setValid(t,e){return this.length=this._nulls.set(t,+e).length,e}addChild(t,e=`${this.numChildren}`){throw new Error(`Cannot append children to non-nested type "${this.type}"`)}getChildAt(t){return this.children[t]||null}flush(){let t,e,n,i;const{type:r,length:s,nullCount:a,_typeIds:o,_offsets:l,_values:c,_nulls:u}=this;(e=null==o?void 0:o.flush(s))?i=null==l?void 0:l.flush(s):t=(i=null==l?void 0:l.flush(s))?null==c?void 0:c.flush(l.last()):null==c?void 0:c.flush(s),a>0&&(n=null==u?void 0:u.flush(s));const h=this.children.map((t=>t.flush()));return this.clear(),hs({type:r,length:s,nullCount:a,children:h,child:h[0],data:t,typeIds:e,nullBitmap:n,valueOffsets:i})}finish(){this.finished=!0;for(const t of this.children)t.finish();return this}clear(){var t,e,n,i;this.length=0,null===(t=this._nulls)||void 0===t||t.clear(),null===(e=this._values)||void 0===e||e.clear(),null===(n=this._offsets)||void 0===n||n.clear(),null===(i=this._typeIds)||void 0===i||i.clear();for(const t of this.children)t.clear();return this}}Ts.prototype.length=1,Ts.prototype.stride=1,Ts.prototype.children=null,Ts.prototype.finished=!1,Ts.prototype.nullValues=null,Ts.prototype._isValid=()=>!0;class Cs extends Ts{constructor(t){super(t),this._values=new Ss(new this.ArrayType(0),this.stride)}setValue(t,e){const n=this._values;return n.reserve(t-n.length+1),super.setValue(t,e)}}class Ns extends Ts{constructor(t){super(t),this._pendingLength=0,this._offsets=new As}setValue(t,e){const n=this._pending||(this._pending=new Map),i=n.get(t);i&&(this._pendingLength-=i.length),this._pendingLength+=e instanceof _r?e[br].length:e.length,n.set(t,e)}setValid(t,e){return!!super.setValid(t,e)||((this._pending||(this._pending=new Map)).set(t,void 0),!1)}clear(){return this._pendingLength=0,this._pending=void 0,super.clear()}flush(){return this._flush(),super.flush()}finish(){return this._flush(),super.finish()}_flush(){const t=this._pending,e=this._pendingLength;return this._pendingLength=0,this._pending=void 0,t&&t.size>0&&this._flushPending(t,e),this}}class ks extends Ns{constructor(t){super(t),this._values=new xs(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,je(e))}_flushPending(t,e){const n=this._offsets,i=this._values.reserve(e).buffer;let r=0;for(const[e,s]of t)if(void 0===s)n.set(e,0);else{const t=s.length;i.set(s,r),n.set(e,t),r+=t}}}class Es extends Ts{constructor(t){super(t),this._values=new Is}setValue(t,e){this._values.set(t,+e)}}class Os extends Cs{}Os.prototype._setValue=Ci;class Ms extends Os{}Ms.prototype._setValue=Ii;class Ds extends Os{}Ds.prototype._setValue=Ai;class Bs extends Cs{}Bs.prototype._setValue=Vi;class Ls extends Ts{constructor({type:t,nullValues:e,dictionaryHashFunction:n}){super({type:new li(t.dictionary,t.indices,t.id,t.isOrdered)}),this._nulls=null,this._dictionaryOffset=0,this._keysToIndices=Object.create(null),this.indices=Sa({type:this.type.indices,nullValues:e}),this.dictionary=Sa({type:this.type.dictionary,nullValues:null}),"function"==typeof n&&(this.valueToKey=n)}get values(){return this.indices.values}get nullCount(){return this.indices.nullCount}get nullBitmap(){return this.indices.nullBitmap}get byteLength(){return this.indices.byteLength+this.dictionary.byteLength}get reservedLength(){return this.indices.reservedLength+this.dictionary.reservedLength}get reservedByteLength(){return this.indices.reservedByteLength+this.dictionary.reservedByteLength}isValid(t){return this.indices.isValid(t)}setValid(t,e){const n=this.indices;return e=n.setValid(t,e),this.length=n.length,e}setValue(t,e){const n=this._keysToIndices,i=this.valueToKey(e);let r=n[i];return void 0===r&&(n[i]=r=this._dictionaryOffset+this.dictionary.append(e).length-1),this.indices.setValue(t,r)}flush(){const t=this.type,e=this._dictionary,n=this.dictionary.toVector(),i=this.indices.flush().clone(t);return i.dictionary=e?e.concat(n):n,this.finished||(this._dictionaryOffset+=n.length),this._dictionary=i.dictionary,this.clear(),i}finish(){return this.indices.finish(),this.dictionary.finish(),this._dictionaryOffset=0,this._keysToIndices=Object.create(null),super.finish()}clear(){return this.indices.clear(),this.dictionary.clear(),super.clear()}valueToKey(t){return"string"==typeof t?t:`${t}`}}class Ps extends Cs{}Ps.prototype._setValue=Ti;class Fs{constructor(t=[],e,n){this.fields=t||[],this.metadata=e||new Map,n||(n=Rs(t)),this.dictionaries=n}get[Symbol.toStringTag](){return"Schema"}get names(){return this.fields.map((t=>t.name))}toString(){return`Schema<{ ${this.fields.map(((t,e)=>`${e}: ${t}`)).join(", ")} }>`}select(t){const e=new Set(t),n=this.fields.filter((t=>e.has(t.name)));return new Fs(n,this.metadata)}selectAt(t){const e=t.map((t=>this.fields[t])).filter(Boolean);return new Fs(e,this.metadata)}assign(...t){const e=t[0]instanceof Fs?t[0]:Array.isArray(t[0])?new Fs(t[0]):new Fs(t),n=[...this.fields],i=Us(Us(new Map,this.metadata),e.metadata),r=e.fields.filter((t=>{const e=n.findIndex((e=>e.name===t.name));return!~e||(n[e]=t.clone({metadata:Us(Us(new Map,n[e].metadata),t.metadata)}))&&!1})),s=Rs(r,new Map);return new Fs([...n,...r],i,new Map([...this.dictionaries,...s]))}}Fs.prototype.fields=null,Fs.prototype.metadata=null,Fs.prototype.dictionaries=null;class Vs{constructor(t,e,n=!1,i){this.name=t,this.type=e,this.nullable=n,this.metadata=i||new Map}static new(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]&&(({name:e}=t[0]),void 0===n&&(n=t[0].type),void 0===i&&(i=t[0].nullable),void 0===r&&(r=t[0].metadata)),new Vs(`${e}`,n,i,r)}get typeId(){return this.type.typeId}get[Symbol.toStringTag](){return"Field"}toString(){return`${this.name}: ${this.type}`}clone(...t){let[e,n,i,r]=t;return t[0]&&"object"==typeof t[0]?({name:e=this.name,type:n=this.type,nullable:i=this.nullable,metadata:r=this.metadata}=t[0]):[e=this.name,n=this.type,i=this.nullable,r=this.metadata]=t,Vs.new(e,n,i,r)}}function Us(t,e){return new Map([...t||new Map,...e||new Map])}function Rs(t,e=new Map){for(let n=-1,i=t.length;++n<i;){const i=t[n].type;if(Sn.isDictionary(i))if(e.has(i.id)){if(e.get(i.id)!==i.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else e.set(i.id,i.dictionary);i.children&&i.children.length>0&&Rs(i.children,e)}return e}Vs.prototype.type=null,Vs.prototype.name=null,Vs.prototype.nullable=null,Vs.prototype.metadata=null;class $s extends Ts{setValue(t,e){const[n]=this.children,i=t*this.stride;for(let t=-1,r=e.length;++t<r;)n.set(i+t,e[t])}addChild(t,e="0"){if(this.numChildren>0)throw new Error("FixedSizeListBuilder can only have one child.");const n=this.children.push(t);return this.type=new ri(this.type.listSize,new Vs(e,t.type,!0)),n}}class js extends Cs{setValue(t,e){this._values.set(t,e)}}class zs extends js{setValue(t,e){super.setValue(t,yi(e))}}class Ws extends js{}class Hs extends js{}class qs extends Cs{}qs.prototype._setValue=$i;class Gs extends qs{}Gs.prototype._setValue=ji;class Ys extends qs{}Ys.prototype._setValue=zi;class Ks extends Cs{setValue(t,e){this._values.set(t,e)}}class Js extends Ks{}class Qs extends Ks{}class Zs extends Ks{}class Xs extends Ks{}class ta extends Ks{}class ea extends Ks{}class na extends Ks{}class ia extends Ks{}class ra extends Ns{constructor(t){super(t),this._offsets=new As}addChild(t,e="0"){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new ti(new Vs(e,t.type,!0)),this.numChildren-1}_flushPending(t){const e=this._offsets,[n]=this.children;for(const[i,r]of t)if(void 0===r)e.set(i,0);else{const t=r.length,s=e.set(i,t).buffer[i];for(let e=-1;++e<t;)n.set(s+e,r[e])}}}class sa extends Ns{set(t,e){return super.set(t,e)}setValue(t,e){const n=e instanceof Map?e:new Map(Object.entries(e)),i=this._pending||(this._pending=new Map),r=i.get(t);r&&(this._pendingLength-=r.size),this._pendingLength+=n.size,i.set(t,n)}addChild(t,e=`${this.numChildren}`){if(this.numChildren>0)throw new Error("ListBuilder can only have one child.");return this.children[this.numChildren]=t,this.type=new si(new Vs(e,t.type,!0),this.type.keysSorted),this.numChildren-1}_flushPending(t){const e=this._offsets,[n]=this.children;for(const[i,r]of t)if(void 0===r)e.set(i,0);else{let{[i]:t,[i+1]:s}=e.set(i,r.size).buffer;for(const e of r.entries())if(n.set(t,e),++t>=s)break}}}class aa extends Ts{setValue(t,e){}setValid(t,e){return this.length=Math.max(t+1,this.length),e}}class oa extends Ts{setValue(t,e){const{children:n,type:i}=this;switch(Array.isArray(e)||e.constructor){case!0:return i.children.forEach(((i,r)=>n[r].set(t,e[r])));case Map:return i.children.forEach(((i,r)=>n[r].set(t,e.get(i.name))));default:return i.children.forEach(((i,r)=>n[r].set(t,e[i.name])))}}setValid(t,e){return super.setValid(t,e)||this.children.forEach((n=>n.setValid(t,e))),e}addChild(t,e=`${this.numChildren}`){const n=this.children.push(t);return this.type=new ei([...this.type.children,new Vs(e,t.type,!0)]),n}}class la extends Cs{}la.prototype._setValue=Mi;class ca extends la{}ca.prototype._setValue=Ni;class ua extends la{}ua.prototype._setValue=ki;class ha extends la{}ha.prototype._setValue=Ei;class da extends la{}da.prototype._setValue=Oi;class pa extends Cs{}pa.prototype._setValue=Fi;class fa extends pa{}fa.prototype._setValue=Di;class ma extends pa{}ma.prototype._setValue=Bi;class ya extends pa{}ya.prototype._setValue=Li;class ga extends pa{}ga.prototype._setValue=Pi;class ba extends Ts{constructor(t){super(t),this._typeIds=new Ss(new Int8Array(0),1),"function"==typeof t.valueToChildTypeId&&(this._valueToChildTypeId=t.valueToChildTypeId)}get typeIdToChildIndex(){return this.type.typeIdToChildIndex}append(t,e){return this.set(this.length,t,e)}set(t,e,n){return void 0===n&&(n=this._valueToChildTypeId(this,e,t)),this.setValid(t,this.isValid(e))&&this.setValue(t,e,n),this}setValue(t,e,n){this._typeIds.set(t,n);const i=this.type.typeIdToChildIndex[n],r=this.children[i];null==r||r.set(t,e)}addChild(t,e=`${this.children.length}`){const n=this.children.push(t),{type:{children:i,mode:r,typeIds:s}}=this,a=[...i,new Vs(e,t.type)];return this.type=new ni(r,[...s,n],a),n}_valueToChildTypeId(t,e,n){throw new Error("Cannot map UnionBuilder value to child typeId. Pass the `childTypeId` as the second argument to unionBuilder.append(), or supply a `valueToChildTypeId` function as part of the UnionBuilder constructor options.")}}class va extends ba{}class _a extends ba{constructor(t){super(t),this._offsets=new Ss(new Int32Array(0))}setValue(t,e,n){const i=this._typeIds.set(t,n).buffer[t],r=this.getChildAt(this.type.typeIdToChildIndex[i]),s=this._offsets.set(t,r.length).buffer[t];null==r||r.set(s,e)}}class wa extends Ns{constructor(t){super(t),this._values=new xs(new Uint8Array(0))}get byteLength(){let t=this._pendingLength+4*this.length;return this._offsets&&(t+=this._offsets.byteLength),this._values&&(t+=this._values.byteLength),this._nulls&&(t+=this._nulls.byteLength),t}setValue(t,e){return super.setValue(t,ge(e))}_flushPending(t,e){}}wa.prototype._flushPending=ks.prototype._flushPending;const xa=new class extends ui{visitNull(){return aa}visitBool(){return Es}visitInt(){return Ks}visitInt8(){return Js}visitInt16(){return Qs}visitInt32(){return Zs}visitInt64(){return Xs}visitUint8(){return ta}visitUint16(){return ea}visitUint32(){return na}visitUint64(){return ia}visitFloat(){return js}visitFloat16(){return zs}visitFloat32(){return Ws}visitFloat64(){return Hs}visitUtf8(){return wa}visitBinary(){return ks}visitFixedSizeBinary(){return Ps}visitDate(){return Os}visitDateDay(){return Ms}visitDateMillisecond(){return Ds}visitTimestamp(){return la}visitTimestampSecond(){return ca}visitTimestampMillisecond(){return ua}visitTimestampMicrosecond(){return ha}visitTimestampNanosecond(){return da}visitTime(){return pa}visitTimeSecond(){return fa}visitTimeMillisecond(){return ma}visitTimeMicrosecond(){return ya}visitTimeNanosecond(){return ga}visitDecimal(){return Bs}visitList(){return ra}visitStruct(){return oa}visitUnion(){return ba}visitDenseUnion(){return _a}visitSparseUnion(){return va}visitDictionary(){return Ls}visitInterval(){return qs}visitIntervalDayTime(){return Gs}visitIntervalYearMonth(){return Ys}visitFixedSizeList(){return $s}visitMap(){return sa}};function Sa(t){const e=t.type,n=new(xa.getVisitFn(e)())(t);if(e.children&&e.children.length>0){const i=t.children||[],r={nullValues:t.nullValues},s=Array.isArray(i)?(t,e)=>i[e]||r:({name:t})=>i[t]||r;for(const[t,i]of e.children.entries()){const{type:e}=i,r=s(i,t);n.children.push(Sa(Object.assign(Object.assign({},r),{type:e})))}}return n}function Ia(t,e){const n=[],i=ps(t.indices.ArrayType,e),r=Object.create(null);let s=-1,a=0;return{set(t,e){const o=String(t);let l=r[o];void 0===l&&(a+=o.length,r[o]=l=++s,n.push(o)),i[e]=l},data:()=>({type:t,length:e,buffers:[null,i],dict:Aa(t.dictionary,n,a)})}}function Aa(t,e,n){const i=function(t,e,n){const i=ps(Int32Array,e+1),r=ps(Uint8Array,3*n);let s=0;return{set(t,e){s+=ys(r,s,t),i[e+1]=s},data:()=>{const n=ds(s),a=r.length>n?r.subarray(0,n):r;return{type:t,length:e,buffers:[i,a]}}}}(t,e.length,n);return e.forEach(i.set),function(t){return new os([fs(t)])}(i.data())}function Ta(t,e,n,i,r=!0){const s=function(t,e,n=!0){let i;switch(t.typeId){case re.Int:i=t.bitWidth<64?gs:null;break;case re.Float:i=t.precision>0?gs:null;break;case re.Dictionary:i=t.dictionary.typeId===re.Utf8&&t.indices.typeId===re.Int&&t.indices.bitWidth<64?Ia:null;break;case re.Bool:i=bs;break;case re.Date:i=t.unit?_s:vs}return null==i?function(t){const e=Sa({type:t,nullValues:[null,void 0]});return{set(t,n){e.set(n,t)},data:()=>e.finish().flush()}}(t):n?function(t,e){const n=ps(Uint8Array,e/8);let i=0;return{set(e,r){null==e?++i:(t.set(e,r),n[r>>3]|=1<<r%8)},data:()=>{const e=t.data();return i&&(e.nulls=i,e.buffers[2]=n),e}}}(i(t,e),e):i(t,e)}(i,t,r);return e(n,s.set),fs(s.data())}function Ca(t){if(t instanceof Sn||null==t)return t;switch(t){case re.Binary:return new Vn;case re.Bool:return new Rn;case re.DateDay:return new zn;case re.DateMillisecond:case re.Date:return new Wn;case re.Dictionary:return new li(new Un,new Nn);case re.Float16:return new Ln;case re.Float32:return new Pn;case re.Float64:case re.Float:return new Fn;case re.Int8:return new Tn;case re.Int16:return new Cn;case re.Int32:case re.Int:return new Nn;case re.Int64:return new kn;case re.IntervalDayTime:return new Zn;case re.Interval:case re.IntervalYearMonth:return new Xn;case re.Null:return new In;case re.TimeMicrosecond:return new Yn;case re.TimeMillisecond:case re.Time:return new Gn;case re.TimeNanosecond:return new Kn;case re.TimeSecond:return new qn;case re.Uint8:return new En;case re.Uint16:return new On;case re.Uint32:return new Mn;case re.Uint64:return new Dn;case re.Utf8:return new Un;default:o(`Unsupported type code: ${nt(t)}. Use a data type constructor instead?`)}}function Na(t,e){const n=ka();return t(e,n.add),n}function ka(){const t={count:0,nulls:0,bools:0,nums:0,ints:0,bigints:0,min:1/0,max:-1/0,digits:0,dates:0,utcdays:0,strings:0,strlen:0,arrays:0,minlen:1/0,maxlen:0,structs:0,add(e){if(++t.count,null==e)return void++t.nulls;const n=typeof e;if("string"===n)++t.strings;else if("number"===n)++t.nums,e<t.min&&(t.min=e),e>t.max&&(t.max=e),Number.isInteger(e)&&++t.ints;else if("boolean"===n)++t.bools;else if("object"===n)if(f(e))++t.dates,0===(i=e).getUTCHours()&&0===i.getUTCMinutes()&&0===i.getUTCSeconds()&&0===i.getUTCMilliseconds()&&++t.utcdays;else if(T(e)){++t.arrays,e.length<t.minlen&&(t.minlen=e.length),e.length>t.maxlen&&(t.maxlen=e.length);const n=t.array_prof||(t.array_prof=ka());e.forEach(n.add)}else{++t.structs;const n=t.struct_prof||(t.struct_prof={});for(const t in e)(n[t]||(n[t]=ka())).add(e[t])}else"bigint"===n&&(++t.bigints,e<t.min&&(t.min=e),e>t.max&&(t.max=e));var i},type:()=>Ca(function(t){const e=t.count-t.nulls;if(0===e)return re.Null;if(t.ints===e){const e=Math.max(Math.abs(t.min)-1,t.max);return t.min<0?e>=2**31?re.Float64:e<128?re.Int8:e<32768?re.Int16:re.Int32:e>=2**32?re.Float64:e<256?re.Uint8:e<65536?re.Uint16:re.Uint32}if(t.nums===e)return re.Float64;if(t.bigints===e){const e=-t.min>t.max?-t.min-1n:t.max;return t.min<0?e<2**63?re.Int64:o(`BigInt exceeds 64 bits: ${e}`):t.max<2**64?re.Uint64:o(`BigInt exceeds 64 bits: ${t.max}`)}if(t.bools===e)return re.Bool;if(t.utcdays===e)return re.DateDay;if(t.dates===e)return re.DateMillisecond;if(t.arrays===e){const e=Vs.new("value",t.array_prof.type(),!0);return t.minlen===t.maxlen?new ri(t.minlen,e):new ti(e)}if(t.structs===e){const e=t.struct_prof;return new ei(Object.keys(e).map((t=>Vs.new(t,e[t].type(),!0))))}if(t.strings>0)return re.Dictionary;o("Type inference failure")}(t))};return t}function Ea(t,e,n,i,r,s=!0){if(!(r=Ca(r))){const t=Na(i,e);s=t.nulls>0,r=t.type()}return Ta(n,i,e,r,s)}function Oa(t,e,n,i,r,s=!0){r=Ca(r);const a=t.column(e),o=!(t.isFiltered()||t.isOrdered()),l=(c=a)instanceof os?c:c.vector instanceof os?c.vector:null;var c;if(l&&o&&Ma(l.type,r))return l;const u=a.data;if(A(u)){const t=function(t){const e={Float32Array:Pn,Float64Array:Fn,Int8Array:Tn,Int16Array:Cn,Int32Array:Nn,Uint8Array:En,Uint16Array:On,Uint32Array:Mn,BigInt64Array:kn,BigUint64Array:Dn}[t.constructor.name];return e?new e:null}(u);if(o&&t&&Ma(t,r))return function(t,e){const n=t.length,i=ds(n,t.BYTES_PER_ELEMENT);let r=t;return n!==i&&(r=new t.constructor(i),r.set(t)),fs({type:e,length:n,buffers:[null,r]})}(u,t);r=r||t,s=!1}if(!r){const t=Na(i,a);s=t.nulls>0,r=t.type()}return Ta(n,i,a,r,s)}function Ma(t,e){return!t||!e||t.compareTo(e)}function Da(t,e,n){const i=Math.min(t.length,n+e);return(e,r)=>{for(let s=n;s<i;++s)r(t[s][e],s)}}function Ba(t,e,n){const i=0===n&&t.numRows()<=e&&!t.isFiltered()&&!t.isOrdered();return(r,s)=>{let a=-1;i&&T(r.data)?r.data.forEach(s):t.scan((t=>s(r.get(t),++a)),!0,e,n)}}class La extends ui{compareSchemas(t,e){return t===e||e instanceof t.constructor&&this.compareManyFields(t.fields,e.fields)}compareManyFields(t,e){return t===e||Array.isArray(t)&&Array.isArray(e)&&t.length===e.length&&t.every(((t,n)=>this.compareFields(t,e[n])))}compareFields(t,e){return t===e||e instanceof t.constructor&&t.name===e.name&&t.nullable===e.nullable&&this.visit(t.type,e.type)}}function Pa(t,e){return e instanceof t.constructor}function Fa(t,e){return t===e||Pa(t,e)}function Va(t,e){return t===e||Pa(t,e)&&t.bitWidth===e.bitWidth&&t.isSigned===e.isSigned}function Ua(t,e){return t===e||Pa(t,e)&&t.precision===e.precision}function Ra(t,e){return t===e||Pa(t,e)&&t.unit===e.unit}function $a(t,e){return t===e||Pa(t,e)&&t.unit===e.unit&&t.timezone===e.timezone}function ja(t,e){return t===e||Pa(t,e)&&t.unit===e.unit&&t.bitWidth===e.bitWidth}function za(t,e){return t===e||Pa(t,e)&&t.mode===e.mode&&t.typeIds.every(((t,n)=>t===e.typeIds[n]))&&Ha.compareManyFields(t.children,e.children)}function Wa(t,e){return t===e||Pa(t,e)&&t.unit===e.unit}La.prototype.visitNull=Fa,La.prototype.visitBool=Fa,La.prototype.visitInt=Va,La.prototype.visitInt8=Va,La.prototype.visitInt16=Va,La.prototype.visitInt32=Va,La.prototype.visitInt64=Va,La.prototype.visitUint8=Va,La.prototype.visitUint16=Va,La.prototype.visitUint32=Va,La.prototype.visitUint64=Va,La.prototype.visitFloat=Ua,La.prototype.visitFloat16=Ua,La.prototype.visitFloat32=Ua,La.prototype.visitFloat64=Ua,La.prototype.visitUtf8=Fa,La.prototype.visitBinary=Fa,La.prototype.visitFixedSizeBinary=function(t,e){return t===e||Pa(t,e)&&t.byteWidth===e.byteWidth},La.prototype.visitDate=Ra,La.prototype.visitDateDay=Ra,La.prototype.visitDateMillisecond=Ra,La.prototype.visitTimestamp=$a,La.prototype.visitTimestampSecond=$a,La.prototype.visitTimestampMillisecond=$a,La.prototype.visitTimestampMicrosecond=$a,La.prototype.visitTimestampNanosecond=$a,La.prototype.visitTime=ja,La.prototype.visitTimeSecond=ja,La.prototype.visitTimeMillisecond=ja,La.prototype.visitTimeMicrosecond=ja,La.prototype.visitTimeNanosecond=ja,La.prototype.visitDecimal=Fa,La.prototype.visitList=function(t,e){return t===e||Pa(t,e)&&t.children.length===e.children.length&&Ha.compareManyFields(t.children,e.children)},La.prototype.visitStruct=function(t,e){return t===e||Pa(t,e)&&t.children.length===e.children.length&&Ha.compareManyFields(t.children,e.children)},La.prototype.visitUnion=za,La.prototype.visitDenseUnion=za,La.prototype.visitSparseUnion=za,La.prototype.visitDictionary=function(t,e){return t===e||Pa(t,e)&&t.id===e.id&&t.isOrdered===e.isOrdered&&Ha.visit(t.indices,e.indices)&&Ha.visit(t.dictionary,e.dictionary)},La.prototype.visitInterval=Wa,La.prototype.visitIntervalDayTime=Wa,La.prototype.visitIntervalYearMonth=Wa,La.prototype.visitFixedSizeList=function(t,e){return t===e||Pa(t,e)&&t.listSize===e.listSize&&t.children.length===e.children.length&&Ha.compareManyFields(t.children,e.children)},La.prototype.visitMap=function(t,e){return t===e||Pa(t,e)&&t.keysSorted===e.keysSorted&&t.children.length===e.children.length&&Ha.compareManyFields(t.children,e.children)};const Ha=new La;function qa(t,e){return Ha.compareSchemas(t,e)}var Ga,Ya;class Ka{constructor(...t){switch(t.length){case 2:if([this.schema]=t,!(this.schema instanceof Fs))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");if([,this.data=hs({nullCount:0,type:new ei(this.schema.fields),children:this.schema.fields.map((t=>hs({type:t.type,nullCount:0})))})]=t,!(this.data instanceof cs))throw new TypeError("RecordBatch constructor expects a [Schema, Data] pair.");[this.schema,this.data]=Ja(this.schema,this.data.children);break;case 1:{const[e]=t,{fields:n,children:i,length:r}=Object.keys(e).reduce(((t,n,i)=>(t.children[i]=e[n],t.length=Math.max(t.length,e[n].length),t.fields[i]=Vs.new({name:n,type:e[n].type,nullable:!0}),t)),{length:0,fields:new Array,children:new Array}),s=new Fs(n),a=hs({type:new ei(n),length:r,children:i,nullCount:0});[this.schema,this.data]=Ja(s,a.children,r);break}default:throw new TypeError("RecordBatch constructor expects an Object mapping names to child Data, or a [Schema, Data] pair.")}}get dictionaries(){return this._dictionaries||(this._dictionaries=Qa(this.schema.fields,this.data.children))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.length}get nullCount(){return this.data.nullCount}isValid(t){return this.data.getValid(t)}get(t){return gr.visit(this.data,t)}set(t,e){return Wi.visit(this.data,t,e)}indexOf(t,e){return Yr.visit(this.data,t,e)}getByteLength(t){return is.visit(this.data,t)}[Symbol.iterator](){return Zr.visit(new os([this.data]))}toArray(){return[...this]}concat(...t){return new eo(this.schema,[this,...t])}slice(t,e){const[n]=new os([this.data]).slice(t,e).data;return new Ka(this.schema,n)}getChild(t){var e;return this.getChildAt(null===(e=this.schema.fields)||void 0===e?void 0:e.findIndex((e=>e.name===t)))}getChildAt(t){return t>-1&&t<this.schema.fields.length?new os([this.data.children[t]]):null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=this.data;if(t>-1&&t<this.numCols){e||(e=new os([hs({type:new In,length:this.numRows})]));const r=n.fields.slice(),s=i.children.slice(),a=r[t].clone({type:e.type});[r[t],s[t]]=[a,e.data[0]],n=new Fs(r,new Map(this.schema.metadata)),i=hs({type:new ei(r),children:s})}return new Ka(n,i)}select(t){const e=this.schema.select(t),n=new ei(e.fields),i=[];for(const e of t){const t=this.schema.fields.findIndex((t=>t.name===e));~t&&(i[t]=this.data.children[t])}return new Ka(e,hs({type:n,length:this.numRows,children:i}))}selectAt(t){const e=this.schema.selectAt(t),n=t.map((t=>this.data.children[t])).filter(Boolean),i=hs({type:new ei(e.fields),length:this.numRows,children:n});return new Ka(e,i)}}function Ja(t,e,n=e.reduce(((t,e)=>Math.max(t,e.length)),0)){var i;const r=[...t.fields],s=[...e],a=(n+63&-64)>>3;for(const[o,l]of t.fields.entries()){const t=e[o];t&&t.length===n||(r[o]=l.clone({nullable:!0}),s[o]=null!==(i=null==t?void 0:t._changeLengthAndBackfillNullBitmap(n))&&void 0!==i?i:hs({type:l.type,length:n,nullCount:n,nullBitmap:new Uint8Array(a)}))}return[t.assign(r),hs({type:new ei(r),length:n,children:s})]}function Qa(t,e,n=new Map){for(let i=-1,r=t.length;++i<r;){const r=t[i].type,s=e[i];if(Sn.isDictionary(r))if(n.has(r.id)){if(n.get(r.id)!==s.dictionary)throw new Error("Cannot create Schema containing two different dictionaries with the same Id")}else s.dictionary&&n.set(r.id,s.dictionary);r.children&&r.children.length>0&&Qa(r.children,s.children,n)}return n}Ga=Symbol.toStringTag,Ka[Ga]=(t=>(t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,"RecordBatch"))(Ka.prototype);class Za extends Ka{constructor(t){const e=t.fields.map((t=>hs({type:t.type})));super(t,hs({type:new ei(t.fields),nullCount:0,children:e}))}}function Xa(t,e){return function(t,e){const n=[...t.fields],i=[],r={numBatches:e.reduce(((t,e)=>Math.max(t,e.length)),0)};let s=0,a=0,o=-1;const l=e.length;let c,u=[];for(;r.numBatches-- >0;){for(a=Number.POSITIVE_INFINITY,o=-1;++o<l;)u[o]=c=e[o].shift(),a=Math.min(a,c?c.length:a);Number.isFinite(a)&&(u=to(n,a,u,e,r),a>0&&(i[s++]=hs({type:new ei(n),length:a,nullCount:0,children:u.slice()})))}return[t=t.assign(n),i.map((e=>new Ka(t,e)))]}(t,e.map((t=>t.data.concat())))}function to(t,e,n,i,r){var s;const a=(e+63&-64)>>3;for(let o=-1,l=i.length;++o<l;){const l=n[o],c=null==l?void 0:l.length;if(c>=e)c===e?n[o]=l:(n[o]=l.slice(0,e),r.numBatches=Math.max(r.numBatches,i[o].unshift(l.slice(e,c-e))));else{const i=t[o];t[o]=i.clone({nullable:!0}),n[o]=null!==(s=null==l?void 0:l._changeLengthAndBackfillNullBitmap(e))&&void 0!==s?s:hs({type:i.type,length:e,nullCount:e,nullBitmap:new Uint8Array(a)})}}return n}class eo{constructor(...t){var e,n;if(0===t.length)return this.batches=[],this.schema=new Fs([]),this._offsets=[0],this;let i,r;t[0]instanceof Fs&&(i=t.shift()),t[t.length-1]instanceof Uint32Array&&(r=t.pop());const s=t=>{if(t){if(t instanceof Ka)return[t];if(t instanceof eo)return t.batches;if(t instanceof cs){if(t.type instanceof ei)return[new Ka(new Fs(t.type.children),t)]}else{if(Array.isArray(t))return t.flatMap((t=>s(t)));if("function"==typeof t[Symbol.iterator])return[...t].flatMap((t=>s(t)));if("object"==typeof t){const e=Object.keys(t),n=e.map((e=>new os([t[e]]))),i=new Fs(e.map(((t,e)=>new Vs(String(t),n[e].type)))),[,r]=Xa(i,n);return 0===r.length?[new Ka(t)]:r}}}return[]},a=t.flatMap((t=>s(t)));if(i=null!==(n=null!=i?i:null===(e=a[0])||void 0===e?void 0:e.schema)&&void 0!==n?n:new Fs([]),!(i instanceof Fs))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");for(const t of a){if(!(t instanceof Ka))throw new TypeError("Table constructor expects a [Schema, RecordBatch[]] pair.");if(!qa(i,t.schema))throw new TypeError("Table and inner RecordBatch schemas must be equivalent.")}this.schema=i,this.batches=a,this._offsets=null!=r?r:Or(this.data)}get data(){return this.batches.map((({data:t})=>t))}get numCols(){return this.schema.fields.length}get numRows(){return this.data.reduce(((t,e)=>t+e.length),0)}get nullCount(){return-1===this._nullCount&&(this._nullCount=Er(this.data)),this._nullCount}isValid(t){return!1}get(t){return null}set(t,e){}indexOf(t,e){return-1}getByteLength(t){return 0}[Symbol.iterator](){return this.batches.length>0?Zr.visit(new os(this.data)):new Array(0)[Symbol.iterator]()}toArray(){return[...this]}toString(){return`[\n  ${this.toArray().join(",\n  ")}\n]`}concat(...t){const e=this.schema,n=this.data.concat(t.flatMap((({data:t})=>t)));return new eo(e,n.map((t=>new Ka(e,t))))}slice(t,e){const n=this.schema;[t,e]=Ir({length:this.numRows},t,e);const i=Mr(this.data,this._offsets,t,e);return new eo(n,i.map((t=>new Ka(n,t))))}getChild(t){return this.getChildAt(this.schema.fields.findIndex((e=>e.name===t)))}getChildAt(t){if(t>-1&&t<this.schema.fields.length){const e=this.data.map((e=>e.children[t]));if(0===e.length){const{type:n}=this.schema.fields[t],i=hs({type:n,length:0,nullCount:0});e.push(i._changeLengthAndBackfillNullBitmap(this.numRows))}return new os(e)}return null}setChild(t,e){var n;return this.setChildAt(null===(n=this.schema.fields)||void 0===n?void 0:n.findIndex((e=>e.name===t)),e)}setChildAt(t,e){let n=this.schema,i=[...this.batches];if(t>-1&&t<this.numCols){e||(e=new os([hs({type:new In,length:this.numRows})]));const r=n.fields.slice(),s=r[t].clone({type:e.type}),a=this.schema.fields.map(((t,e)=>this.getChildAt(e)));[r[t],a[t]]=[s,e],[n,i]=Xa(n,a)}return new eo(n,i)}select(t){const e=this.schema.fields.reduce(((t,e,n)=>t.set(e.name,n)),new Map);return this.selectAt(t.map((t=>e.get(t))).filter((t=>t>-1)))}selectAt(t){const e=this.schema.selectAt(t),n=this.batches.map((e=>e.selectAt(t)));return new eo(e,n)}assign(t){const e=this.schema.fields,[n,i]=t.schema.fields.reduce(((t,n,i)=>{const[r,s]=t,a=e.findIndex((t=>t.name===n.name));return~a?s[a]=i:r.push(i),t}),[[],[]]),r=this.schema.assign(t.schema),s=[...e.map(((t,e)=>[e,i[e]])).map((([e,n])=>void 0===n?this.getChildAt(e):t.getChildAt(n))),...n.map((e=>t.getChildAt(e)))].filter(Boolean);return new eo(...Xa(r,s))}}Ya=Symbol.toStringTag,eo[Ya]=(t=>(t.schema=null,t.batches=[],t._offsets=new Uint32Array([0]),t._nullCount=-1,t[Symbol.isConcatSpreadable]=!0,t.isValid=Lr(Br),t.get=Lr(gr.getVisitFn(re.Struct)),t.set=Pr(Wi.getVisitFn(re.Struct)),t.indexOf=Fr(Yr.getVisitFn(re.Struct)),t.getByteLength=Lr(is.getVisitFn(re.Struct)),"Table"))(eo.prototype);class no{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}metaDataLength(){return this.bb.readInt32(this.bb_pos+8)}bodyLength(){return this.bb.readInt64(this.bb_pos+16)}static sizeOf(){return 24}static createBlock(t,e,n,i){return t.prep(8,24),t.writeInt64(i),t.pad(4),t.writeInt32(n),t.writeInt64(e),t.offset()}}const io=new Int32Array(2),ro=new Float32Array(io.buffer),so=new Float64Array(io.buffer),ao=1===new Uint16Array(new Uint8Array([1,0]).buffer)[0];class oo{constructor(t,e){this.low=0|t,this.high=0|e}static create(t,e){return 0==t&&0==e?oo.ZERO:new oo(t,e)}toFloat64(){return(this.low>>>0)+4294967296*this.high}equals(t){return this.low==t.low&&this.high==t.high}}var lo,co,uo,ho,po;oo.ZERO=new oo(0,0),function(t){t[t.UTF8_BYTES=1]="UTF8_BYTES",t[t.UTF16_STRING=2]="UTF16_STRING"}(lo||(lo={}));class fo{constructor(t){this.bytes_=t,this.position_=0}static allocate(t){return new fo(new Uint8Array(t))}clear(){this.position_=0}bytes(){return this.bytes_}position(){return this.position_}setPosition(t){this.position_=t}capacity(){return this.bytes_.length}readInt8(t){return this.readUint8(t)<<24>>24}readUint8(t){return this.bytes_[t]}readInt16(t){return this.readUint16(t)<<16>>16}readUint16(t){return this.bytes_[t]|this.bytes_[t+1]<<8}readInt32(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24}readUint32(t){return this.readInt32(t)>>>0}readInt64(t){return new oo(this.readInt32(t),this.readInt32(t+4))}readUint64(t){return new oo(this.readUint32(t),this.readUint32(t+4))}readFloat32(t){return io[0]=this.readInt32(t),ro[0]}readFloat64(t){return io[ao?0:1]=this.readInt32(t),io[ao?1:0]=this.readInt32(t+4),so[0]}writeInt8(t,e){this.bytes_[t]=e}writeUint8(t,e){this.bytes_[t]=e}writeInt16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeUint16(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8}writeInt32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeUint32(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24}writeInt64(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)}writeUint64(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)}writeFloat32(t,e){ro[0]=e,this.writeInt32(t,io[0])}writeFloat64(t,e){so[0]=e,this.writeInt32(t,io[ao?0:1]),this.writeInt32(t+4,io[ao?1:0])}getBufferIdentifier(){if(this.bytes_.length<this.position_+4+4)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");let t="";for(let e=0;e<4;e++)t+=String.fromCharCode(this.readInt8(this.position_+4+e));return t}__offset(t,e){const n=t-this.readInt32(t);return e<this.readInt16(n)?this.readInt16(n+e):0}__union(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t}__string(t,e){t+=this.readInt32(t);const n=this.readInt32(t);let i="",r=0;if(t+=4,e===lo.UTF8_BYTES)return this.bytes_.subarray(t,t+n);for(;r<n;){let e;const n=this.readUint8(t+r++);if(n<192)e=n;else{const i=this.readUint8(t+r++);if(n<224)e=(31&n)<<6|63&i;else{const s=this.readUint8(t+r++);e=n<240?(15&n)<<12|(63&i)<<6|63&s:(7&n)<<18|(63&i)<<12|(63&s)<<6|63&this.readUint8(t+r++)}}e<65536?i+=String.fromCharCode(e):(e-=65536,i+=String.fromCharCode(55296+(e>>10),56320+(1023&e)))}return i}__union_with_string(t,e){return"string"==typeof t?this.__string(e):this.__union(t,e)}__indirect(t){return t+this.readInt32(t)}__vector(t){return t+this.readInt32(t)+4}__vector_len(t){return this.readInt32(t+this.readInt32(t))}__has_identifier(t){if(4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=0;e<4;e++)if(t.charCodeAt(e)!=this.readInt8(this.position()+4+e))return!1;return!0}createLong(t,e){return oo.create(t,e)}createScalarList(t,e){const n=[];for(let i=0;i<e;++i)null!==t(i)&&n.push(t(i));return n}createObjList(t,e){const n=[];for(let i=0;i<e;++i){const e=t(i);null!==e&&n.push(e.unpack())}return n}}class mo{constructor(t){let e;this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null,e=t||1024,this.bb=fo.allocate(e),this.space=e}clear(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1,this.string_maps=null}forceDefaults(t){this.force_defaults=t}dataBuffer(){return this.bb}asUint8Array(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())}prep(t,e){t>this.minalign&&(this.minalign=t);const n=1+~(this.bb.capacity()-this.space+e)&t-1;for(;this.space<n+t+e;){const t=this.bb.capacity();this.bb=mo.growByteBuffer(this.bb),this.space+=this.bb.capacity()-t}this.pad(n)}pad(t){for(let e=0;e<t;e++)this.bb.writeInt8(--this.space,0)}writeInt8(t){this.bb.writeInt8(this.space-=1,t)}writeInt16(t){this.bb.writeInt16(this.space-=2,t)}writeInt32(t){this.bb.writeInt32(this.space-=4,t)}writeInt64(t){this.bb.writeInt64(this.space-=8,t)}writeFloat32(t){this.bb.writeFloat32(this.space-=4,t)}writeFloat64(t){this.bb.writeFloat64(this.space-=8,t)}addInt8(t){this.prep(1,0),this.writeInt8(t)}addInt16(t){this.prep(2,0),this.writeInt16(t)}addInt32(t){this.prep(4,0),this.writeInt32(t)}addInt64(t){this.prep(8,0),this.writeInt64(t)}addFloat32(t){this.prep(4,0),this.writeFloat32(t)}addFloat64(t){this.prep(8,0),this.writeFloat64(t)}addFieldInt8(t,e,n){(this.force_defaults||e!=n)&&(this.addInt8(e),this.slot(t))}addFieldInt16(t,e,n){(this.force_defaults||e!=n)&&(this.addInt16(e),this.slot(t))}addFieldInt32(t,e,n){(this.force_defaults||e!=n)&&(this.addInt32(e),this.slot(t))}addFieldInt64(t,e,n){!this.force_defaults&&e.equals(n)||(this.addInt64(e),this.slot(t))}addFieldFloat32(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat32(e),this.slot(t))}addFieldFloat64(t,e,n){(this.force_defaults||e!=n)&&(this.addFloat64(e),this.slot(t))}addFieldOffset(t,e,n){(this.force_defaults||e!=n)&&(this.addOffset(e),this.slot(t))}addFieldStruct(t,e,n){e!=n&&(this.nested(e),this.slot(t))}nested(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")}notNested(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")}slot(t){null!==this.vtable&&(this.vtable[t]=this.offset())}offset(){return this.bb.capacity()-this.space}static growByteBuffer(t){const e=t.capacity();if(3221225472&e)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");const n=e<<1,i=fo.allocate(n);return i.setPosition(n-e),i.bytes().set(t.bytes(),n-e),i}addOffset(t){this.prep(4,0),this.writeInt32(this.offset()-t+4)}startObject(t){this.notNested(),null==this.vtable&&(this.vtable=[]),this.vtable_in_use=t;for(let e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()}endObject(){if(null==this.vtable||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);const t=this.offset();let e=this.vtable_in_use-1;for(;e>=0&&0==this.vtable[e];e--);const n=e+1;for(;e>=0;e--)this.addInt16(0!=this.vtable[e]?t-this.vtable[e]:0);this.addInt16(t-this.object_start);const i=2*(n+2);this.addInt16(i);let r=0;const s=this.space;t:for(e=0;e<this.vtables.length;e++){const t=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(t)){for(let e=2;e<i;e+=2)if(this.bb.readInt16(s+e)!=this.bb.readInt16(t+e))continue t;r=this.vtables[e];break}}return r?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,r-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t}finish(t,e,n){const i=n?4:0;if(e){const t=e;if(this.prep(this.minalign,8+i),4!=t.length)throw new Error("FlatBuffers: file identifier must be length 4");for(let e=3;e>=0;e--)this.writeInt8(t.charCodeAt(e))}this.prep(this.minalign,4+i),this.addOffset(t),i&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)}finishSizePrefixed(t,e){this.finish(t,e,!0)}requiredField(t,e){const n=this.bb.capacity()-t,i=n-this.bb.readInt32(n);if(0==this.bb.readInt16(i+e))throw new Error("FlatBuffers: field "+e+" must be set")}startVector(t,e,n){this.notNested(),this.vector_num_elems=e,this.prep(4,t*e),this.prep(n,t*e)}endVector(){return this.writeInt32(this.vector_num_elems),this.offset()}createSharedString(t){if(!t)return 0;if(this.string_maps||(this.string_maps=new Map),this.string_maps.has(t))return this.string_maps.get(t);const e=this.createString(t);return this.string_maps.set(t,e),e}createString(t){if(!t)return 0;let e;if(t instanceof Uint8Array)e=t;else{e=[];let n=0;for(;n<t.length;){let i;const r=t.charCodeAt(n++);i=r<55296||r>=56320?r:(r<<10)+t.charCodeAt(n++)+-56613888,i<128?e.push(i):(i<2048?e.push(i>>6&31|192):(i<65536?e.push(i>>12&15|224):e.push(i>>18&7|240,i>>12&63|128),e.push(i>>6&63|128)),e.push(63&i|128))}}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(let t=0,n=this.space,i=this.bb.bytes();t<e.length;t++)i[n++]=e[t];return this.endVector()}createLong(t,e){return oo.create(t,e)}createObjectOffset(t){return null===t?0:"string"==typeof t?this.createString(t):t.pack(this)}createObjectOffsetList(t){const e=[];for(let n=0;n<t.length;++n){const i=t[n];if(null===i)throw new Error("FlatBuffers: Argument for createObjectOffsetList cannot contain null.");e.push(this.createObjectOffset(i))}return e}createStructOffsetList(t,e){return e(this,t.length),this.createObjectOffsetList(t),this.endVector()}}class yo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsKeyValue(t,e){return(e||new yo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsKeyValue(t,e){return t.setPosition(t.position()+4),(e||new yo).__init(t.readInt32(t.position())+t.position(),t)}key(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}value(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startKeyValue(t){t.startObject(2)}static addKey(t,e){t.addFieldOffset(0,e,0)}static addValue(t,e){t.addFieldOffset(1,e,0)}static endKeyValue(t){return t.endObject()}static createKeyValue(t,e,n){return yo.startKeyValue(t),yo.addKey(t,e),yo.addValue(t,n),yo.endKeyValue(t)}}!function(t){t[t.V1=0]="V1",t[t.V2=1]="V2",t[t.V3=2]="V3",t[t.V4=3]="V4",t[t.V5=4]="V5"}(co||(co={})),function(t){t[t.Little=0]="Little",t[t.Big=1]="Big"}(uo||(uo={})),function(t){t[t.DenseArray=0]="DenseArray"}(ho||(ho={}));class go{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInt(t,e){return(e||new go).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInt(t,e){return t.setPosition(t.position()+4),(e||new go).__init(t.readInt32(t.position())+t.position(),t)}bitWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}isSigned(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startInt(t){t.startObject(2)}static addBitWidth(t,e){t.addFieldInt32(0,e,0)}static addIsSigned(t,e){t.addFieldInt8(1,+e,0)}static endInt(t){return t.endObject()}static createInt(t,e,n){return go.startInt(t),go.addBitWidth(t,e),go.addIsSigned(t,n),go.endInt(t)}}class bo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryEncoding(t,e){return(e||new bo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryEncoding(t,e){return t.setPosition(t.position()+4),(e||new bo).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}indexType(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new go).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isOrdered(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}dictionaryKind(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt16(this.bb_pos+t):ho.DenseArray}static startDictionaryEncoding(t){t.startObject(4)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addIndexType(t,e){t.addFieldOffset(1,e,0)}static addIsOrdered(t,e){t.addFieldInt8(2,+e,0)}static addDictionaryKind(t,e){t.addFieldInt16(3,e,ho.DenseArray)}static endDictionaryEncoding(t){return t.endObject()}}!function(t){t[t.NONE=0]="NONE",t[t.Null=1]="Null",t[t.Int=2]="Int",t[t.FloatingPoint=3]="FloatingPoint",t[t.Binary=4]="Binary",t[t.Utf8=5]="Utf8",t[t.Bool=6]="Bool",t[t.Decimal=7]="Decimal",t[t.Date=8]="Date",t[t.Time=9]="Time",t[t.Timestamp=10]="Timestamp",t[t.Interval=11]="Interval",t[t.List=12]="List",t[t.Struct_=13]="Struct_",t[t.Union=14]="Union",t[t.FixedSizeBinary=15]="FixedSizeBinary",t[t.FixedSizeList=16]="FixedSizeList",t[t.Map=17]="Map",t[t.Duration=18]="Duration",t[t.LargeBinary=19]="LargeBinary",t[t.LargeUtf8=20]="LargeUtf8",t[t.LargeList=21]="LargeList"}(po||(po={}));class vo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsField(t,e){return(e||new vo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsField(t,e){return t.setPosition(t.position()+4),(e||new vo).__init(t.readInt32(t.position())+t.position(),t)}name(t){const e=this.bb.__offset(this.bb_pos,4);return e?this.bb.__string(this.bb_pos+e,t):null}nullable(){const t=this.bb.__offset(this.bb_pos,6);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}typeType(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readUint8(this.bb_pos+t):po.NONE}type(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.__union(t,this.bb_pos+e):null}dictionary(t){const e=this.bb.__offset(this.bb_pos,12);return e?(t||new bo).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}children(t,e){const n=this.bb.__offset(this.bb_pos,14);return n?(e||new vo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}childrenLength(){const t=this.bb.__offset(this.bb_pos,14);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,16);return n?(e||new yo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,16);return t?this.bb.__vector_len(this.bb_pos+t):0}static startField(t){t.startObject(7)}static addName(t,e){t.addFieldOffset(0,e,0)}static addNullable(t,e){t.addFieldInt8(1,+e,0)}static addTypeType(t,e){t.addFieldInt8(2,e,po.NONE)}static addType(t,e){t.addFieldOffset(3,e,0)}static addDictionary(t,e){t.addFieldOffset(4,e,0)}static addChildren(t,e){t.addFieldOffset(5,e,0)}static createChildrenVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startChildrenVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(6,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endField(t){return t.endObject()}}class _o{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsSchema(t,e){return(e||new _o).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsSchema(t,e){return t.setPosition(t.position()+4),(e||new _o).__init(t.readInt32(t.position())+t.position(),t)}endianness(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):uo.Little}fields(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new vo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}fieldsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new yo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}features(t){const e=this.bb.__offset(this.bb_pos,10);return e?this.bb.readInt64(this.bb.__vector(this.bb_pos+e)+8*t):this.bb.createLong(0,0)}featuresLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}static startSchema(t){t.startObject(4)}static addEndianness(t,e){t.addFieldInt16(0,e,uo.Little)}static addFields(t,e){t.addFieldOffset(1,e,0)}static createFieldsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startFieldsVector(t,e){t.startVector(4,e,4)}static addCustomMetadata(t,e){t.addFieldOffset(2,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static addFeatures(t,e){t.addFieldOffset(3,e,0)}static createFeaturesVector(t,e){t.startVector(8,e.length,8);for(let n=e.length-1;n>=0;n--)t.addInt64(e[n]);return t.endVector()}static startFeaturesVector(t,e){t.startVector(8,e,8)}static endSchema(t){return t.endObject()}static finishSchemaBuffer(t,e){t.finish(e)}static finishSizePrefixedSchemaBuffer(t,e){t.finish(e,void 0,!0)}static createSchema(t,e,n,i,r){return _o.startSchema(t),_o.addEndianness(t,e),_o.addFields(t,n),_o.addCustomMetadata(t,i),_o.addFeatures(t,r),_o.endSchema(t)}}class wo{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFooter(t,e){return(e||new wo).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFooter(t,e){return t.setPosition(t.position()+4),(e||new wo).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):co.V1}schema(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new _o).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}dictionaries(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new no).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}dictionariesLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}recordBatches(t,e){const n=this.bb.__offset(this.bb_pos,10);return n?(e||new no).__init(this.bb.__vector(this.bb_pos+n)+24*t,this.bb):null}recordBatchesLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.__vector_len(this.bb_pos+t):0}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new yo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startFooter(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,co.V1)}static addSchema(t,e){t.addFieldOffset(1,e,0)}static addDictionaries(t,e){t.addFieldOffset(2,e,0)}static startDictionariesVector(t,e){t.startVector(24,e,8)}static addRecordBatches(t,e){t.addFieldOffset(3,e,0)}static startRecordBatchesVector(t,e){t.startVector(24,e,8)}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endFooter(t){return t.endObject()}static finishFooterBuffer(t,e){t.finish(e)}static finishSizePrefixedFooterBuffer(t,e){t.finish(e,void 0,!0)}}var xo=oo,So=mo,Io=fo;class Ao{constructor(t,e=Qt.V4,n,i){this.schema=t,this.version=e,n&&(this._recordBatches=n),i&&(this._dictionaryBatches=i)}static decode(t){t=new Io(je(t));const e=wo.getRootAsFooter(t),n=Fs.decode(e.schema());return new To(n,e)}static encode(t){const e=new So,n=Fs.encode(e,t.schema);wo.startRecordBatchesVector(e,t.numRecordBatches);for(const n of[...t.recordBatches()].slice().reverse())Co.encode(e,n);const i=e.endVector();wo.startDictionariesVector(e,t.numDictionaries);for(const n of[...t.dictionaryBatches()].slice().reverse())Co.encode(e,n);const r=e.endVector();return wo.startFooter(e),wo.addSchema(e,n),wo.addVersion(e,Qt.V4),wo.addRecordBatches(e,i),wo.addDictionaries(e,r),wo.finishFooterBuffer(e,wo.endFooter(e)),e.asUint8Array()}get numRecordBatches(){return this._recordBatches.length}get numDictionaries(){return this._dictionaryBatches.length}*recordBatches(){for(let t,e=-1,n=this.numRecordBatches;++e<n;)(t=this.getRecordBatch(e))&&(yield t)}*dictionaryBatches(){for(let t,e=-1,n=this.numDictionaries;++e<n;)(t=this.getDictionaryBatch(e))&&(yield t)}getRecordBatch(t){return t>=0&&t<this.numRecordBatches&&this._recordBatches[t]||null}getDictionaryBatch(t){return t>=0&&t<this.numDictionaries&&this._dictionaryBatches[t]||null}}class To extends Ao{constructor(t,e){super(t,e.version()),this._footer=e}get numRecordBatches(){return this._footer.recordBatchesLength()}get numDictionaries(){return this._footer.dictionariesLength()}getRecordBatch(t){if(t>=0&&t<this.numRecordBatches){const e=this._footer.recordBatches(t);if(e)return Co.decode(e)}return null}getDictionaryBatch(t){if(t>=0&&t<this.numDictionaries){const e=this._footer.dictionaries(t);if(e)return Co.decode(e)}return null}}class Co{constructor(t,e,n){this.metaDataLength=t,this.offset="number"==typeof n?n:n.low,this.bodyLength="number"==typeof e?e:e.low}static decode(t){return new Co(t.metaDataLength(),t.bodyLength(),t.offset())}static encode(t,e){const{metaDataLength:n}=e,i=new xo(e.offset,0),r=new xo(e.bodyLength,0);return no.createBlock(t,i,n,r)}}const No={fromIterable:t=>ko(function*(t){let e,n,i,r,s=!1,a=[],o=0;({cmd:i,size:r}=yield null);const l=(c=t,function*(t,e){const n=function*(t){yield t},i="string"==typeof e||ArrayBuffer.isView(e)||e instanceof ArrayBuffer||e instanceof Fe?n(e):Ne(e)?e:n(e);return yield*ze(function*(e){let n=null;do{n=e.next(yield Re(t,n))}while(!n.done)}(i[Symbol.iterator]())),new t}(Uint8Array,c))[Symbol.iterator]();var c;try{do{if(({done:e,value:n}=Number.isNaN(r-o)?l.next():l.next(r-o)),!e&&n.byteLength>0&&(a.push(n),o+=n.byteLength),e||r<=o)do{({cmd:i,size:r}=yield"peek"===i?Ue(a,r)[0]:([n,a,o]=Ue(a,r),n))}while(r<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof l.throw&&l.throw(t)}finally{!1===s&&"function"==typeof l.return&&l.return(null)}return null}(t)),fromAsyncIterable:t=>ko(function(t){return he(this,arguments,(function*(){let e,n,i,r,s=!1,a=[],o=0;({cmd:i,size:r}=yield yield ue(null));const l=He(t)[Symbol.asyncIterator]();try{do{if(({done:e,value:n}=Number.isNaN(r-o)?yield ue(l.next()):yield ue(l.next(r-o))),!e&&n.byteLength>0&&(a.push(n),o+=n.byteLength),e||r<=o)do{({cmd:i,size:r}=yield yield ue("peek"===i?Ue(a,r)[0]:([n,a,o]=Ue(a,r),n)))}while(r<o)}while(!e)}catch(t){(s=!0)&&"function"==typeof l.throw&&(yield ue(l.throw(t)))}finally{!1===s&&"function"==typeof l.return&&(yield ue(l.return(new Uint8Array(0))))}return yield ue(null)}))}(t)),fromDOMStream:t=>ko(function(t){return he(this,arguments,(function*(){let e,n,i,r=!1,s=!1,a=[],o=0;({cmd:n,size:i}=yield yield ue(null));const l=new Eo(t);try{do{if(({done:r,value:e}=Number.isNaN(i-o)?yield ue(l.read()):yield ue(l.read(i-o))),!r&&e.byteLength>0&&(a.push(je(e)),o+=e.byteLength),r||i<=o)do{({cmd:n,size:i}=yield yield ue("peek"===n?Ue(a,i)[0]:([e,a,o]=Ue(a,i),e)))}while(i<o)}while(!r)}catch(t){(s=!0)&&(yield ue(l.cancel(t)))}finally{!1===s?yield ue(l.cancel()):t.locked&&l.releaseLock()}return yield ue(null)}))}(t)),fromNodeStream:t=>ko(function(t){return he(this,arguments,(function*(){const e=[];let n,i,r,s="error",a=!1,o=null,l=0,c=[];if(({cmd:n,size:i}=yield yield ue(null)),t.isTTY)return yield yield ue(new Uint8Array(0)),yield ue(null);try{e[0]=Oo(t,"end"),e[1]=Oo(t,"error");do{if(e[2]=Oo(t,"readable"),[s,o]=yield ue(Promise.race(e.map((t=>t[2])))),"error"===s)break;if((a="end"===s)||(Number.isFinite(i-l)?(r=je(t.read(i-l)),r.byteLength<i-l&&(r=je(t.read()))):r=je(t.read()),r.byteLength>0&&(c.push(r),l+=r.byteLength)),a||i<=l)do{({cmd:n,size:i}=yield yield ue("peek"===n?Ue(c,i)[0]:([r,c,l]=Ue(c,i),r)))}while(i<l)}while(!a)}finally{yield ue(function(e,n){return r=c=null,new Promise(((i,r)=>{for(const[n,i]of e)t.off(n,i);try{const e=t.destroy;e&&e.call(t,n),n=void 0}catch(t){n=t||n}finally{null!=n?r(n):i()}}))}(e,"error"===s?o:null))}return yield ue(null)}))}(t)),toDOMStream(t,e){throw new Error('"toDOMStream" not available in this environment')},toNodeStream(t,e){throw new Error('"toNodeStream" not available in this environment')}},ko=t=>(t.next(),t);class Eo{constructor(t){this.source=t,this.reader=null,this.reader=this.source.getReader(),this.reader.closed.catch((()=>{}))}get closed(){return this.reader?this.reader.closed.catch((()=>{})):Promise.resolve()}releaseLock(){this.reader&&this.reader.releaseLock(),this.reader=null}cancel(t){return ce(this,void 0,void 0,(function*(){const{reader:e,source:n}=this;e&&(yield e.cancel(t).catch((()=>{}))),n&&n.locked&&this.releaseLock()}))}read(t){return ce(this,void 0,void 0,(function*(){if(0===t)return{done:null==this.reader,value:new Uint8Array(0)};const e=yield this.reader.read();return!e.done&&(e.value=je(e)),e}))}}const Oo=(t,e)=>{const n=t=>i([e,t]);let i;return[e,n,new Promise((r=>(i=r)&&t.once(e,n)))]},Mo=Object.freeze({done:!0,value:void 0});class Do{constructor(t){this._json=t}get schema(){return this._json.schema}get batches(){return this._json.batches||[]}get dictionaries(){return this._json.dictionaries||[]}}class Bo{tee(){return this._getDOMStream().tee()}pipe(t,e){return this._getNodeStream().pipe(t,e)}pipeTo(t,e){return this._getDOMStream().pipeTo(t,e)}pipeThrough(t,e){return this._getDOMStream().pipeThrough(t,e)}_getDOMStream(){return this._DOMStream||(this._DOMStream=this.toDOMStream())}_getNodeStream(){return this._nodeStream||(this._nodeStream=this.toNodeStream())}}class Lo extends Bo{constructor(){super(),this._values=[],this.resolvers=[],this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}get closed(){return this._closedPromise}cancel(t){return ce(this,void 0,void 0,(function*(){yield this.return(t)}))}write(t){this._ensureOpen()&&(this.resolvers.length<=0?this._values.push(t):this.resolvers.shift().resolve({done:!1,value:t}))}abort(t){this._closedPromiseResolve&&(this.resolvers.length<=0?this._error={error:t}:this.resolvers.shift().reject({done:!0,value:t}))}close(){if(this._closedPromiseResolve){const{resolvers:t}=this;for(;t.length>0;)t.shift().resolve(Mo);this._closedPromiseResolve(),this._closedPromiseResolve=void 0}}[Symbol.asyncIterator](){return this}toDOMStream(t){return No.toDOMStream(this._closedPromiseResolve||this._error?this:this._values,t)}toNodeStream(t){return No.toNodeStream(this._closedPromiseResolve||this._error?this:this._values,t)}throw(t){return ce(this,void 0,void 0,(function*(){return yield this.abort(t),Mo}))}return(t){return ce(this,void 0,void 0,(function*(){return yield this.close(),Mo}))}read(t){return ce(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return ce(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(...t){return this._values.length>0?Promise.resolve({done:!1,value:this._values.shift()}):this._error?Promise.reject({done:!0,value:this._error.error}):this._closedPromiseResolve?new Promise(((t,e)=>{this.resolvers.push({resolve:t,reject:e})})):Promise.resolve(Mo)}_ensureOpen(){if(this._closedPromiseResolve)return!0;throw new Error("AsyncQueue is closed")}}class Po extends Lo{write(t){if((t=je(t)).byteLength>0)return super.write(t)}toString(t=!1){return t?me(this.toUint8Array(!0)):this.toUint8Array(!1).then(me)}toUint8Array(t=!1){return t?Ue(this._values)[0]:(()=>ce(this,void 0,void 0,(function*(){var t,e;const n=[];let i=0;try{for(var r,s=pe(this);!(r=yield s.next()).done;){const t=r.value;n.push(t),i+=t.byteLength}}catch(e){t={error:e}}finally{try{r&&!r.done&&(e=s.return)&&(yield e.call(s))}finally{if(t)throw t.error}}return Ue(n,i)[0]})))()}}class Fo{constructor(t){t&&(this.source=new Uo(No.fromIterable(t)))}[Symbol.iterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Vo{constructor(t){t instanceof Vo?this.source=t.source:t instanceof Po?this.source=new Ro(No.fromAsyncIterable(t)):Pe(t)?this.source=new Ro(No.fromNodeStream(t)):Le(t)?this.source=new Ro(No.fromDOMStream(t)):De(t)?this.source=new Ro(No.fromDOMStream(t.body)):Ne(t)?this.source=new Ro(No.fromIterable(t)):(Ce(t)||ke(t))&&(this.source=new Ro(No.fromAsyncIterable(t)))}[Symbol.asyncIterator](){return this}next(t){return this.source.next(t)}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}get closed(){return this.source.closed}cancel(t){return this.source.cancel(t)}peek(t){return this.source.peek(t)}read(t){return this.source.read(t)}}class Uo{constructor(t){this.source=t}cancel(t){this.return(t)}peek(t){return this.next(t,"peek").value}read(t){return this.next(t,"read").value}next(t,e="read"){return this.source.next({cmd:e,size:t})}throw(t){return Object.create(this.source.throw&&this.source.throw(t)||Mo)}return(t){return Object.create(this.source.return&&this.source.return(t)||Mo)}}class Ro{constructor(t){this.source=t,this._closedPromise=new Promise((t=>this._closedPromiseResolve=t))}cancel(t){return ce(this,void 0,void 0,(function*(){yield this.return(t)}))}get closed(){return this._closedPromise}read(t){return ce(this,void 0,void 0,(function*(){return(yield this.next(t,"read")).value}))}peek(t){return ce(this,void 0,void 0,(function*(){return(yield this.next(t,"peek")).value}))}next(t,e="read"){return ce(this,void 0,void 0,(function*(){return yield this.source.next({cmd:e,size:t})}))}throw(t){return ce(this,void 0,void 0,(function*(){const e=this.source.throw&&(yield this.source.throw(t))||Mo;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}return(t){return ce(this,void 0,void 0,(function*(){const e=this.source.return&&(yield this.source.return(t))||Mo;return this._closedPromiseResolve&&this._closedPromiseResolve(),this._closedPromiseResolve=void 0,Object.create(e)}))}}class $o extends Fo{constructor(t,e){super(),this.position=0,this.buffer=je(t),this.size=void 0===e?this.buffer.byteLength:e}readInt32(t){const{buffer:e,byteOffset:n}=this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}seek(t){return this.position=Math.min(t,this.size),t<this.size}read(t){const{buffer:e,size:n,position:i}=this;return e&&i<n?("number"!=typeof t&&(t=Number.POSITIVE_INFINITY),this.position=Math.min(n,i+Math.min(n-i,t)),e.subarray(i,this.position)):null}readAt(t,e){const n=this.buffer,i=Math.min(this.size,t+e);return n?n.subarray(t,i):new Uint8Array(e)}close(){this.buffer&&(this.buffer=null)}throw(t){return this.close(),{done:!0,value:t}}return(t){return this.close(),{done:!0,value:t}}}class jo extends Vo{constructor(t,e){super(),this.position=0,this._handle=t,"number"==typeof e?this.size=e:this._pending=(()=>ce(this,void 0,void 0,(function*(){this.size=(yield t.stat()).size,delete this._pending})))()}readInt32(t){return ce(this,void 0,void 0,(function*(){const{buffer:e,byteOffset:n}=yield this.readAt(t,4);return new DataView(e,n).getInt32(0,!0)}))}seek(t){return ce(this,void 0,void 0,(function*(){return this._pending&&(yield this._pending),this.position=Math.min(t,this.size),t<this.size}))}read(t){return ce(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:e,size:n,position:i}=this;if(e&&i<n){"number"!=typeof t&&(t=Number.POSITIVE_INFINITY);let r=i,s=0,a=0;const o=Math.min(n,r+Math.min(n-r,t)),l=new Uint8Array(Math.max(0,(this.position=o)-r));for(;(r+=a)<o&&(s+=a)<l.byteLength;)({bytesRead:a}=yield e.read(l,s,l.byteLength-s,r));return l}return null}))}readAt(t,e){return ce(this,void 0,void 0,(function*(){this._pending&&(yield this._pending);const{_handle:n,size:i}=this;if(n&&t+e<i){const r=Math.min(i,t+e),s=new Uint8Array(r-t);return(yield n.read(s,0,e,t)).buffer}return new Uint8Array(e)}))}close(){return ce(this,void 0,void 0,(function*(){const t=this._handle;this._handle=null,t&&(yield t.close())}))}throw(t){return ce(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}return(t){return ce(this,void 0,void 0,(function*(){return yield this.close(),{done:!0,value:t}}))}}function zo(t){return t<0&&(t=4294967295+t+1),`0x${t.toString(16)}`}const Wo=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8];class Ho{constructor(t){this.buffer=t}high(){return this.buffer[1]}low(){return this.buffer[0]}_times(t){const e=new Uint32Array([this.buffer[1]>>>16,65535&this.buffer[1],this.buffer[0]>>>16,65535&this.buffer[0]]),n=new Uint32Array([t.buffer[1]>>>16,65535&t.buffer[1],t.buffer[0]>>>16,65535&t.buffer[0]]);let i=e[3]*n[3];this.buffer[0]=65535&i;let r=i>>>16;return i=e[2]*n[3],r+=i,i=e[3]*n[2]>>>0,r+=i,this.buffer[0]+=r<<16,this.buffer[1]=r>>>0<i?65536:0,this.buffer[1]+=r>>>16,this.buffer[1]+=e[1]*n[3]+e[2]*n[2]+e[3]*n[1],this.buffer[1]+=e[0]*n[3]+e[1]*n[2]+e[2]*n[1]+e[3]*n[0]<<16,this}_plus(t){const e=this.buffer[0]+t.buffer[0]>>>0;this.buffer[1]+=t.buffer[1],e<this.buffer[0]>>>0&&++this.buffer[1],this.buffer[0]=e}lessThan(t){return this.buffer[1]<t.buffer[1]||this.buffer[1]===t.buffer[1]&&this.buffer[0]<t.buffer[0]}equals(t){return this.buffer[1]===t.buffer[1]&&this.buffer[0]==t.buffer[0]}greaterThan(t){return t.lessThan(this)}hex(){return`${zo(this.buffer[1])} ${zo(this.buffer[0])}`}}class qo extends Ho{times(t){return this._times(t),this}plus(t){return this._plus(t),this}static from(t,e=new Uint32Array(2)){return qo.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return qo.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.length,i=new qo(e);for(let e=0;e<n;){const r=8<n-e?8:n-e,s=new qo(new Uint32Array([Number.parseInt(t.slice(e,e+r),10),0])),a=new qo(new Uint32Array([Wo[r],0]));i.times(a),i.plus(s),e+=r}return i}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,i=t.length;++n<i;)qo.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new qo(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new qo(new Uint32Array(t.buffer)).plus(e)}}class Go extends Ho{negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],0==this.buffer[0]&&++this.buffer[1],this}times(t){return this._times(t),this}plus(t){return this._plus(t),this}lessThan(t){const e=this.buffer[1]<<0,n=t.buffer[1]<<0;return e<n||e===n&&this.buffer[0]<t.buffer[0]}static from(t,e=new Uint32Array(2)){return Go.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(2)){return Go.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(2)){const n=t.startsWith("-"),i=t.length,r=new Go(e);for(let e=n?1:0;e<i;){const n=8<i-e?8:i-e,s=new Go(new Uint32Array([Number.parseInt(t.slice(e,e+n),10),0])),a=new Go(new Uint32Array([Wo[n],0]));r.times(a),r.plus(s),e+=n}return n?r.negate():r}static convertArray(t){const e=new Uint32Array(2*t.length);for(let n=-1,i=t.length;++n<i;)Go.from(t[n],new Uint32Array(e.buffer,e.byteOffset+2*n*4,2));return e}static multiply(t,e){return new Go(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Go(new Uint32Array(t.buffer)).plus(e)}}class Yo{constructor(t){this.buffer=t}high(){return new Go(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2))}low(){return new Go(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset,2))}negate(){return this.buffer[0]=1+~this.buffer[0],this.buffer[1]=~this.buffer[1],this.buffer[2]=~this.buffer[2],this.buffer[3]=~this.buffer[3],0==this.buffer[0]&&++this.buffer[1],0==this.buffer[1]&&++this.buffer[2],0==this.buffer[2]&&++this.buffer[3],this}times(t){const e=new qo(new Uint32Array([this.buffer[3],0])),n=new qo(new Uint32Array([this.buffer[2],0])),i=new qo(new Uint32Array([this.buffer[1],0])),r=new qo(new Uint32Array([this.buffer[0],0])),s=new qo(new Uint32Array([t.buffer[3],0])),a=new qo(new Uint32Array([t.buffer[2],0])),o=new qo(new Uint32Array([t.buffer[1],0])),l=new qo(new Uint32Array([t.buffer[0],0]));let c=qo.multiply(r,l);this.buffer[0]=c.low();const u=new qo(new Uint32Array([c.high(),0]));return c=qo.multiply(i,l),u.plus(c),c=qo.multiply(r,o),u.plus(c),this.buffer[1]=u.low(),this.buffer[3]=u.lessThan(c)?1:0,this.buffer[2]=u.high(),new qo(new Uint32Array(this.buffer.buffer,this.buffer.byteOffset+8,2)).plus(qo.multiply(n,l)).plus(qo.multiply(i,o)).plus(qo.multiply(r,a)),this.buffer[3]+=qo.multiply(e,l).plus(qo.multiply(n,o)).plus(qo.multiply(i,a)).plus(qo.multiply(r,s)).low(),this}plus(t){const e=new Uint32Array(4);return e[3]=this.buffer[3]+t.buffer[3]>>>0,e[2]=this.buffer[2]+t.buffer[2]>>>0,e[1]=this.buffer[1]+t.buffer[1]>>>0,e[0]=this.buffer[0]+t.buffer[0]>>>0,e[0]<this.buffer[0]>>>0&&++e[1],e[1]<this.buffer[1]>>>0&&++e[2],e[2]<this.buffer[2]>>>0&&++e[3],this.buffer[3]=e[3],this.buffer[2]=e[2],this.buffer[1]=e[1],this.buffer[0]=e[0],this}hex(){return`${zo(this.buffer[3])} ${zo(this.buffer[2])} ${zo(this.buffer[1])} ${zo(this.buffer[0])}`}static multiply(t,e){return new Yo(new Uint32Array(t.buffer)).times(e)}static add(t,e){return new Yo(new Uint32Array(t.buffer)).plus(e)}static from(t,e=new Uint32Array(4)){return Yo.fromString("string"==typeof t?t:t.toString(),e)}static fromNumber(t,e=new Uint32Array(4)){return Yo.fromString(t.toString(),e)}static fromString(t,e=new Uint32Array(4)){const n=t.startsWith("-"),i=t.length,r=new Yo(e);for(let e=n?1:0;e<i;){const n=8<i-e?8:i-e,s=new Yo(new Uint32Array([Number.parseInt(t.slice(e,e+n),10),0,0,0])),a=new Yo(new Uint32Array([Wo[n],0,0,0]));r.times(a),r.plus(s),e+=n}return n?r.negate():r}static convertArray(t){const e=new Uint32Array(4*t.length);for(let n=-1,i=t.length;++n<i;)Yo.from(t[n],new Uint32Array(e.buffer,e.byteOffset+16*n,4));return e}}class Ko extends ui{constructor(t,e,n,i){super(),this.nodesIndex=-1,this.buffersIndex=-1,this.bytes=t,this.nodes=e,this.buffers=n,this.dictionaries=i}visit(t){return super.visit(t instanceof Vs?t.type:t)}visitNull(t,{length:e}=this.nextFieldNode()){return hs({type:t,length:e})}visitBool(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitInt(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFloat(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitUtf8(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),data:this.readData(t)})}visitFixedSizeBinary(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDate(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTimestamp(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitTime(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitDecimal(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitList(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}visitStruct(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),children:this.visitMany(t.children)})}visitUnion(t){return t.mode===Zt.Sparse?this.visitSparseUnion(t):this.visitDenseUnion(t)}visitDenseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),valueOffsets:this.readOffsets(t),children:this.visitMany(t.children)})}visitSparseUnion(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),typeIds:this.readTypeIds(t),children:this.visitMany(t.children)})}visitDictionary(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t.indices),dictionary:this.readDictionary(t)})}visitInterval(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),data:this.readData(t)})}visitFixedSizeList(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),child:this.visit(t.children[0])})}visitMap(t,{length:e,nullCount:n}=this.nextFieldNode()){return hs({type:t,length:e,nullCount:n,nullBitmap:this.readNullBitmap(t,n),valueOffsets:this.readOffsets(t),child:this.visit(t.children[0])})}nextFieldNode(){return this.nodes[++this.nodesIndex]}nextBufferRange(){return this.buffers[++this.buffersIndex]}readNullBitmap(t,e,n=this.nextBufferRange()){return e>0&&this.readData(t,n)||new Uint8Array(0)}readOffsets(t,e){return this.readData(t,e)}readTypeIds(t,e){return this.readData(t,e)}readData(t,{length:e,offset:n}=this.nextBufferRange()){return this.bytes.subarray(n,n+e)}readDictionary(t){return this.dictionaries.get(t.id)}}class Jo extends Ko{constructor(t,e,n,i){super(new Uint8Array(0),e,n,i),this.sources=t}readNullBitmap(t,e,{offset:n}=this.nextBufferRange()){return e<=0?new Uint8Array(0):$r(this.sources[n])}readOffsets(t,{offset:e}=this.nextBufferRange()){return Re(Uint8Array,Re(Int32Array,this.sources[e]))}readTypeIds(t,{offset:e}=this.nextBufferRange()){return Re(Uint8Array,Re(t.ArrayType,this.sources[e]))}readData(t,{offset:e}=this.nextBufferRange()){const{sources:n}=this;return Sn.isTimestamp(t)||(Sn.isInt(t)||Sn.isTime(t))&&64===t.bitWidth||Sn.isDate(t)&&t.unit===te.MILLISECOND?Re(Uint8Array,Go.convertArray(n[e])):Sn.isDecimal(t)?Re(Uint8Array,Yo.convertArray(n[e])):Sn.isBinary(t)||Sn.isFixedSizeBinary(t)?function(t){const e=t.join(""),n=new Uint8Array(e.length/2);for(let t=0;t<e.length;t+=2)n[t>>1]=Number.parseInt(e.slice(t,t+2),16);return n}(n[e]):Sn.isBool(t)?$r(n[e]):Sn.isUtf8(t)?ge(n[e].join("")):Re(Uint8Array,Re(t.ArrayType,n[e].map((t=>+t))))}}var Qo,Zo,Xo,tl,el,nl,il,rl;!function(t){t[t.BUFFER=0]="BUFFER"}(Qo||(Qo={})),function(t){t[t.LZ4_FRAME=0]="LZ4_FRAME",t[t.ZSTD=1]="ZSTD"}(Zo||(Zo={}));class sl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBodyCompression(t,e){return(e||new sl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBodyCompression(t,e){return t.setPosition(t.position()+4),(e||new sl).__init(t.readInt32(t.position())+t.position(),t)}codec(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt8(this.bb_pos+t):Zo.LZ4_FRAME}method(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt8(this.bb_pos+t):Qo.BUFFER}static startBodyCompression(t){t.startObject(2)}static addCodec(t,e){t.addFieldInt8(0,e,Zo.LZ4_FRAME)}static addMethod(t,e){t.addFieldInt8(1,e,Qo.BUFFER)}static endBodyCompression(t){return t.endObject()}static createBodyCompression(t,e,n){return sl.startBodyCompression(t),sl.addCodec(t,e),sl.addMethod(t,n),sl.endBodyCompression(t)}}class al{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}offset(){return this.bb.readInt64(this.bb_pos)}length(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createBuffer(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class ol{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}length(){return this.bb.readInt64(this.bb_pos)}nullCount(){return this.bb.readInt64(this.bb_pos+8)}static sizeOf(){return 16}static createFieldNode(t,e,n){return t.prep(8,16),t.writeInt64(n),t.writeInt64(e),t.offset()}}class ll{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsRecordBatch(t,e){return(e||new ll).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsRecordBatch(t,e){return t.setPosition(t.position()+4),(e||new ll).__init(t.readInt32(t.position())+t.position(),t)}length(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}nodes(t,e){const n=this.bb.__offset(this.bb_pos,6);return n?(e||new ol).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}nodesLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}buffers(t,e){const n=this.bb.__offset(this.bb_pos,8);return n?(e||new al).__init(this.bb.__vector(this.bb_pos+n)+16*t,this.bb):null}buffersLength(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.__vector_len(this.bb_pos+t):0}compression(t){const e=this.bb.__offset(this.bb_pos,10);return e?(t||new sl).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}static startRecordBatch(t){t.startObject(4)}static addLength(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addNodes(t,e){t.addFieldOffset(1,e,0)}static startNodesVector(t,e){t.startVector(16,e,8)}static addBuffers(t,e){t.addFieldOffset(2,e,0)}static startBuffersVector(t,e){t.startVector(16,e,8)}static addCompression(t,e){t.addFieldOffset(3,e,0)}static endRecordBatch(t){return t.endObject()}}class cl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDictionaryBatch(t,e){return(e||new cl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDictionaryBatch(t,e){return t.setPosition(t.position()+4),(e||new cl).__init(t.readInt32(t.position())+t.position(),t)}id(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}data(t){const e=this.bb.__offset(this.bb_pos,6);return e?(t||new ll).__init(this.bb.__indirect(this.bb_pos+e),this.bb):null}isDelta(){const t=this.bb.__offset(this.bb_pos,8);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startDictionaryBatch(t){t.startObject(3)}static addId(t,e){t.addFieldInt64(0,e,t.createLong(0,0))}static addData(t,e){t.addFieldOffset(1,e,0)}static addIsDelta(t,e){t.addFieldInt8(2,+e,0)}static endDictionaryBatch(t){return t.endObject()}}!function(t){t[t.HALF=0]="HALF",t[t.SINGLE=1]="SINGLE",t[t.DOUBLE=2]="DOUBLE"}(Xo||(Xo={}));class ul{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFloatingPoint(t,e){return(e||new ul).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFloatingPoint(t,e){return t.setPosition(t.position()+4),(e||new ul).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):Xo.HALF}static startFloatingPoint(t){t.startObject(1)}static addPrecision(t,e){t.addFieldInt16(0,e,Xo.HALF)}static endFloatingPoint(t){return t.endObject()}static createFloatingPoint(t,e){return ul.startFloatingPoint(t),ul.addPrecision(t,e),ul.endFloatingPoint(t)}}class hl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDecimal(t,e){return(e||new hl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDecimal(t,e){return t.setPosition(t.position()+4),(e||new hl).__init(t.readInt32(t.position())+t.position(),t)}precision(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}scale(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):0}bitWidth(){const t=this.bb.__offset(this.bb_pos,8);return t?this.bb.readInt32(this.bb_pos+t):128}static startDecimal(t){t.startObject(3)}static addPrecision(t,e){t.addFieldInt32(0,e,0)}static addScale(t,e){t.addFieldInt32(1,e,0)}static addBitWidth(t,e){t.addFieldInt32(2,e,128)}static endDecimal(t){return t.endObject()}static createDecimal(t,e,n,i){return hl.startDecimal(t),hl.addPrecision(t,e),hl.addScale(t,n),hl.addBitWidth(t,i),hl.endDecimal(t)}}!function(t){t[t.DAY=0]="DAY",t[t.MILLISECOND=1]="MILLISECOND"}(tl||(tl={}));class dl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsDate(t,e){return(e||new dl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsDate(t,e){return t.setPosition(t.position()+4),(e||new dl).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):tl.MILLISECOND}static startDate(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,tl.MILLISECOND)}static endDate(t){return t.endObject()}static createDate(t,e){return dl.startDate(t),dl.addUnit(t,e),dl.endDate(t)}}!function(t){t[t.SECOND=0]="SECOND",t[t.MILLISECOND=1]="MILLISECOND",t[t.MICROSECOND=2]="MICROSECOND",t[t.NANOSECOND=3]="NANOSECOND"}(el||(el={}));class pl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTime(t,e){return(e||new pl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTime(t,e){return t.setPosition(t.position()+4),(e||new pl).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):el.MILLISECOND}bitWidth(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readInt32(this.bb_pos+t):32}static startTime(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,el.MILLISECOND)}static addBitWidth(t,e){t.addFieldInt32(1,e,32)}static endTime(t){return t.endObject()}static createTime(t,e,n){return pl.startTime(t),pl.addUnit(t,e),pl.addBitWidth(t,n),pl.endTime(t)}}class fl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsTimestamp(t,e){return(e||new fl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsTimestamp(t,e){return t.setPosition(t.position()+4),(e||new fl).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):el.SECOND}timezone(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.__string(this.bb_pos+e,t):null}static startTimestamp(t){t.startObject(2)}static addUnit(t,e){t.addFieldInt16(0,e,el.SECOND)}static addTimezone(t,e){t.addFieldOffset(1,e,0)}static endTimestamp(t){return t.endObject()}static createTimestamp(t,e,n){return fl.startTimestamp(t),fl.addUnit(t,e),fl.addTimezone(t,n),fl.endTimestamp(t)}}!function(t){t[t.YEAR_MONTH=0]="YEAR_MONTH",t[t.DAY_TIME=1]="DAY_TIME",t[t.MONTH_DAY_NANO=2]="MONTH_DAY_NANO"}(nl||(nl={}));class ml{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsInterval(t,e){return(e||new ml).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsInterval(t,e){return t.setPosition(t.position()+4),(e||new ml).__init(t.readInt32(t.position())+t.position(),t)}unit(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):nl.YEAR_MONTH}static startInterval(t){t.startObject(1)}static addUnit(t,e){t.addFieldInt16(0,e,nl.YEAR_MONTH)}static endInterval(t){return t.endObject()}static createInterval(t,e){return ml.startInterval(t),ml.addUnit(t,e),ml.endInterval(t)}}!function(t){t[t.Sparse=0]="Sparse",t[t.Dense=1]="Dense"}(il||(il={}));class yl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUnion(t,e){return(e||new yl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUnion(t,e){return t.setPosition(t.position()+4),(e||new yl).__init(t.readInt32(t.position())+t.position(),t)}mode(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):il.Sparse}typeIds(t){const e=this.bb.__offset(this.bb_pos,6);return e?this.bb.readInt32(this.bb.__vector(this.bb_pos+e)+4*t):0}typeIdsLength(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.__vector_len(this.bb_pos+t):0}typeIdsArray(){const t=this.bb.__offset(this.bb_pos,6);return t?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+t),this.bb.__vector_len(this.bb_pos+t)):null}static startUnion(t){t.startObject(2)}static addMode(t,e){t.addFieldInt16(0,e,il.Sparse)}static addTypeIds(t,e){t.addFieldOffset(1,e,0)}static createTypeIdsVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addInt32(e[n]);return t.endVector()}static startTypeIdsVector(t,e){t.startVector(4,e,4)}static endUnion(t){return t.endObject()}static createUnion(t,e,n){return yl.startUnion(t),yl.addMode(t,e),yl.addTypeIds(t,n),yl.endUnion(t)}}class gl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeBinary(t,e){return(e||new gl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeBinary(t,e){return t.setPosition(t.position()+4),(e||new gl).__init(t.readInt32(t.position())+t.position(),t)}byteWidth(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeBinary(t){t.startObject(1)}static addByteWidth(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeBinary(t){return t.endObject()}static createFixedSizeBinary(t,e){return gl.startFixedSizeBinary(t),gl.addByteWidth(t,e),gl.endFixedSizeBinary(t)}}class bl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsFixedSizeList(t,e){return(e||new bl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsFixedSizeList(t,e){return t.setPosition(t.position()+4),(e||new bl).__init(t.readInt32(t.position())+t.position(),t)}listSize(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt32(this.bb_pos+t):0}static startFixedSizeList(t){t.startObject(1)}static addListSize(t,e){t.addFieldInt32(0,e,0)}static endFixedSizeList(t){return t.endObject()}static createFixedSizeList(t,e){return bl.startFixedSizeList(t),bl.addListSize(t,e),bl.endFixedSizeList(t)}}class vl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMap(t,e){return(e||new vl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMap(t,e){return t.setPosition(t.position()+4),(e||new vl).__init(t.readInt32(t.position())+t.position(),t)}keysSorted(){const t=this.bb.__offset(this.bb_pos,4);return!!t&&!!this.bb.readInt8(this.bb_pos+t)}static startMap(t){t.startObject(1)}static addKeysSorted(t,e){t.addFieldInt8(0,+e,0)}static endMap(t){return t.endObject()}static createMap(t,e){return vl.startMap(t),vl.addKeysSorted(t,e),vl.endMap(t)}}!function(t){t[t.NONE=0]="NONE",t[t.Schema=1]="Schema",t[t.DictionaryBatch=2]="DictionaryBatch",t[t.RecordBatch=3]="RecordBatch",t[t.Tensor=4]="Tensor",t[t.SparseTensor=5]="SparseTensor"}(rl||(rl={}));class _l{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsMessage(t,e){return(e||new _l).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsMessage(t,e){return t.setPosition(t.position()+4),(e||new _l).__init(t.readInt32(t.position())+t.position(),t)}version(){const t=this.bb.__offset(this.bb_pos,4);return t?this.bb.readInt16(this.bb_pos+t):co.V1}headerType(){const t=this.bb.__offset(this.bb_pos,6);return t?this.bb.readUint8(this.bb_pos+t):rl.NONE}header(t){const e=this.bb.__offset(this.bb_pos,8);return e?this.bb.__union(t,this.bb_pos+e):null}bodyLength(){const t=this.bb.__offset(this.bb_pos,10);return t?this.bb.readInt64(this.bb_pos+t):this.bb.createLong(0,0)}customMetadata(t,e){const n=this.bb.__offset(this.bb_pos,12);return n?(e||new yo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+n)+4*t),this.bb):null}customMetadataLength(){const t=this.bb.__offset(this.bb_pos,12);return t?this.bb.__vector_len(this.bb_pos+t):0}static startMessage(t){t.startObject(5)}static addVersion(t,e){t.addFieldInt16(0,e,co.V1)}static addHeaderType(t,e){t.addFieldInt8(1,e,rl.NONE)}static addHeader(t,e){t.addFieldOffset(2,e,0)}static addBodyLength(t,e){t.addFieldInt64(3,e,t.createLong(0,0))}static addCustomMetadata(t,e){t.addFieldOffset(4,e,0)}static createCustomMetadataVector(t,e){t.startVector(4,e.length,4);for(let n=e.length-1;n>=0;n--)t.addOffset(e[n]);return t.endVector()}static startCustomMetadataVector(t,e){t.startVector(4,e,4)}static endMessage(t){return t.endObject()}static finishMessageBuffer(t,e){t.finish(e)}static finishSizePrefixedMessageBuffer(t,e){t.finish(e,void 0,!0)}static createMessage(t,e,n,i,r,s){return _l.startMessage(t),_l.addVersion(t,e),_l.addHeaderType(t,n),_l.addHeader(t,i),_l.addBodyLength(t,r),_l.addCustomMetadata(t,s),_l.endMessage(t)}}class wl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsNull(t,e){return(e||new wl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsNull(t,e){return t.setPosition(t.position()+4),(e||new wl).__init(t.readInt32(t.position())+t.position(),t)}static startNull(t){t.startObject(0)}static endNull(t){return t.endObject()}static createNull(t){return wl.startNull(t),wl.endNull(t)}}class xl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBinary(t,e){return(e||new xl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBinary(t,e){return t.setPosition(t.position()+4),(e||new xl).__init(t.readInt32(t.position())+t.position(),t)}static startBinary(t){t.startObject(0)}static endBinary(t){return t.endObject()}static createBinary(t){return xl.startBinary(t),xl.endBinary(t)}}class Sl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsBool(t,e){return(e||new Sl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsBool(t,e){return t.setPosition(t.position()+4),(e||new Sl).__init(t.readInt32(t.position())+t.position(),t)}static startBool(t){t.startObject(0)}static endBool(t){return t.endObject()}static createBool(t){return Sl.startBool(t),Sl.endBool(t)}}class Il{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsUtf8(t,e){return(e||new Il).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsUtf8(t,e){return t.setPosition(t.position()+4),(e||new Il).__init(t.readInt32(t.position())+t.position(),t)}static startUtf8(t){t.startObject(0)}static endUtf8(t){return t.endObject()}static createUtf8(t){return Il.startUtf8(t),Il.endUtf8(t)}}class Al{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsList(t,e){return(e||new Al).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsList(t,e){return t.setPosition(t.position()+4),(e||new Al).__init(t.readInt32(t.position())+t.position(),t)}static startList(t){t.startObject(0)}static endList(t){return t.endObject()}static createList(t){return Al.startList(t),Al.endList(t)}}class Tl{constructor(){this.bb=null,this.bb_pos=0}__init(t,e){return this.bb_pos=t,this.bb=e,this}static getRootAsStruct_(t,e){return(e||new Tl).__init(t.readInt32(t.position())+t.position(),t)}static getSizePrefixedRootAsStruct_(t,e){return t.setPosition(t.position()+4),(e||new Tl).__init(t.readInt32(t.position())+t.position(),t)}static startStruct_(t){t.startObject(0)}static endStruct_(t){return t.endObject()}static createStruct_(t){return Tl.startStruct_(t),Tl.endStruct_(t)}}var Cl=oo;const Nl=new class extends ui{visit(t,e){return null==t||null==e?void 0:super.visit(t,e)}visitNull(t,e){return wl.startNull(e),wl.endNull(e)}visitInt(t,e){return go.startInt(e),go.addBitWidth(e,t.bitWidth),go.addIsSigned(e,t.isSigned),go.endInt(e)}visitFloat(t,e){return ul.startFloatingPoint(e),ul.addPrecision(e,t.precision),ul.endFloatingPoint(e)}visitBinary(t,e){return xl.startBinary(e),xl.endBinary(e)}visitBool(t,e){return Sl.startBool(e),Sl.endBool(e)}visitUtf8(t,e){return Il.startUtf8(e),Il.endUtf8(e)}visitDecimal(t,e){return hl.startDecimal(e),hl.addScale(e,t.scale),hl.addPrecision(e,t.precision),hl.addBitWidth(e,t.bitWidth),hl.endDecimal(e)}visitDate(t,e){return dl.startDate(e),dl.addUnit(e,t.unit),dl.endDate(e)}visitTime(t,e){return pl.startTime(e),pl.addUnit(e,t.unit),pl.addBitWidth(e,t.bitWidth),pl.endTime(e)}visitTimestamp(t,e){const n=t.timezone&&e.createString(t.timezone)||void 0;return fl.startTimestamp(e),fl.addUnit(e,t.unit),void 0!==n&&fl.addTimezone(e,n),fl.endTimestamp(e)}visitInterval(t,e){return ml.startInterval(e),ml.addUnit(e,t.unit),ml.endInterval(e)}visitList(t,e){return Al.startList(e),Al.endList(e)}visitStruct(t,e){return Tl.startStruct_(e),Tl.endStruct_(e)}visitUnion(t,e){yl.startTypeIdsVector(e,t.typeIds.length);const n=yl.createTypeIdsVector(e,t.typeIds);return yl.startUnion(e),yl.addMode(e,t.mode),yl.addTypeIds(e,n),yl.endUnion(e)}visitDictionary(t,e){const n=this.visit(t.indices,e);return bo.startDictionaryEncoding(e),bo.addId(e,new Cl(t.id,0)),bo.addIsOrdered(e,t.isOrdered),void 0!==n&&bo.addIndexType(e,n),bo.endDictionaryEncoding(e)}visitFixedSizeBinary(t,e){return gl.startFixedSizeBinary(e),gl.addByteWidth(e,t.byteWidth),gl.endFixedSizeBinary(e)}visitFixedSizeList(t,e){return bl.startFixedSizeList(e),bl.addListSize(e,t.listSize),bl.endFixedSizeList(e)}visitMap(t,e){return vl.startMap(e),vl.addKeysSorted(e,t.keysSorted),vl.endMap(e)}};function kl(t){return new Rl(t.count,Ol(t.columns),Ml(t.columns))}function El(t,e){return(t.children||[]).filter(Boolean).map((t=>Vs.fromJSON(t,e)))}function Ol(t){return(t||[]).reduce(((t,e)=>{return[...t,new zl(e.count,(n=e.VALIDITY,(n||[]).reduce(((t,e)=>t+ +(0===e)),0))),...Ol(e.children)];var n}),[])}function Ml(t,e=[]){for(let n=-1,i=(t||[]).length;++n<i;){const i=t[n];i.VALIDITY&&e.push(new jl(e.length,i.VALIDITY.length)),i.TYPE&&e.push(new jl(e.length,i.TYPE.length)),i.OFFSET&&e.push(new jl(e.length,i.OFFSET.length)),i.DATA&&e.push(new jl(e.length,i.DATA.length)),e=Ml(i.children,e)}return e}function Dl(t){return new Map(Object.entries(t||{}))}function Bl(t){return new An(t.isSigned,t.bitWidth)}function Ll(t,e){const n=t.type.name;switch(n){case"NONE":case"null":return new In;case"binary":return new Vn;case"utf8":return new Un;case"bool":return new Rn;case"list":return new ti((e||[])[0]);case"struct":case"struct_":return new ei(e||[])}switch(n){case"int":{const e=t.type;return new An(e.isSigned,e.bitWidth)}case"floatingpoint":{const e=t.type;return new Bn(Xt[e.precision])}case"decimal":{const e=t.type;return new $n(e.scale,e.precision,e.bitWidth)}case"date":{const e=t.type;return new jn(te[e.unit])}case"time":{const e=t.type;return new Hn(ee[e.unit],e.bitWidth)}case"timestamp":{const e=t.type;return new Jn(ee[e.unit],e.timezone)}case"interval":{const e=t.type;return new Qn(ne[e.unit])}case"union":{const n=t.type;return new ni(Zt[n.mode],n.typeIds||[],e||[])}case"fixedsizebinary":{const e=t.type;return new ii(e.byteWidth)}case"fixedsizelist":{const n=t.type;return new ri(n.listSize,(e||[])[0])}case"map":{const n=t.type;return new si((e||[])[0],n.keysSorted)}}throw new Error(`Unrecognized type: "${n}"`)}var Pl=oo,Fl=mo,Vl=fo;class Ul{constructor(t,e,n,i){this._version=e,this._headerType=n,this.body=new Uint8Array(0),i&&(this._createHeader=()=>i),this._bodyLength="number"==typeof t?t:t.low}static fromJSON(t,e){const n=new Ul(0,Qt.V4,e);return n._createHeader=function(t,e){return()=>{switch(e){case ie.Schema:return Fs.fromJSON(t);case ie.RecordBatch:return Rl.fromJSON(t);case ie.DictionaryBatch:return $l.fromJSON(t)}throw new Error(`Unrecognized Message type: { name: ${ie[e]}, type: ${e} }`)}}(t,e),n}static decode(t){t=new Vl(je(t));const e=_l.getRootAsMessage(t),n=e.bodyLength(),i=e.version(),r=e.headerType(),s=new Ul(n,i,r);return s._createHeader=function(t,e){return()=>{switch(e){case ie.Schema:return Fs.decode(t.header(new _o));case ie.RecordBatch:return Rl.decode(t.header(new ll),t.version());case ie.DictionaryBatch:return $l.decode(t.header(new cl),t.version())}throw new Error(`Unrecognized Message type: { name: ${ie[e]}, type: ${e} }`)}}(e,r),s}static encode(t){const e=new Fl;let n=-1;return t.isSchema()?n=Fs.encode(e,t.header()):t.isRecordBatch()?n=Rl.encode(e,t.header()):t.isDictionaryBatch()&&(n=$l.encode(e,t.header())),_l.startMessage(e),_l.addVersion(e,Qt.V4),_l.addHeader(e,n),_l.addHeaderType(e,t.headerType),_l.addBodyLength(e,new Pl(t.bodyLength,0)),_l.finishMessageBuffer(e,_l.endMessage(e)),e.asUint8Array()}static from(t,e=0){if(t instanceof Fs)return new Ul(0,Qt.V4,ie.Schema,t);if(t instanceof Rl)return new Ul(e,Qt.V4,ie.RecordBatch,t);if(t instanceof $l)return new Ul(e,Qt.V4,ie.DictionaryBatch,t);throw new Error(`Unrecognized Message header: ${t}`)}get type(){return this.headerType}get version(){return this._version}get headerType(){return this._headerType}get bodyLength(){return this._bodyLength}header(){return this._createHeader()}isSchema(){return this.headerType===ie.Schema}isRecordBatch(){return this.headerType===ie.RecordBatch}isDictionaryBatch(){return this.headerType===ie.DictionaryBatch}}class Rl{constructor(t,e,n){this._nodes=e,this._buffers=n,this._length="number"==typeof t?t:t.low}get nodes(){return this._nodes}get length(){return this._length}get buffers(){return this._buffers}}class $l{constructor(t,e,n=!1){this._data=t,this._isDelta=n,this._id="number"==typeof e?e:e.low}get id(){return this._id}get data(){return this._data}get isDelta(){return this._isDelta}get length(){return this.data.length}get nodes(){return this.data.nodes}get buffers(){return this.data.buffers}}class jl{constructor(t,e){this.offset="number"==typeof t?t:t.low,this.length="number"==typeof e?e:e.low}}class zl{constructor(t,e){this.length="number"==typeof t?t:t.low,this.nullCount="number"==typeof e?e:e.low}}function Wl(t,e){const n=[];for(let i,r=-1,s=-1,a=t.childrenLength();++r<a;)(i=t.children(r))&&(n[++s]=Vs.decode(i,e));return n}function Hl(t){const e=new Map;if(t)for(let n,i,r=-1,s=Math.trunc(t.customMetadataLength());++r<s;)(n=t.customMetadata(r))&&null!=(i=n.key())&&e.set(i,n.value());return e}function ql(t){return new An(t.isSigned(),t.bitWidth())}function Gl(t,e){const n=t.typeType();switch(n){case po.NONE:case po.Null:return new In;case po.Binary:return new Vn;case po.Utf8:return new Un;case po.Bool:return new Rn;case po.List:return new ti((e||[])[0]);case po.Struct_:return new ei(e||[])}switch(n){case po.Int:{const e=t.type(new go);return new An(e.isSigned(),e.bitWidth())}case po.FloatingPoint:{const e=t.type(new ul);return new Bn(e.precision())}case po.Decimal:{const e=t.type(new hl);return new $n(e.scale(),e.precision(),e.bitWidth())}case po.Date:{const e=t.type(new dl);return new jn(e.unit())}case po.Time:{const e=t.type(new pl);return new Hn(e.unit(),e.bitWidth())}case po.Timestamp:{const e=t.type(new fl);return new Jn(e.unit(),e.timezone())}case po.Interval:{const e=t.type(new ml);return new Qn(e.unit())}case po.Union:{const n=t.type(new yl);return new ni(n.mode(),n.typeIdsArray()||[],e||[])}case po.FixedSizeBinary:{const e=t.type(new gl);return new ii(e.byteWidth())}case po.FixedSizeList:{const n=t.type(new bl);return new ri(n.listSize(),(e||[])[0])}case po.Map:{const n=t.type(new vl);return new si((e||[])[0],n.keysSorted())}}throw new Error(`Unrecognized type: "${po[n]}" (${n})`)}Vs.encode=function(t,e){let n=-1,i=-1,r=-1;const s=e.type;let a=e.typeId;Sn.isDictionary(s)?(a=s.dictionary.typeId,r=Nl.visit(s,t),i=Nl.visit(s.dictionary,t)):i=Nl.visit(s,t);const o=(s.children||[]).map((e=>Vs.encode(t,e))),l=vo.createChildrenVector(t,o),c=e.metadata&&e.metadata.size>0?vo.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return yo.startKeyValue(t),yo.addKey(t,i),yo.addValue(t,r),yo.endKeyValue(t)}))):-1;return e.name&&(n=t.createString(e.name)),vo.startField(t),vo.addType(t,i),vo.addTypeType(t,a),vo.addChildren(t,l),vo.addNullable(t,!!e.nullable),-1!==n&&vo.addName(t,n),-1!==r&&vo.addDictionary(t,r),-1!==c&&vo.addCustomMetadata(t,c),vo.endField(t)},Vs.decode=function(t,e){let n,i,r,s,a,o;return e&&(o=t.dictionary())?e.has(n=o.id().low)?(s=(s=o.indexType())?ql(s):new Nn,a=new li(e.get(n),s,n,o.isOrdered()),i=new Vs(t.name(),a,t.nullable(),Hl(t))):(s=(s=o.indexType())?ql(s):new Nn,e.set(n,r=Gl(t,Wl(t,e))),a=new li(r,s,n,o.isOrdered()),i=new Vs(t.name(),a,t.nullable(),Hl(t))):(r=Gl(t,Wl(t,e)),i=new Vs(t.name(),r,t.nullable(),Hl(t))),i||null},Vs.fromJSON=function(t,e){let n,i,r,s,a,o;return e&&(s=t.dictionary)?e.has(n=s.id)?(i=(i=s.indexType)?Bl(i):new Nn,o=new li(e.get(n),i,n,s.isOrdered),r=new Vs(t.name,o,t.nullable,Dl(t.customMetadata))):(i=(i=s.indexType)?Bl(i):new Nn,e.set(n,a=Ll(t,El(t,e))),o=new li(a,i,n,s.isOrdered),r=new Vs(t.name,o,t.nullable,Dl(t.customMetadata))):(a=Ll(t,El(t,e)),r=new Vs(t.name,a,t.nullable,Dl(t.customMetadata))),r||null},Fs.encode=function(t,e){const n=e.fields.map((e=>Vs.encode(t,e)));_o.startFieldsVector(t,n.length);const i=_o.createFieldsVector(t,n),r=e.metadata&&e.metadata.size>0?_o.createCustomMetadataVector(t,[...e.metadata].map((([e,n])=>{const i=t.createString(`${e}`),r=t.createString(`${n}`);return yo.startKeyValue(t),yo.addKey(t,i),yo.addValue(t,r),yo.endKeyValue(t)}))):-1;return _o.startSchema(t),_o.addFields(t,i),_o.addEndianness(t,Yl?uo.Little:uo.Big),-1!==r&&_o.addCustomMetadata(t,r),_o.endSchema(t)},Fs.decode=function(t,e=new Map){const n=function(t,e){const n=[];for(let i,r=-1,s=-1,a=t.fieldsLength();++r<a;)(i=t.fields(r))&&(n[++s]=Vs.decode(i,e));return n}(t,e);return new Fs(n,Hl(t),e)},Fs.fromJSON=function(t,e=new Map){return new Fs(function(t,e){return(t.fields||[]).filter(Boolean).map((t=>Vs.fromJSON(t,e)))}(t,e),Dl(t.customMetadata),e)},Rl.encode=function(t,e){const n=e.nodes||[],i=e.buffers||[];ll.startNodesVector(t,n.length);for(const e of n.slice().reverse())zl.encode(t,e);const r=t.endVector();ll.startBuffersVector(t,i.length);for(const e of i.slice().reverse())jl.encode(t,e);const s=t.endVector();return ll.startRecordBatch(t),ll.addLength(t,new Pl(e.length,0)),ll.addNodes(t,r),ll.addBuffers(t,s),ll.endRecordBatch(t)},Rl.decode=function(t,e=Qt.V4){if(null!==t.compression())throw new Error("Record batch compression not implemented");return new Rl(t.length(),function(t){const e=[];for(let n,i=-1,r=-1,s=t.nodesLength();++i<s;)(n=t.nodes(i))&&(e[++r]=zl.decode(n));return e}(t),function(t,e){const n=[];for(let i,r=-1,s=-1,a=t.buffersLength();++r<a;)(i=t.buffers(r))&&(e<Qt.V4&&(i.bb_pos+=8*(r+1)),n[++s]=jl.decode(i));return n}(t,e))},Rl.fromJSON=kl,$l.encode=function(t,e){const n=Rl.encode(t,e.data);return cl.startDictionaryBatch(t),cl.addId(t,new Pl(e.id,0)),cl.addIsDelta(t,e.isDelta),cl.addData(t,n),cl.endDictionaryBatch(t)},$l.decode=function(t,e=Qt.V4){return new $l(Rl.decode(t.data(),e),t.id(),t.isDelta())},$l.fromJSON=function(t){return new $l(kl(t.data),t.id,t.isDelta)},zl.encode=function(t,e){return ol.createFieldNode(t,new Pl(e.length,0),new Pl(e.nullCount,0))},zl.decode=function(t){return new zl(t.length(),t.nullCount())},jl.encode=function(t,e){return al.createBuffer(t,new Pl(e.offset,0),new Pl(e.length,0))},jl.decode=function(t){return new jl(t.offset(),t.length())};const Yl=(()=>{const t=new ArrayBuffer(2);return new DataView(t).setInt16(0,256,!0),256===new Int16Array(t)[0]})(),Kl=t=>`Expected ${ie[t]} Message in stream, but was null or length 0.`,Jl=t=>`Header pointer of flatbuffer-encoded ${ie[t]} Message is null or length 0.`,Ql=(t,e)=>`Expected to read ${t} metadata bytes, but only read ${e}.`,Zl=(t,e)=>`Expected to read ${t} bytes for message body, but only read ${e}.`;class Xl{constructor(t){this.source=t instanceof Fo?t:new Fo(t)}[Symbol.iterator](){return this}next(){let t;return(t=this.readMetadataLength()).done||-1===t.value&&(t=this.readMetadataLength()).done||(t=this.readMetadata(t.value)).done?Mo:t}throw(t){return this.source.throw(t)}return(t){return this.source.return(t)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Kl(t));return e.value}readMessageBody(t){if(t<=0)return new Uint8Array(0);const e=je(this.source.read(t));if(e.byteLength<t)throw new Error(Zl(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}readSchema(t=!1){const e=ie.Schema,n=this.readMessage(e),i=null==n?void 0:n.header();if(t&&!i)throw new Error(Jl(e));return i}readMetadataLength(){const t=this.source.read(nc),e=t&&new fo(t),n=(null==e?void 0:e.readInt32(0))||0;return{done:0===n,value:n}}readMetadata(t){const e=this.source.read(t);if(!e)return Mo;if(e.byteLength<t)throw new Error(Ql(t,e.byteLength));return{done:!1,value:Ul.decode(e)}}}class tc{constructor(t,e){this.source=t instanceof Vo?t:Me(t)?new jo(t,e):new Vo(t)}[Symbol.asyncIterator](){return this}next(){return ce(this,void 0,void 0,(function*(){let t;return(t=yield this.readMetadataLength()).done||-1===t.value&&(t=yield this.readMetadataLength()).done||(t=yield this.readMetadata(t.value)).done?Mo:t}))}throw(t){return ce(this,void 0,void 0,(function*(){return yield this.source.throw(t)}))}return(t){return ce(this,void 0,void 0,(function*(){return yield this.source.return(t)}))}readMessage(t){return ce(this,void 0,void 0,(function*(){let e;if((e=yield this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Kl(t));return e.value}))}readMessageBody(t){return ce(this,void 0,void 0,(function*(){if(t<=0)return new Uint8Array(0);const e=je(yield this.source.read(t));if(e.byteLength<t)throw new Error(Zl(t,e.byteLength));return e.byteOffset%8==0&&e.byteOffset+e.byteLength<=e.buffer.byteLength?e:e.slice()}))}readSchema(t=!1){return ce(this,void 0,void 0,(function*(){const e=ie.Schema,n=yield this.readMessage(e),i=null==n?void 0:n.header();if(t&&!i)throw new Error(Jl(e));return i}))}readMetadataLength(){return ce(this,void 0,void 0,(function*(){const t=yield this.source.read(nc),e=t&&new fo(t),n=(null==e?void 0:e.readInt32(0))||0;return{done:0===n,value:n}}))}readMetadata(t){return ce(this,void 0,void 0,(function*(){const e=yield this.source.read(t);if(!e)return Mo;if(e.byteLength<t)throw new Error(Ql(t,e.byteLength));return{done:!1,value:Ul.decode(e)}}))}}class ec extends Xl{constructor(t){super(new Uint8Array(0)),this._schema=!1,this._body=[],this._batchIndex=0,this._dictionaryIndex=0,this._json=t instanceof Do?t:new Do(t)}next(){const{_json:t}=this;if(!this._schema)return this._schema=!0,{done:!1,value:Ul.fromJSON(t.schema,ie.Schema)};if(this._dictionaryIndex<t.dictionaries.length){const e=t.dictionaries[this._dictionaryIndex++];return this._body=e.data.columns,{done:!1,value:Ul.fromJSON(e,ie.DictionaryBatch)}}if(this._batchIndex<t.batches.length){const e=t.batches[this._batchIndex++];return this._body=e.columns,{done:!1,value:Ul.fromJSON(e,ie.RecordBatch)}}return this._body=[],Mo}readMessageBody(t){return function t(e){return(e||[]).reduce(((e,n)=>[...e,...n.VALIDITY&&[n.VALIDITY]||[],...n.TYPE&&[n.TYPE]||[],...n.OFFSET&&[n.OFFSET]||[],...n.DATA&&[n.DATA]||[],...t(n.children)]),[])}(this._body)}readMessage(t){let e;if((e=this.next()).done)return null;if(null!=t&&e.value.headerType!==t)throw new Error(Kl(t));return e.value}readSchema(){const t=ie.Schema,e=this.readMessage(t),n=null==e?void 0:e.header();if(!e||!n)throw new Error(Jl(t));return n}}const nc=4,ic="ARROW1",rc=new Uint8Array(ic.length);for(let t=0;t<ic.length;t+=1)rc[t]=ic.codePointAt(t);function sc(t,e=0){for(let n=-1,i=rc.length;++n<i;)if(rc[n]!==t[e+n])return!1;return!0}const ac=rc.length,oc=ac+nc,lc=2*ac+nc;class cc extends Bo{constructor(t){super(),this._impl=t}get closed(){return this._impl.closed}get schema(){return this._impl.schema}get autoDestroy(){return this._impl.autoDestroy}get dictionaries(){return this._impl.dictionaries}get numDictionaries(){return this._impl.numDictionaries}get numRecordBatches(){return this._impl.numRecordBatches}get footer(){return this._impl.isFile()?this._impl.footer:null}isSync(){return this._impl.isSync()}isAsync(){return this._impl.isAsync()}isFile(){return this._impl.isFile()}isStream(){return this._impl.isStream()}next(){return this._impl.next()}throw(t){return this._impl.throw(t)}return(t){return this._impl.return(t)}cancel(){return this._impl.cancel()}reset(t){return this._impl.reset(t),this._DOMStream=void 0,this._nodeStream=void 0,this}open(t){const e=this._impl.open(t);return Ce(e)?e.then((()=>this)):this}readRecordBatch(t){return this._impl.isFile()?this._impl.readRecordBatch(t):null}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}toDOMStream(){return No.toDOMStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this})}toNodeStream(){return No.toNodeStream(this.isSync()?{[Symbol.iterator]:()=>this}:{[Symbol.asyncIterator]:()=>this},{objectMode:!0})}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}static from(t){return t instanceof cc?t:Ee(t)?function(t){return new uc(new vc(t))}(t):Me(t)?function(t){return ce(this,void 0,void 0,(function*(){const{size:e}=yield t.stat(),n=new jo(t,e);return e>=lc&&sc(yield n.readAt(0,ac+7&-8))?new pc(new bc(n)):new hc(new yc(n))}))}(t):Ce(t)?(()=>ce(this,void 0,void 0,(function*(){return yield cc.from(yield t)})))():De(t)||Le(t)||Pe(t)||ke(t)?function(t){return ce(this,void 0,void 0,(function*(){const e=yield t.peek(ac+7&-8);return e&&e.byteLength>=4?sc(e)?new dc(new gc(yield t.read())):new hc(new yc(t)):new hc(new yc(function(){return he(this,arguments,(function*(){}))}()))}))}(new Vo(t)):function(t){const e=t.peek(ac+7&-8);return e&&e.byteLength>=4?sc(e)?new dc(new gc(t.read())):new uc(new mc(t)):new uc(new mc(function*(){}()))}(new Fo(t))}static readAll(t){return t instanceof cc?t.isSync()?wc(t):xc(t):Ee(t)||ArrayBuffer.isView(t)||Ne(t)||Oe(t)?wc(t):xc(t)}}class uc extends cc{constructor(t){super(t),this._impl=t}readAll(){return[...this]}[Symbol.iterator](){return this._impl[Symbol.iterator]()}[Symbol.asyncIterator](){return he(this,arguments,(function*(){yield ue(yield*de(pe(this[Symbol.iterator]())))}))}}class hc extends cc{constructor(t){super(t),this._impl=t}readAll(){var t,e;return ce(this,void 0,void 0,(function*(){const n=new Array;try{for(var i,r=pe(this);!(i=yield r.next()).done;){const t=i.value;n.push(t)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(e=r.return)&&(yield e.call(r))}finally{if(t)throw t.error}}return n}))}[Symbol.iterator](){throw new Error("AsyncRecordBatchStreamReader is not Iterable")}[Symbol.asyncIterator](){return this._impl[Symbol.asyncIterator]()}}class dc extends uc{constructor(t){super(t),this._impl=t}}class pc extends hc{constructor(t){super(t),this._impl=t}}class fc{constructor(t=new Map){this.closed=!1,this.autoDestroy=!0,this._dictionaryIndex=0,this._recordBatchIndex=0,this.dictionaries=t}get numDictionaries(){return this._dictionaryIndex}get numRecordBatches(){return this._recordBatchIndex}isSync(){return!1}isAsync(){return!1}isFile(){return!1}isStream(){return!1}reset(t){return this._dictionaryIndex=0,this._recordBatchIndex=0,this.schema=t,this.dictionaries=new Map,this}_loadRecordBatch(t,e){const n=this._loadVectors(t,e,this.schema.fields),i=hs({type:new ei(this.schema.fields),length:t.length,children:n});return new Ka(this.schema,i)}_loadDictionaryBatch(t,e){const{id:n,isDelta:i}=t,{dictionaries:r,schema:s}=this,a=r.get(n);if(i||!a){const r=s.dictionaries.get(n),o=this._loadVectors(t.data,e,[r]);return(a&&i?a.concat(new os(o)):new os(o)).memoize()}return a.memoize()}_loadVectors(t,e,n){return new Ko(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}class mc extends fc{constructor(t,e){super(e),this._reader=Ee(t)?new ec(this._handle=t):new Xl(this._handle=t)}isSync(){return!0}isStream(){return!0}[Symbol.iterator](){return this}cancel(){!this.closed&&(this.closed=!0)&&(this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}open(t){return this.closed||(this.autoDestroy=_c(this,t),this.schema||(this.schema=this._reader.readSchema())||this.cancel()),this}throw(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.throw(t):Mo}return(t){return!this.closed&&this.autoDestroy&&(this.closed=!0)?this.reset()._reader.return(t):Mo}next(){if(this.closed)return Mo;let t;const{_reader:e}=this;for(;t=this._readNextMessageAndValidate();)if(t.isSchema())this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Za(this.schema)}):this.return()}_readNextMessageAndValidate(t){return this._reader.readMessage(t)}}class yc extends fc{constructor(t,e){super(e),this._reader=new tc(this._handle=t)}isAsync(){return!0}isStream(){return!0}[Symbol.asyncIterator](){return this}cancel(){return ce(this,void 0,void 0,(function*(){!this.closed&&(this.closed=!0)&&(yield this.reset()._reader.return(),this._reader=null,this.dictionaries=null)}))}open(t){return ce(this,void 0,void 0,(function*(){return this.closed||(this.autoDestroy=_c(this,t),this.schema||(this.schema=yield this._reader.readSchema())||(yield this.cancel())),this}))}throw(t){return ce(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.throw(t):Mo}))}return(t){return ce(this,void 0,void 0,(function*(){return!this.closed&&this.autoDestroy&&(this.closed=!0)?yield this.reset()._reader.return(t):Mo}))}next(){return ce(this,void 0,void 0,(function*(){if(this.closed)return Mo;let t;const{_reader:e}=this;for(;t=yield this._readNextMessageAndValidate();)if(t.isSchema())yield this.reset(t.header());else{if(t.isRecordBatch()){this._recordBatchIndex++;const n=t.header(),i=yield e.readMessageBody(t.bodyLength);return{done:!1,value:this._loadRecordBatch(n,i)}}if(t.isDictionaryBatch()){this._dictionaryIndex++;const n=t.header(),i=yield e.readMessageBody(t.bodyLength),r=this._loadDictionaryBatch(n,i);this.dictionaries.set(n.id,r)}}return this.schema&&0===this._recordBatchIndex?(this._recordBatchIndex++,{done:!1,value:new Za(this.schema)}):yield this.return()}))}_readNextMessageAndValidate(t){return ce(this,void 0,void 0,(function*(){return yield this._reader.readMessage(t)}))}}class gc extends mc{constructor(t,e){super(t instanceof $o?t:new $o(t),e)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isSync(){return!0}isFile(){return!0}open(t){if(!this.closed&&!this._footer){this.schema=(this._footer=this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&this._readDictionaryBatch(this._dictionaryIndex++)}return super.open(t)}readRecordBatch(t){var e;if(this.closed)return null;this._footer||this.open();const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(n&&this._handle.seek(n.offset)){const t=this._reader.readMessage(ie.RecordBatch);if(null==t?void 0:t.isRecordBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}_readDictionaryBatch(t){var e;const n=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(n&&this._handle.seek(n.offset)){const t=this._reader.readMessage(ie.DictionaryBatch);if(null==t?void 0:t.isDictionaryBatch()){const e=t.header(),n=this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,i)}}}_readFooter(){const{_handle:t}=this,e=t.size-oc,n=t.readInt32(e),i=t.readAt(e-n,n);return Ao.decode(i)}_readNextMessageAndValidate(t){var e;if(this._footer||this.open(),this._footer&&this._recordBatchIndex<this.numRecordBatches){const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(this._recordBatchIndex);if(n&&this._handle.seek(n.offset))return this._reader.readMessage(t)}return null}}class bc extends yc{constructor(t,...e){const n="number"!=typeof e[0]?e.shift():void 0,i=e[0]instanceof Map?e.shift():void 0;super(t instanceof jo?t:new jo(t,n),i)}get footer(){return this._footer}get numDictionaries(){return this._footer?this._footer.numDictionaries:0}get numRecordBatches(){return this._footer?this._footer.numRecordBatches:0}isFile(){return!0}isAsync(){return!0}open(t){const e=Object.create(null,{open:{get:()=>super.open}});return ce(this,void 0,void 0,(function*(){if(!this.closed&&!this._footer){this.schema=(this._footer=yield this._readFooter()).schema;for(const t of this._footer.dictionaryBatches())t&&(yield this._readDictionaryBatch(this._dictionaryIndex++))}return yield e.open.call(this,t)}))}readRecordBatch(t){var e;return ce(this,void 0,void 0,(function*(){if(this.closed)return null;this._footer||(yield this.open());const n=null===(e=this._footer)||void 0===e?void 0:e.getRecordBatch(t);if(n&&(yield this._handle.seek(n.offset))){const t=yield this._reader.readMessage(ie.RecordBatch);if(null==t?void 0:t.isRecordBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength);return this._loadRecordBatch(e,n)}}return null}))}_readDictionaryBatch(t){var e;return ce(this,void 0,void 0,(function*(){const n=null===(e=this._footer)||void 0===e?void 0:e.getDictionaryBatch(t);if(n&&(yield this._handle.seek(n.offset))){const t=yield this._reader.readMessage(ie.DictionaryBatch);if(null==t?void 0:t.isDictionaryBatch()){const e=t.header(),n=yield this._reader.readMessageBody(t.bodyLength),i=this._loadDictionaryBatch(e,n);this.dictionaries.set(e.id,i)}}}))}_readFooter(){return ce(this,void 0,void 0,(function*(){const{_handle:t}=this;t._pending&&(yield t._pending);const e=t.size-oc,n=yield t.readInt32(e),i=yield t.readAt(e-n,n);return Ao.decode(i)}))}_readNextMessageAndValidate(t){return ce(this,void 0,void 0,(function*(){if(this._footer||(yield this.open()),this._footer&&this._recordBatchIndex<this.numRecordBatches){const e=this._footer.getRecordBatch(this._recordBatchIndex);if(e&&(yield this._handle.seek(e.offset)))return yield this._reader.readMessage(t)}return null}))}}class vc extends mc{constructor(t,e){super(t,e)}_loadVectors(t,e,n){return new Jo(e,t.nodes,t.buffers,this.dictionaries).visitMany(n)}}function _c(t,e){return e&&"boolean"==typeof e.autoDestroy?e.autoDestroy:t.autoDestroy}function*wc(t){const e=cc.from(t);try{if(!e.open({autoDestroy:!1}).closed)do{yield e}while(!e.reset().open().closed)}finally{e.cancel()}}function xc(t){return he(this,arguments,(function*(){const e=yield ue(cc.from(t));try{if(!(yield ue(e.open({autoDestroy:!1}))).closed)do{yield yield ue(e)}while(!(yield ue(e.reset().open())).closed)}finally{yield ue(e.cancel())}}))}class Sc extends ui{constructor(){super(),this._byteLength=0,this._nodes=[],this._buffers=[],this._bufferRegions=[]}static assemble(...t){const e=t=>t.flatMap((t=>Array.isArray(t)?e(t):t instanceof Ka?t.data.children:t.data)),n=new Sc;return n.visitMany(e(t)),n}visit(t){if(t instanceof os)return this.visitMany(t.data),this;const{type:e}=t;if(!Sn.isDictionary(e)){const{length:n,nullCount:i}=t;if(n>2147483647)throw new RangeError("Cannot write arrays larger than 2^31 - 1 in length");Sn.isNull(e)||Ic.call(this,i<=0?new Uint8Array(0):Rr(t.offset,n,t.nullBitmap)),this.nodes.push(new zl(n,i))}return super.visit(t)}visitNull(t){return this}visitDictionary(t){return this.visit(t.clone(t.type.indices))}get nodes(){return this._nodes}get buffers(){return this._buffers}get byteLength(){return this._byteLength}get bufferRegions(){return this._bufferRegions}}function Ic(t){const e=t.byteLength+7&-8;return this.buffers.push(t),this.bufferRegions.push(new jl(this._byteLength,e)),this._byteLength+=e,this}function Ac(t){return Ic.call(this,t.values.subarray(0,t.length*t.stride))}function Tc(t){const{length:e,values:n,valueOffsets:i}=t,r=i[0],s=i[e],a=Math.min(s-r,n.byteLength-r);return Ic.call(this,qe(-i[0],e,i)),Ic.call(this,n.subarray(r,r+a)),this}function Cc(t){const{length:e,valueOffsets:n}=t;return n&&Ic.call(this,qe(n[0],e,n)),this.visit(t.children[0])}function Nc(t){return this.visitMany(t.type.children.map(((e,n)=>t.children[n])).filter(Boolean))[0]}Sc.prototype.visitBool=function(t){let e;return t.nullCount>=t.length?Ic.call(this,new Uint8Array(0)):(e=t.values)instanceof Uint8Array?Ic.call(this,Rr(t.offset,t.length,e)):Ic.call(this,$r(t.values))},Sc.prototype.visitInt=Ac,Sc.prototype.visitFloat=Ac,Sc.prototype.visitUtf8=Tc,Sc.prototype.visitBinary=Tc,Sc.prototype.visitFixedSizeBinary=Ac,Sc.prototype.visitDate=Ac,Sc.prototype.visitTimestamp=Ac,Sc.prototype.visitTime=Ac,Sc.prototype.visitDecimal=Ac,Sc.prototype.visitList=Cc,Sc.prototype.visitStruct=Nc,Sc.prototype.visitUnion=function(t){const{type:e,length:n,typeIds:i,valueOffsets:r}=t;if(Ic.call(this,i),e.mode===Zt.Sparse)return Nc.call(this,t);if(e.mode===Zt.Dense){if(t.offset<=0)return Ic.call(this,r),Nc.call(this,t);{const s=i.reduce(((t,e)=>Math.max(t,e)),i[0]),a=new Int32Array(s+1),o=new Int32Array(s+1).fill(-1),l=new Int32Array(n),c=qe(-r[0],n,r);for(let t,e,r=-1;++r<n;)-1===(e=o[t=i[r]])&&(e=o[t]=c[t]),l[r]=c[r]-e,++a[t];Ic.call(this,l);for(let i,r=-1,s=e.children.length;++r<s;)if(i=t.children[r]){const t=e.typeIds[r],s=Math.min(n,a[t]);this.visit(i.slice(o[t],s))}}}return this},Sc.prototype.visitInterval=Ac,Sc.prototype.visitFixedSizeList=Cc,Sc.prototype.visitMap=Cc;class kc extends Bo{constructor(t){super(),this._position=0,this._started=!1,this._sink=new Po,this._schema=null,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,Te(t)||(t={autoDestroy:!0,writeLegacyIpcFormat:!1}),this._autoDestroy="boolean"!=typeof t.autoDestroy||t.autoDestroy,this._writeLegacyIpcFormat="boolean"==typeof t.writeLegacyIpcFormat&&t.writeLegacyIpcFormat}static throughNode(t){throw new Error('"throughNode" not available in this environment')}static throughDOM(t,e){throw new Error('"throughDOM" not available in this environment')}toString(t=!1){return this._sink.toString(t)}toUint8Array(t=!1){return this._sink.toUint8Array(t)}writeAll(t){return Ce(t)?t.then((t=>this.writeAll(t))):ke(t)?Dc(this,t):Mc(this,t)}get closed(){return this._sink.closed}[Symbol.asyncIterator](){return this._sink[Symbol.asyncIterator]()}toDOMStream(t){return this._sink.toDOMStream(t)}toNodeStream(t){return this._sink.toNodeStream(t)}close(){return this.reset()._sink.close()}abort(t){return this.reset()._sink.abort(t)}finish(){return this._autoDestroy?this.close():this.reset(this._sink,this._schema),this}reset(t=this._sink,e=null){var n;return t===this._sink||t instanceof Po?this._sink=t:(this._sink=new Po,t&&Te(n=t)&&Ae(n.abort)&&Ae(n.getWriter)&&!Be(n)?this.toDOMStream({type:"bytes"}).pipeTo(t):t&&(t=>Te(t)&&Ae(t.end)&&Ae(t.write)&&Ie(t.writable)&&!Be(t))(t)&&this.toNodeStream({objectMode:!1}).pipe(t)),this._started&&this._schema&&this._writeFooter(this._schema),this._started=!1,this._dictionaryBlocks=[],this._recordBatchBlocks=[],this._dictionaryDeltaOffsets=new Map,e&&qa(e,this._schema)||(null==e?(this._position=0,this._schema=null):(this._started=!0,this._schema=e,this._writeSchema(e))),this}write(t){let e=null;if(!this._sink)throw new Error("RecordBatchWriter is closed");if(null==t)return this.finish()&&void 0;if(t instanceof eo&&!(e=t.schema))return this.finish()&&void 0;if(t instanceof Ka&&!(e=t.schema))return this.finish()&&void 0;if(e&&!qa(e,this._schema)){if(this._started&&this._autoDestroy)return this.close();this.reset(this._sink,e)}t instanceof Ka?t instanceof Za||this._writeRecordBatch(t):t instanceof eo?this.writeAll(t.batches):Ne(t)&&this.writeAll(t)}_writeMessage(t,e=8){const n=e-1,i=Ul.encode(t),r=i.byteLength,s=this._writeLegacyIpcFormat?4:8,a=r+s+n&~n,o=a-r-s;return t.headerType===ie.RecordBatch?this._recordBatchBlocks.push(new Co(a,t.bodyLength,this._position)):t.headerType===ie.DictionaryBatch&&this._dictionaryBlocks.push(new Co(a,t.bodyLength,this._position)),this._writeLegacyIpcFormat||this._write(Int32Array.of(-1)),this._write(Int32Array.of(a-s)),r>0&&this._write(i),this._writePadding(o)}_write(t){if(this._started){const e=je(t);e&&e.byteLength>0&&(this._sink.write(e),this._position+=e.byteLength)}return this}_writeSchema(t){return this._writeMessage(Ul.from(t))}_writeFooter(t){return this._writeLegacyIpcFormat?this._write(Int32Array.of(0)):this._write(Int32Array.of(-1,0))}_writeMagic(){return this._write(rc)}_writePadding(t){return t>0?this._write(new Uint8Array(t)):this}_writeRecordBatch(t){const{byteLength:e,nodes:n,bufferRegions:i,buffers:r}=Sc.assemble(t),s=new Rl(t.numRows,n,i),a=Ul.from(s,e);return this._writeDictionaries(t)._writeMessage(a)._writeBodyBuffers(r)}_writeDictionaryBatch(t,e,n=!1){this._dictionaryDeltaOffsets.set(e,t.length+(this._dictionaryDeltaOffsets.get(e)||0));const{byteLength:i,nodes:r,bufferRegions:s,buffers:a}=Sc.assemble(new os([t])),o=new Rl(t.length,r,s),l=new $l(o,e,n),c=Ul.from(l,i);return this._writeMessage(c)._writeBodyBuffers(a)}_writeBodyBuffers(t){let e,n,i;for(let r=-1,s=t.length;++r<s;)(e=t[r])&&(n=e.byteLength)>0&&(this._write(e),(i=(n+7&-8)-n)>0&&this._writePadding(i));return this}_writeDictionaries(t){for(let[e,n]of t.dictionaries){let t=this._dictionaryDeltaOffsets.get(e)||0;if(0===t||(n=null==n?void 0:n.slice(t)).length>0)for(const i of n.data)this._writeDictionaryBatch(i,e,t>0),t+=i.length}return this}}class Ec extends kc{static writeAll(t,e){const n=new Ec(e);return Ce(t)?t.then((t=>n.writeAll(t))):ke(t)?Dc(n,t):Mc(n,t)}}class Oc extends kc{static writeAll(t){const e=new Oc;return Ce(t)?t.then((t=>e.writeAll(t))):ke(t)?Dc(e,t):Mc(e,t)}constructor(){super(),this._autoDestroy=!0}_writeSchema(t){return this._writeMagic()._writePadding(2)}_writeFooter(t){const e=Ao.encode(new Ao(t,Qt.V4,this._recordBatchBlocks,this._dictionaryBlocks));return super._writeFooter(t)._write(e)._write(Int32Array.of(e.byteLength))._writeMagic()}}function Mc(t,e){let n=e;e instanceof eo&&(n=e.batches,t.reset(void 0,e.schema));for(const e of n)t.write(e);return t.finish()}function Dc(t,e){var n,i,r,s;return ce(this,void 0,void 0,(function*(){try{for(n=pe(e);!(i=yield n.next()).done;){const e=i.value;t.write(e)}}catch(t){r={error:t}}finally{try{i&&!i.done&&(s=n.return)&&(yield s.call(n))}finally{if(r)throw r.error}}return t.finish()}))}function Bc(t){const e=cc.from(t);return Ce(e)?e.then((t=>Bc(t))):e.isAsync()?e.readAll().then((t=>new eo(t))):new eo(e.readAll())}const Lc=()=>o("Apache Arrow not imported, see https://github.com/uwdata/arquero#usage");function Pc(t,e={}){const{types:n={}}=e,{dataFrom:r,names:s,nrows:a,scan:l}=function(t,e){const{columns:n,limit:r=1/0,offset:s=0}=e,a=c(n)?n(t):i(n)?n:null;return i(t)?{dataFrom:Ea,names:a||Object.keys(t[0]),nrows:Math.min(r,t.length-s),scan:Da(t,r,s)}:function(t){return t&&c(t.reify)}(t)?{dataFrom:Oa,names:a||t.columnNames(),nrows:Math.min(r,t.numRows()-s),scan:Ba(t,r,s)}:void o("Unsupported input data type")}(t,e),u={};return s.forEach((e=>{const i=r(t,e,a,l,n[e]);i.length!==a&&o("Column length mismatch"),u[e]=i})),new(function(){try{return eo}catch(t){Lc()}}())(u)}const Fc=Pc;function Vc(t,e){return c(e)?e(t):e||t.columnNames()}function Uc(t,e,n){const i=n.format||{},r=n.align||{},s={},a={};return e.forEach((e=>{const o=function(t,e={}){let n=0,i=0,r=0,s=0,a=0,o=0;return t((t=>{if(++n,null==t)return void++i;const e=typeof t;if("object"===e&&f(t))++r,0===(l=t).getUTCHours()&&0===l.getUTCMinutes()&&0===l.getUTCSeconds()&&0===l.getUTCMilliseconds()&&++s;else if("number"===e&&(++a,t==t&&(0|t)!==t)){const e=t+"",n=e.indexOf(".");if(n>=0){const t=e.indexOf("e"),i=t>0?t:e.length;o=Math.max(o,i-n-1)}}var l})),{align:(i+a+r)/n>.5?"r":"l",format:{utc:r===s,digits:Math.min(o,e.maxdigits||6)}}}(function(t,e){const n=t.column(e);return e=>t.scan((t=>e(n.get(t))))}(t,e),n);a[e]=r[e]||o.align,s[e]=i[e]||o.format})),{align:a,format:s}}function Rc(t,e,n=100,i,r){const s=t.data(),a=e.length;t.scan((t=>{r.row(t);for(let n=0;n<a;++n){const i=e[n];r.cell(s[e[n]].get(t),i,n)}}),!0,n,i)}function $c(t,e={}){if(c(e))return e(t)+"";const n=typeof t;if("object"===n){if(f(t))return e.utc?B(t):D(t);{const n=JSON.stringify(t,((t,e)=>A(e)?Array.from(e):e)),i=e.maxlen||30;return n.length>i?n.slice(0,28)+""+("["===n[0]?"]":"}"):n}}if("number"===n){const n=e.digits||0;let i;return 0!==t&&((i=Math.abs(t))>=1e18||i<Math.pow(10,-n))?t.toExponential(n):t.toFixed(n)}return t+""}function jc(t,e,n={}){for(const i in t)n[i]=e(t[i],i);return n}function zc(t,e=!0,n=!1){return void 0===t||t?e:n}const Wc=t=>f(t)?B(t,!0):t;function Hc(t,e){for(const[n,i]of qt(e))t.set(n,i);return t}function qc(t){return t.replace(/[.*+\-?^${}()|[\]\\]/g,"\\$&")}function Gc(t,e,n=new Map){return g(e=l(e)?t.columnName(e):e)?n.set(e,e):i(e)?e.forEach((e=>Gc(t,e,n))):c(e)?Gc(t,e(t),n):m(e)?Hc(n,e):o(`Invalid column selection: ${nt(e)}`),n}function Yc(t,e){return t.toObject=e,t}function Kc(t){return i(t)?t.map(Kc):t&&t.toObject?t.toObject():t}function Jc(){return Yc((t=>t.columnNames()),(()=>({all:[]})))}function Qc(...t){return t=t.flat(),Yc((e=>{const n=Gc(e,t);return e.columnNames((t=>!n.has(t)))}),(()=>({not:Kc(t)})))}function Zc(t,e){return Yc((n=>{let i=l(t)?t:n.columnIndex(t),r=l(e)?e:n.columnIndex(e);if(r<i){const t=r;r=i,i=t}return n.columnNames().slice(i,r+1)}),(()=>({range:[t,e]})))}function Xc(t){return g(t)&&(t=RegExp(qc(t))),Yc((e=>e.columnNames((e=>t.test(e)))),(()=>({matches:[t.source,t.flags]})))}function tu(t){return Xc(RegExp("^"+qc(t)))}function eu(t){return Xc(RegExp(qc(t)+"$"))}class nu extends h{static from(t,e){return new nu(function(t,e){const n=e=>o(`Illegal argument type: ${e||typeof t}`);return t instanceof Map?b(t.entries(),e):f(t)?n("Date"):y(t)?n("RegExp"):g(t)?n():i(t)?function(t,e){const n=t.length,i={},r=t=>i[t]=Array(n);if(n){const i=(e=e||Object.keys(t[0])).map(r),s=i.length;for(let r=0;r<n;++r){const n=t[r];for(let t=0;t<s;++t)i[t][r]=n[e[t]]}}else e&&e.forEach(r);return i}(t,e):c(t[Symbol.iterator])?function(t,e){const n={},i=t=>n[t]=[];let r,s;for(const n of t){r||(r=(e=e||Object.keys(n)).map(i),s=r.length);for(let t=0;t<s;++t)r[t].push(n[e[t]])}return!r&&e&&e.forEach(i),n}(t,e):m(t)?b(Object.entries(t),e):n()}(t,e),e)}static new(t,e){if(t instanceof nu)return t;const n={},i=[];for(const[e,r]of qt(t))n[e]=r,i.push(e);return new nu(n,e||i)}constructor(t,e,n,i,r,s){jc(t,p,t),super(e=e||Object.keys(t),e.length?t[e[0]].length:0,t,n,i,r,s)}create({data:t,names:e,filter:n,groups:i,order:r}){const s=void 0!==n?n:this.mask();return new nu(t||this._data,e||(t?null:this._names),s,void 0!==i?i:function(t,e){if(!t||!e)return t;const{keys:n,rows:i,size:r}=t,s=new Int32Array(r);e.scan((t=>s[n[t]]=1));const a=s.reduce(((t,e)=>t+e),0);if(a===r)return t;const o=Array(a);let l=0;for(let t=0;t<r;++t)s[t]&&(o[s[t]=l++]=i[t]);const c=new Uint32Array(n.length);return e.scan((t=>c[t]=s[n[t]])),{...t,keys:c,rows:o,size:l}}(this._group,n&&s),void 0!==r?r:this._order,this._params)}assign(...t){const e=this.numRows(),n=this.reify(),i=w(n).groupby(n.groups());return t.forEach((t=>{(t=nu.new(t)).numRows()!==e&&o("Assign row counts do not match"),(t=t.reify()).columnNames((e=>i.add(e,t.column(e))))})),this.create(i.new())}columns(){return this._data}column(t){return this._data[t]}columnAt(t){return this._data[this._names[t]]}array(t,e=Array){const n=this.column(t),i=new e(this.numRows());let r=-1;return this.scan((t=>i[++r]=n.get(t)),!0),i}get(t,e=0){const n=this.column(t);return this.isFiltered()||this.isOrdered()?n.get(this.indices()[e]):n.get(e)}getter(t){const e=this.column(t),n=this.isFiltered()||this.isOrdered()?this.indices():null;return n?t=>e.get(n[t]):e?t=>e.get(t):o(`Unrecognized column: ${t}`)}object(t=0){return iu(this)(t)}objects(t={}){const{grouped:e,limit:n,offset:i}=t,r=Jt(Gc(this,t.columns||Jc())),s=[];if(this.scan(((t,e)=>s.push(r(t,e))),!0,n,i),e&&this.isGrouped()){const t=[];return this.scan((e=>t.push(e)),!0,n,i),function(t,e,n,i){const r="map"===i||!0===i?ct:"entries"===i?ht:"object"===i?ut:o('groups option must be "map", "entries", or "object".'),{names:s}=t.groups(),a=function(t,e){t=J(t)?t:new Set(t);let n="_",i=0;for(;t.has(n);)n="_"+ ++i;return n}(t.columnNames());let l=t.select().reify(e).create({data:{[a]:n}}).rollup({[a]:ot(a)});for(let t=s.length;--t>=0;)l=l.groupby(s.slice(0,t)).rollup({[a]:r(s[t],a)});return l.get(a)}(this,t,s,e)}return s}*[Symbol.iterator](){const t=iu(this),e=this.numRows();for(let n=0;n<e;++n)yield t(n)}reify(t){const e=t?t.length:this.numRows(),n=this._names;let i,r;if(!t&&!this.isOrdered()){if(!this.isFiltered())return this;e===this.totalRows()&&(i=this.data())}if(!i){const a=t?e=>t.forEach(e):t=>this.scan(t,!0),o=n.length;i={};for(let t=0;t<o;++t){const r=n[t],o=this.column(r),l=i[r]=new(A((s=o).data)?s.data.constructor:Array)(e);let c=-1;a((t=>l[++c]=o.get(t)))}this.isGrouped()&&(r=function(t,e,n,i){const{keys:r,rows:s,size:a}=t;let o=s,l=a,c=null;if(n){c=new Int32Array(a),e((t=>c[r[t]]=1));const t=c.reduce(((t,e)=>t+e),0);if(t!==a){o=Array(t),l=0;for(let t=0;t<a;++t)c[t]&&(o[c[t]=l++]=s[t])}}let u=-1;const h=new Uint32Array(i);return e(l!==a?t=>h[++u]=c[r[t]]:t=>h[++u]=r[t]),{...t,keys:h,rows:o,size:l}}(this.groups(),a,!!t,e))}var s;return this.create({data:i,names:n,groups:r,filter:null,order:null})}transform(...t){return t.flat().reduce(((t,e)=>e(t)),this)}toArrow(t){return Fc(this,t)}toArrowBuffer(t){return function(t,e){return function(t,e="stream"){return("stream"===e?Ec:Oc).writeAll(t).toUint8Array(!0)}(Pc(t,e))}(this,t)}toCSV(t){return function(t,e={}){const n=Vc(t,e.columns),i=e.format||{},r=e.delimiter||",",s=new RegExp(`["${r}\n\r]`),a=t=>null==t?"":f(t)?B(t,!0):s.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t,o=n.map(a);let l="";return Rc(t,n,e.limit||1/0,e.offset,{row(){l+=o.join(r)+"\n"},cell(t,e,n){o[n]=a(i[e]?i[e](t):t)}}),l+o.join(r)}(this,t)}toHTML(t){return function(t,e={}){const n=Vc(t,e.columns),{align:i,format:r}=Uc(t,n,e),s=function(t){return jc(t.style,(t=>c(t)?t:()=>t))}(e),a=e.null,o=(t,e)=>$c(t,e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),l=a?(t,e)=>null==t?a(t):o(t,e):o;let u=-1,h=-1;const d=(t,e,n)=>{const r=n?(t=>"c"===t?"center":"r"===t?"right":"left")(i[e]):"",a=s[t]&&s[t](e,h,u)||"",o=(r?`text-align: ${r};`+(a?" ":""):"")+a;return`<${t}${o?` style="${o}"`:""}>`};let p=d("table")+d("thead")+d("tr",u)+n.map((t=>`${d("th",t,1)}${t}</th>`)).join("")+"</tr></thead>"+d("tbody");return Rc(t,n,e.limit,e.offset,{row(t){u=t,p+=(++h?"</tr>":"")+d("tr")},cell(t,e){p+=d("td",e,1)+l(t,r[e])+"</td>"}}),p+"</tr></tbody></table>"}(this,t)}toJSON(t){return function(t,e={}){const n=zc(e.schema),i=e.format||{},r=Vc(t,e.columns);let s="{";return n&&(s+='"schema":{"fields":'+JSON.stringify(r.map((t=>({name:t}))))+'},"data":{'),r.forEach(((n,r)=>{s+=(r?",":"")+JSON.stringify(n)+":[";const a=t.column(n),o=i[n]||Wc;let l=-1;t.scan((t=>{const e=a.get(t);s+=(++l?",":"")+JSON.stringify(o(e))}),!0,e.limit,e.offset),s+="]"})),s+"}"+(n?"}":"")}(this,t)}toMarkdown(t){return function(t,e={}){const n=Vc(t,e.columns),{align:i,format:r}=Uc(t,n,e),s=t=>t.replace(/\|/g,"\\|");let a="|"+n.map(s).join("|")+"|\n|"+n.map((t=>{return"c"===(e=i[t])?":-:":"r"===e?"-:":":-";var e})).join("|")+"|";return Rc(t,n,e.limit,e.offset,{row(){a+="\n|"},cell(t,e){a+=s($c(t,r[e]))+"|"}}),a+"\n"}(this,t)}}function iu(t){let e=t._builder;if(!e){const n=Jt(t.columnNames()),i=t.data();if(t.isOrdered()||t.isFiltered()){const r=t.indices();e=t=>n(r[t],i)}else e=t=>n(t,i);t._builder=e}return e}class ru{constructor(t){this._outputs=t}size(){return this._outputs.length}outputs(){return this._outputs}init(){return{}}add(){}rem(){}write(){}}function su(t,e,n,i){const r=n[t.type]||n.Default;if(r&&!1===r(t,e,i))return;const s=du[t.type];s&&s(t,e,n)}const au=(t,e,n)=>{su(t.argument,e,n,t)},ou=(t,e,n)=>{su(t.left,e,n,t),su(t.right,e,n,t)},lu=(t,e,n)=>{su(t.test,e,n,t),su(t.consequent,e,n,t),t.alternate&&su(t.alternate,e,n,t)},cu=(t,e,n)=>{hu(t.params,e,n,t),su(t.body,e,n,t)},uu=(t,e,n)=>{su(t.callee,e,n,t),hu(t.arguments,e,n,t)},hu=(t,e,n,i)=>{t.forEach((t=>su(t,e,n,i)))},du={TemplateLiteral:(t,e,n)=>{hu(t.expressions,e,n,t),hu(t.quasis,e,n,t)},MemberExpression:(t,e,n)=>{su(t.object,e,n,t),su(t.property,e,n,t)},CallExpression:uu,NewExpression:uu,ArrayExpression:(t,e,n)=>{hu(t.elements,e,n,t)},AssignmentExpression:ou,AwaitExpression:au,BinaryExpression:ou,LogicalExpression:ou,UnaryExpression:au,UpdateExpression:au,ConditionalExpression:lu,ObjectExpression:(t,e,n)=>{hu(t.properties,e,n,t)},Property:(t,e,n)=>{su(t.key,e,n,t),su(t.value,e,n,t)},ArrowFunctionExpression:cu,FunctionExpression:cu,FunctionDeclaration:cu,VariableDeclaration:(t,e,n)=>{hu(t.declarations,e,n,t)},VariableDeclarator:(t,e,n)=>{su(t.id,e,n,t),su(t.init,e,n,t)},SpreadElement:(t,e,n)=>{su(t.argument,e,n,t)},BlockStatement:(t,e,n)=>{hu(t.body,e,n,t)},ExpressionStatement:(t,e,n)=>{su(t.expression,e,n,t)},IfStatement:lu,ForStatement:(t,e,n)=>{su(t.init,e,n,t),su(t.test,e,n,t),su(t.update,e,n,t),su(t.body,e,n,t)},WhileStatement:(t,e,n)=>{su(t.test,e,n,t),su(t.body,e,n,t)},DoWhileStatement:(t,e,n)=>{su(t.body,e,n,t),su(t.test,e,n,t)},SwitchStatement:(t,e,n)=>{su(t.discriminant,e,n,t),hu(t.cases,e,n,t)},SwitchCase:(t,e,n)=>{t.test&&su(t.test,e,n,t),hu(t.consequent,e,n,t)},ReturnStatement:au,Program:(t,e,n)=>{su(t.body[0],e,n,t)}};function pu(t){delete t.start,delete t.end,delete t.optional}function fu(t){pu(t),delete t.object,delete t.property,delete t.computed,t.table||delete t.table}function mu(t,e){return e&&e.type===t}function yu(t,e,n){t.aggronly&&o("Escaped functions are not valid as rollup or pivot values.");const i="(row,data)=>fn("+Kt(t.table.columnNames())+",$)";return{escape:zt.escape(i,(r=e.expr,c(r)?r:()=>r),n)};var r}var gu=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,370,1,154,10,50,3,123,2,54,14,32,10,3,1,11,3,46,10,8,0,46,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,2,11,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,71,5,2,1,3,3,2,0,2,1,13,9,120,6,3,6,4,0,29,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,87,9,39,4,60,6,26,9,1014,0,2,54,8,3,82,0,12,1,19628,1,4706,45,3,22,543,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,262,6,10,9,357,0,62,13,1495,6,110,6,6,9,4759,9,787719,239],bu=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,13,10,2,14,2,6,2,1,2,10,2,14,2,6,2,1,68,310,10,21,11,7,25,5,2,41,2,8,70,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,349,41,7,1,79,28,11,0,9,21,43,17,47,20,28,22,13,52,58,1,3,0,14,44,33,24,27,35,30,0,3,0,9,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,21,2,31,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,14,0,72,26,38,6,186,43,117,63,32,7,3,0,3,7,2,1,2,23,16,0,2,0,95,7,3,38,17,0,2,0,29,0,11,39,8,0,22,0,12,45,20,0,19,72,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,190,0,80,921,103,110,18,195,2637,96,16,1070,4050,582,8634,568,8,30,18,78,18,29,19,47,17,3,32,20,6,18,689,63,129,74,6,0,67,12,65,1,2,0,29,6135,9,1237,43,8,8936,3,2,6,2,1,2,290,46,2,18,3,9,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,1845,30,482,44,11,6,17,0,322,29,19,43,1269,6,2,3,2,1,2,14,2,196,60,67,8,0,1205,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42719,33,4152,8,221,3,5761,15,7472,3104,541,1507,4938],vu="------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",_u={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},wu="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",xu={5:wu,"5module":wu+" export import",6:wu+" const class extends export import super"},Su=/^in(stanceof)?$/,Iu=new RegExp("["+vu+"]"),Au=new RegExp("["+vu+"-----------------------------------------------------------------------------------------------------------------------------------------------------]");function Tu(t,e){for(var n=65536,i=0;i<e.length;i+=2){if((n+=e[i])>t)return!1;if((n+=e[i+1])>=t)return!0}}function Cu(t,e){return t<65?36===t:t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&Iu.test(String.fromCharCode(t)):!1!==e&&Tu(t,bu)))}function Nu(t,e){return t<48?36===t:t<58||!(t<65)&&(t<91||(t<97?95===t:t<123||(t<=65535?t>=170&&Au.test(String.fromCharCode(t)):!1!==e&&(Tu(t,bu)||Tu(t,gu)))))}var ku=function(t,e){void 0===e&&(e={}),this.label=t,this.keyword=e.keyword,this.beforeExpr=!!e.beforeExpr,this.startsExpr=!!e.startsExpr,this.isLoop=!!e.isLoop,this.isAssign=!!e.isAssign,this.prefix=!!e.prefix,this.postfix=!!e.postfix,this.binop=e.binop||null,this.updateContext=null};function Eu(t,e){return new ku(t,{beforeExpr:!0,binop:e})}var Ou={beforeExpr:!0},Mu={startsExpr:!0},Du={};function Bu(t,e){return void 0===e&&(e={}),e.keyword=t,Du[t]=new ku(t,e)}var Lu={num:new ku("num",Mu),regexp:new ku("regexp",Mu),string:new ku("string",Mu),name:new ku("name",Mu),privateId:new ku("privateId",Mu),eof:new ku("eof"),bracketL:new ku("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new ku("]"),braceL:new ku("{",{beforeExpr:!0,startsExpr:!0}),braceR:new ku("}"),parenL:new ku("(",{beforeExpr:!0,startsExpr:!0}),parenR:new ku(")"),comma:new ku(",",Ou),semi:new ku(";",Ou),colon:new ku(":",Ou),dot:new ku("."),question:new ku("?",Ou),questionDot:new ku("?."),arrow:new ku("=>",Ou),template:new ku("template"),invalidTemplate:new ku("invalidTemplate"),ellipsis:new ku("...",Ou),backQuote:new ku("`",Mu),dollarBraceL:new ku("${",{beforeExpr:!0,startsExpr:!0}),eq:new ku("=",{beforeExpr:!0,isAssign:!0}),assign:new ku("_=",{beforeExpr:!0,isAssign:!0}),incDec:new ku("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new ku("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Eu("||",1),logicalAND:Eu("&&",2),bitwiseOR:Eu("|",3),bitwiseXOR:Eu("^",4),bitwiseAND:Eu("&",5),equality:Eu("==/!=/===/!==",6),relational:Eu("</>/<=/>=",7),bitShift:Eu("<</>>/>>>",8),plusMin:new ku("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Eu("%",10),star:Eu("*",10),slash:Eu("/",10),starstar:new ku("**",{beforeExpr:!0}),coalesce:Eu("??",1),_break:Bu("break"),_case:Bu("case",Ou),_catch:Bu("catch"),_continue:Bu("continue"),_debugger:Bu("debugger"),_default:Bu("default",Ou),_do:Bu("do",{isLoop:!0,beforeExpr:!0}),_else:Bu("else",Ou),_finally:Bu("finally"),_for:Bu("for",{isLoop:!0}),_function:Bu("function",Mu),_if:Bu("if"),_return:Bu("return",Ou),_switch:Bu("switch"),_throw:Bu("throw",Ou),_try:Bu("try"),_var:Bu("var"),_const:Bu("const"),_while:Bu("while",{isLoop:!0}),_with:Bu("with"),_new:Bu("new",{beforeExpr:!0,startsExpr:!0}),_this:Bu("this",Mu),_super:Bu("super",Mu),_class:Bu("class",Mu),_extends:Bu("extends",Ou),_export:Bu("export"),_import:Bu("import",Mu),_null:Bu("null",Mu),_true:Bu("true",Mu),_false:Bu("false",Mu),_in:Bu("in",{beforeExpr:!0,binop:7}),_instanceof:Bu("instanceof",{beforeExpr:!0,binop:7}),_typeof:Bu("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Bu("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Bu("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Pu=/\r\n?|\n|\u2028|\u2029/,Fu=new RegExp(Pu.source,"g");function Vu(t){return 10===t||13===t||8232===t||8233===t}function Uu(t,e,n){void 0===n&&(n=t.length);for(var i=e;i<n;i++){var r=t.charCodeAt(i);if(Vu(r))return i<n-1&&13===r&&10===t.charCodeAt(i+1)?i+2:i+1}return-1}var Ru=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,$u=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,ju=Object.prototype,zu=ju.hasOwnProperty,Wu=ju.toString,Hu=Object.hasOwn||function(t,e){return zu.call(t,e)},qu=Array.isArray||function(t){return"[object Array]"===Wu.call(t)};function Gu(t){return new RegExp("^(?:"+t.replace(/ /g,"|")+")$")}function Yu(t){return t<=65535?String.fromCharCode(t):(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t)))}var Ku=/(?:[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF])/,Ju=function(t,e){this.line=t,this.column=e};Ju.prototype.offset=function(t){return new Ju(this.line,this.column+t)};var Qu=function(t,e,n){this.start=e,this.end=n,null!==t.sourceFile&&(this.source=t.sourceFile)};function Zu(t,e){for(var n=1,i=0;;){var r=Uu(t,i,e);if(r<0)return new Ju(n,e-i);++n,i=r}}var Xu={ecmaVersion:null,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:null,allowSuperOutsideMethod:null,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},th=!1;function eh(t,e){return 2|(t?4:0)|(e?8:0)}var nh=function(t,e,n){this.options=t=function(t){var e={};for(var n in Xu)e[n]=t&&Hu(t,n)?t[n]:Xu[n];if("latest"===e.ecmaVersion?e.ecmaVersion=1e8:null==e.ecmaVersion?(!th&&"object"==typeof console&&console.warn&&(th=!0,console.warn("Since Acorn 8.0.0, options.ecmaVersion is required.\nDefaulting to 2020, but this will stop working in the future.")),e.ecmaVersion=11):e.ecmaVersion>=2015&&(e.ecmaVersion-=2009),null==e.allowReserved&&(e.allowReserved=e.ecmaVersion<5),null==t.allowHashBang&&(e.allowHashBang=e.ecmaVersion>=14),qu(e.onToken)){var i=e.onToken;e.onToken=function(t){return i.push(t)}}return qu(e.onComment)&&(e.onComment=function(t,e){return function(n,i,r,s,a,o){var l={type:n?"Block":"Line",value:i,start:r,end:s};t.locations&&(l.loc=new Qu(this,a,o)),t.ranges&&(l.range=[r,s]),e.push(l)}}(e,e.onComment)),e}(t),this.sourceFile=t.sourceFile,this.keywords=Gu(xu[t.ecmaVersion>=6?6:"module"===t.sourceType?"5module":5]);var i="";!0!==t.allowReserved&&(i=_u[t.ecmaVersion>=6?6:5===t.ecmaVersion?5:3],"module"===t.sourceType&&(i+=" await")),this.reservedWords=Gu(i);var r=(i?i+" ":"")+_u.strict;this.reservedWordsStrict=Gu(r),this.reservedWordsStrictBind=Gu(r+" "+_u.strictBind),this.input=String(e),this.containsEsc=!1,n?(this.pos=n,this.lineStart=this.input.lastIndexOf("\n",n-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Pu).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=Lu.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===t.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.potentialArrowInForAwait=!1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports=Object.create(null),0===this.pos&&t.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(1),this.regexpState=null,this.privateNameStack=[]},ih={inFunction:{configurable:!0},inGenerator:{configurable:!0},inAsync:{configurable:!0},canAwait:{configurable:!0},allowSuper:{configurable:!0},allowDirectSuper:{configurable:!0},treatFunctionsAsVar:{configurable:!0},allowNewDotTarget:{configurable:!0},inClassStaticBlock:{configurable:!0}};nh.prototype.parse=function(){var t=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(t)},ih.inFunction.get=function(){return(2&this.currentVarScope().flags)>0},ih.inGenerator.get=function(){return(8&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},ih.inAsync.get=function(){return(4&this.currentVarScope().flags)>0&&!this.currentVarScope().inClassFieldInit},ih.canAwait.get=function(){for(var t=this.scopeStack.length-1;t>=0;t--){var e=this.scopeStack[t];if(e.inClassFieldInit||256&e.flags)return!1;if(2&e.flags)return(4&e.flags)>0}return this.inModule&&this.options.ecmaVersion>=13||this.options.allowAwaitOutsideFunction},ih.allowSuper.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(64&e)>0||n||this.options.allowSuperOutsideMethod},ih.allowDirectSuper.get=function(){return(128&this.currentThisScope().flags)>0},ih.treatFunctionsAsVar.get=function(){return this.treatFunctionsAsVarInScope(this.currentScope())},ih.allowNewDotTarget.get=function(){var t=this.currentThisScope(),e=t.flags,n=t.inClassFieldInit;return(258&e)>0||n},ih.inClassStaticBlock.get=function(){return(256&this.currentVarScope().flags)>0},nh.extend=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];for(var n=this,i=0;i<t.length;i++)n=t[i](n);return n},nh.parse=function(t,e){return new this(e,t).parse()},nh.parseExpressionAt=function(t,e,n){var i=new this(n,t,e);return i.nextToken(),i.parseExpression()},nh.tokenizer=function(t,e){return new this(e,t)},Object.defineProperties(nh.prototype,ih);var rh=nh.prototype,sh=/^(?:'((?:\\.|[^'\\])*?)'|"((?:\\.|[^"\\])*?)")/;rh.strictDirective=function(t){if(this.options.ecmaVersion<5)return!1;for(;;){$u.lastIndex=t,t+=$u.exec(this.input)[0].length;var e=sh.exec(this.input.slice(t));if(!e)return!1;if("use strict"===(e[1]||e[2])){$u.lastIndex=t+e[0].length;var n=$u.exec(this.input),i=n.index+n[0].length,r=this.input.charAt(i);return";"===r||"}"===r||Pu.test(n[0])&&!(/[(`.[+\-/*%<>=,?^&]/.test(r)||"!"===r&&"="===this.input.charAt(i+1))}t+=e[0].length,$u.lastIndex=t,t+=$u.exec(this.input)[0].length,";"===this.input[t]&&t++}},rh.eat=function(t){return this.type===t&&(this.next(),!0)},rh.isContextual=function(t){return this.type===Lu.name&&this.value===t&&!this.containsEsc},rh.eatContextual=function(t){return!!this.isContextual(t)&&(this.next(),!0)},rh.expectContextual=function(t){this.eatContextual(t)||this.unexpected()},rh.canInsertSemicolon=function(){return this.type===Lu.eof||this.type===Lu.braceR||Pu.test(this.input.slice(this.lastTokEnd,this.start))},rh.insertSemicolon=function(){if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},rh.semicolon=function(){this.eat(Lu.semi)||this.insertSemicolon()||this.unexpected()},rh.afterTrailingComma=function(t,e){if(this.type===t)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),e||this.next(),!0},rh.expect=function(t){this.eat(t)||this.unexpected()},rh.unexpected=function(t){this.raise(null!=t?t:this.start,"Unexpected token")};var ah=function(){this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1};rh.checkPatternErrors=function(t,e){if(t){t.trailingComma>-1&&this.raiseRecoverable(t.trailingComma,"Comma is not permitted after the rest element");var n=e?t.parenthesizedAssign:t.parenthesizedBind;n>-1&&this.raiseRecoverable(n,e?"Assigning to rvalue":"Parenthesized pattern")}},rh.checkExpressionErrors=function(t,e){if(!t)return!1;var n=t.shorthandAssign,i=t.doubleProto;if(!e)return n>=0||i>=0;n>=0&&this.raise(n,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},rh.checkYieldAwaitInDefaultParams=function(){this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},rh.isSimpleAssignTarget=function(t){return"ParenthesizedExpression"===t.type?this.isSimpleAssignTarget(t.expression):"Identifier"===t.type||"MemberExpression"===t.type};var oh=nh.prototype;oh.parseTopLevel=function(t){var e=Object.create(null);for(t.body||(t.body=[]);this.type!==Lu.eof;){var n=this.parseStatement(null,!0,e);t.body.push(n)}if(this.inModule)for(var i=0,r=Object.keys(this.undefinedExports);i<r.length;i+=1){var s=r[i];this.raiseRecoverable(this.undefinedExports[s].start,"Export '"+s+"' is not defined")}return this.adaptDirectivePrologue(t.body),this.next(),t.sourceType=this.options.sourceType,this.finishNode(t,"Program")};var lh={kind:"loop"},ch={kind:"switch"};oh.isLet=function(t){if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;$u.lastIndex=this.pos;var e=$u.exec(this.input),n=this.pos+e[0].length,i=this.input.charCodeAt(n);if(91===i||92===i||i>55295&&i<56320)return!0;if(t)return!1;if(123===i)return!0;if(Cu(i,!0)){for(var r=n+1;Nu(i=this.input.charCodeAt(r),!0);)++r;if(92===i||i>55295&&i<56320)return!0;var s=this.input.slice(n,r);if(!Su.test(s))return!0}return!1},oh.isAsyncFunction=function(){if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;$u.lastIndex=this.pos;var t,e=$u.exec(this.input),n=this.pos+e[0].length;return!(Pu.test(this.input.slice(this.pos,n))||"function"!==this.input.slice(n,n+8)||n+8!==this.input.length&&(Nu(t=this.input.charCodeAt(n+8))||t>55295&&t<56320))},oh.parseStatement=function(t,e,n){var i,r=this.type,s=this.startNode();switch(this.isLet(t)&&(r=Lu._var,i="let"),r){case Lu._break:case Lu._continue:return this.parseBreakContinueStatement(s,r.keyword);case Lu._debugger:return this.parseDebuggerStatement(s);case Lu._do:return this.parseDoStatement(s);case Lu._for:return this.parseForStatement(s);case Lu._function:return t&&(this.strict||"if"!==t&&"label"!==t)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!t);case Lu._class:return t&&this.unexpected(),this.parseClass(s,!0);case Lu._if:return this.parseIfStatement(s);case Lu._return:return this.parseReturnStatement(s);case Lu._switch:return this.parseSwitchStatement(s);case Lu._throw:return this.parseThrowStatement(s);case Lu._try:return this.parseTryStatement(s);case Lu._const:case Lu._var:return i=i||this.value,t&&"var"!==i&&this.unexpected(),this.parseVarStatement(s,i);case Lu._while:return this.parseWhileStatement(s);case Lu._with:return this.parseWithStatement(s);case Lu.braceL:return this.parseBlock(!0,s);case Lu.semi:return this.parseEmptyStatement(s);case Lu._export:case Lu._import:if(this.options.ecmaVersion>10&&r===Lu._import){$u.lastIndex=this.pos;var a=$u.exec(this.input),o=this.pos+a[0].length,l=this.input.charCodeAt(o);if(40===l||46===l)return this.parseExpressionStatement(s,this.parseExpression())}return this.options.allowImportExportEverywhere||(e||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),r===Lu._import?this.parseImport(s):this.parseExport(s,n);default:if(this.isAsyncFunction())return t&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!t);var c=this.value,u=this.parseExpression();return r===Lu.name&&"Identifier"===u.type&&this.eat(Lu.colon)?this.parseLabeledStatement(s,c,u,t):this.parseExpressionStatement(s,u)}},oh.parseBreakContinueStatement=function(t,e){var n="break"===e;this.next(),this.eat(Lu.semi)||this.insertSemicolon()?t.label=null:this.type!==Lu.name?this.unexpected():(t.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var r=this.labels[i];if(null==t.label||r.name===t.label.name){if(null!=r.kind&&(n||"loop"===r.kind))break;if(t.label&&n)break}}return i===this.labels.length&&this.raise(t.start,"Unsyntactic "+e),this.finishNode(t,n?"BreakStatement":"ContinueStatement")},oh.parseDebuggerStatement=function(t){return this.next(),this.semicolon(),this.finishNode(t,"DebuggerStatement")},oh.parseDoStatement=function(t){return this.next(),this.labels.push(lh),t.body=this.parseStatement("do"),this.labels.pop(),this.expect(Lu._while),t.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(Lu.semi):this.semicolon(),this.finishNode(t,"DoWhileStatement")},oh.parseForStatement=function(t){this.next();var e=this.options.ecmaVersion>=9&&this.canAwait&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(lh),this.enterScope(0),this.expect(Lu.parenL),this.type===Lu.semi)return e>-1&&this.unexpected(e),this.parseFor(t,null);var n=this.isLet();if(this.type===Lu._var||this.type===Lu._const||n){var i=this.startNode(),r=n?"let":this.value;return this.next(),this.parseVar(i,!0,r),this.finishNode(i,"VariableDeclaration"),(this.type===Lu._in||this.options.ecmaVersion>=6&&this.isContextual("of"))&&1===i.declarations.length?(this.options.ecmaVersion>=9&&(this.type===Lu._in?e>-1&&this.unexpected(e):t.await=e>-1),this.parseForIn(t,i)):(e>-1&&this.unexpected(e),this.parseFor(t,i))}var s=this.isContextual("let"),a=!1,o=new ah,l=this.parseExpression(!(e>-1)||"await",o);return this.type===Lu._in||(a=this.options.ecmaVersion>=6&&this.isContextual("of"))?(this.options.ecmaVersion>=9&&(this.type===Lu._in?e>-1&&this.unexpected(e):t.await=e>-1),s&&a&&this.raise(l.start,"The left-hand side of a for-of loop may not start with 'let'."),this.toAssignable(l,!1,o),this.checkLValPattern(l),this.parseForIn(t,l)):(this.checkExpressionErrors(o,!0),e>-1&&this.unexpected(e),this.parseFor(t,l))},oh.parseFunctionStatement=function(t,e,n){return this.next(),this.parseFunction(t,hh|(n?0:dh),!1,e)},oh.parseIfStatement=function(t){return this.next(),t.test=this.parseParenExpression(),t.consequent=this.parseStatement("if"),t.alternate=this.eat(Lu._else)?this.parseStatement("if"):null,this.finishNode(t,"IfStatement")},oh.parseReturnStatement=function(t){return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(Lu.semi)||this.insertSemicolon()?t.argument=null:(t.argument=this.parseExpression(),this.semicolon()),this.finishNode(t,"ReturnStatement")},oh.parseSwitchStatement=function(t){var e;this.next(),t.discriminant=this.parseParenExpression(),t.cases=[],this.expect(Lu.braceL),this.labels.push(ch),this.enterScope(0);for(var n=!1;this.type!==Lu.braceR;)if(this.type===Lu._case||this.type===Lu._default){var i=this.type===Lu._case;e&&this.finishNode(e,"SwitchCase"),t.cases.push(e=this.startNode()),e.consequent=[],this.next(),i?e.test=this.parseExpression():(n&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),n=!0,e.test=null),this.expect(Lu.colon)}else e||this.unexpected(),e.consequent.push(this.parseStatement(null));return this.exitScope(),e&&this.finishNode(e,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(t,"SwitchStatement")},oh.parseThrowStatement=function(t){return this.next(),Pu.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),t.argument=this.parseExpression(),this.semicolon(),this.finishNode(t,"ThrowStatement")};var uh=[];oh.parseTryStatement=function(t){if(this.next(),t.block=this.parseBlock(),t.handler=null,this.type===Lu._catch){var e=this.startNode();if(this.next(),this.eat(Lu.parenL)){e.param=this.parseBindingAtom();var n="Identifier"===e.param.type;this.enterScope(n?32:0),this.checkLValPattern(e.param,n?4:2),this.expect(Lu.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),e.param=null,this.enterScope(0);e.body=this.parseBlock(!1),this.exitScope(),t.handler=this.finishNode(e,"CatchClause")}return t.finalizer=this.eat(Lu._finally)?this.parseBlock():null,t.handler||t.finalizer||this.raise(t.start,"Missing catch or finally clause"),this.finishNode(t,"TryStatement")},oh.parseVarStatement=function(t,e){return this.next(),this.parseVar(t,!1,e),this.semicolon(),this.finishNode(t,"VariableDeclaration")},oh.parseWhileStatement=function(t){return this.next(),t.test=this.parseParenExpression(),this.labels.push(lh),t.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(t,"WhileStatement")},oh.parseWithStatement=function(t){return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),t.object=this.parseParenExpression(),t.body=this.parseStatement("with"),this.finishNode(t,"WithStatement")},oh.parseEmptyStatement=function(t){return this.next(),this.finishNode(t,"EmptyStatement")},oh.parseLabeledStatement=function(t,e,n,i){for(var r=0,s=this.labels;r<s.length;r+=1)s[r].name===e&&this.raise(n.start,"Label '"+e+"' is already declared");for(var a=this.type.isLoop?"loop":this.type===Lu._switch?"switch":null,o=this.labels.length-1;o>=0;o--){var l=this.labels[o];if(l.statementStart!==t.start)break;l.statementStart=this.start,l.kind=a}return this.labels.push({name:e,kind:a,statementStart:this.start}),t.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),t.label=n,this.finishNode(t,"LabeledStatement")},oh.parseExpressionStatement=function(t,e){return t.expression=e,this.semicolon(),this.finishNode(t,"ExpressionStatement")},oh.parseBlock=function(t,e,n){for(void 0===t&&(t=!0),void 0===e&&(e=this.startNode()),e.body=[],this.expect(Lu.braceL),t&&this.enterScope(0);this.type!==Lu.braceR;){var i=this.parseStatement(null);e.body.push(i)}return n&&(this.strict=!1),this.next(),t&&this.exitScope(),this.finishNode(e,"BlockStatement")},oh.parseFor=function(t,e){return t.init=e,this.expect(Lu.semi),t.test=this.type===Lu.semi?null:this.parseExpression(),this.expect(Lu.semi),t.update=this.type===Lu.parenR?null:this.parseExpression(),this.expect(Lu.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,"ForStatement")},oh.parseForIn=function(t,e){var n=this.type===Lu._in;return this.next(),"VariableDeclaration"===e.type&&null!=e.declarations[0].init&&(!n||this.options.ecmaVersion<8||this.strict||"var"!==e.kind||"Identifier"!==e.declarations[0].id.type)&&this.raise(e.start,(n?"for-in":"for-of")+" loop variable declaration may not have an initializer"),t.left=e,t.right=n?this.parseExpression():this.parseMaybeAssign(),this.expect(Lu.parenR),t.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(t,n?"ForInStatement":"ForOfStatement")},oh.parseVar=function(t,e,n){for(t.declarations=[],t.kind=n;;){var i=this.startNode();if(this.parseVarId(i,n),this.eat(Lu.eq)?i.init=this.parseMaybeAssign(e):"const"!==n||this.type===Lu._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===i.id.type||e&&(this.type===Lu._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),t.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(Lu.comma))break}return t},oh.parseVarId=function(t,e){t.id=this.parseBindingAtom(),this.checkLValPattern(t.id,"var"===e?1:2,!1)};var hh=1,dh=2;function ph(t,e){var n=e.key.name,i=t[n],r="true";return"MethodDefinition"!==e.type||"get"!==e.kind&&"set"!==e.kind||(r=(e.static?"s":"i")+e.kind),"iget"===i&&"iset"===r||"iset"===i&&"iget"===r||"sget"===i&&"sset"===r||"sset"===i&&"sget"===r?(t[n]="true",!1):!!i||(t[n]=r,!1)}function fh(t,e){var n=t.computed,i=t.key;return!n&&("Identifier"===i.type&&i.name===e||"Literal"===i.type&&i.value===e)}oh.parseFunction=function(t,e,n,i,r){this.initFunction(t),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===Lu.star&&e&dh&&this.unexpected(),t.generator=this.eat(Lu.star)),this.options.ecmaVersion>=8&&(t.async=!!i),e&hh&&(t.id=4&e&&this.type!==Lu.name?null:this.parseIdent(),!t.id||e&dh||this.checkLValSimple(t.id,this.strict||t.generator||t.async?this.treatFunctionsAsVar?1:2:3));var s=this.yieldPos,a=this.awaitPos,o=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(eh(t.async,t.generator)),e&hh||(t.id=this.type===Lu.name?this.parseIdent():null),this.parseFunctionParams(t),this.parseFunctionBody(t,n,!1,r),this.yieldPos=s,this.awaitPos=a,this.awaitIdentPos=o,this.finishNode(t,e&hh?"FunctionDeclaration":"FunctionExpression")},oh.parseFunctionParams=function(t){this.expect(Lu.parenL),t.params=this.parseBindingList(Lu.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},oh.parseClass=function(t,e){this.next();var n=this.strict;this.strict=!0,this.parseClassId(t,e),this.parseClassSuper(t);var i=this.enterClassBody(),r=this.startNode(),s=!1;for(r.body=[],this.expect(Lu.braceL);this.type!==Lu.braceR;){var a=this.parseClassElement(null!==t.superClass);a&&(r.body.push(a),"MethodDefinition"===a.type&&"constructor"===a.kind?(s&&this.raise(a.start,"Duplicate constructor in the same class"),s=!0):a.key&&"PrivateIdentifier"===a.key.type&&ph(i,a)&&this.raiseRecoverable(a.key.start,"Identifier '#"+a.key.name+"' has already been declared"))}return this.strict=n,this.next(),t.body=this.finishNode(r,"ClassBody"),this.exitClassBody(),this.finishNode(t,e?"ClassDeclaration":"ClassExpression")},oh.parseClassElement=function(t){if(this.eat(Lu.semi))return null;var e=this.options.ecmaVersion,n=this.startNode(),i="",r=!1,s=!1,a="method",o=!1;if(this.eatContextual("static")){if(e>=13&&this.eat(Lu.braceL))return this.parseClassStaticBlock(n),n;this.isClassElementNameStart()||this.type===Lu.star?o=!0:i="static"}if(n.static=o,!i&&e>=8&&this.eatContextual("async")&&(!this.isClassElementNameStart()&&this.type!==Lu.star||this.canInsertSemicolon()?i="async":s=!0),!i&&(e>=9||!s)&&this.eat(Lu.star)&&(r=!0),!i&&!s&&!r){var l=this.value;(this.eatContextual("get")||this.eatContextual("set"))&&(this.isClassElementNameStart()?a=l:i=l)}if(i?(n.computed=!1,n.key=this.startNodeAt(this.lastTokStart,this.lastTokStartLoc),n.key.name=i,this.finishNode(n.key,"Identifier")):this.parseClassElementName(n),e<13||this.type===Lu.parenL||"method"!==a||r||s){var c=!n.static&&fh(n,"constructor"),u=c&&t;c&&"method"!==a&&this.raise(n.key.start,"Constructor can't have get/set modifier"),n.kind=c?"constructor":a,this.parseClassMethod(n,r,s,u)}else this.parseClassField(n);return n},oh.isClassElementNameStart=function(){return this.type===Lu.name||this.type===Lu.privateId||this.type===Lu.num||this.type===Lu.string||this.type===Lu.bracketL||this.type.keyword},oh.parseClassElementName=function(t){this.type===Lu.privateId?("constructor"===this.value&&this.raise(this.start,"Classes can't have an element named '#constructor'"),t.computed=!1,t.key=this.parsePrivateIdent()):this.parsePropertyName(t)},oh.parseClassMethod=function(t,e,n,i){var r=t.key;"constructor"===t.kind?(e&&this.raise(r.start,"Constructor can't be a generator"),n&&this.raise(r.start,"Constructor can't be an async method")):t.static&&fh(t,"prototype")&&this.raise(r.start,"Classes may not have a static property named prototype");var s=t.value=this.parseMethod(e,n,i);return"get"===t.kind&&0!==s.params.length&&this.raiseRecoverable(s.start,"getter should have no params"),"set"===t.kind&&1!==s.params.length&&this.raiseRecoverable(s.start,"setter should have exactly one param"),"set"===t.kind&&"RestElement"===s.params[0].type&&this.raiseRecoverable(s.params[0].start,"Setter cannot use rest params"),this.finishNode(t,"MethodDefinition")},oh.parseClassField=function(t){if(fh(t,"constructor")?this.raise(t.key.start,"Classes can't have a field named 'constructor'"):t.static&&fh(t,"prototype")&&this.raise(t.key.start,"Classes can't have a static field named 'prototype'"),this.eat(Lu.eq)){var e=this.currentThisScope(),n=e.inClassFieldInit;e.inClassFieldInit=!0,t.value=this.parseMaybeAssign(),e.inClassFieldInit=n}else t.value=null;return this.semicolon(),this.finishNode(t,"PropertyDefinition")},oh.parseClassStaticBlock=function(t){t.body=[];var e=this.labels;for(this.labels=[],this.enterScope(320);this.type!==Lu.braceR;){var n=this.parseStatement(null);t.body.push(n)}return this.next(),this.exitScope(),this.labels=e,this.finishNode(t,"StaticBlock")},oh.parseClassId=function(t,e){this.type===Lu.name?(t.id=this.parseIdent(),e&&this.checkLValSimple(t.id,2,!1)):(!0===e&&this.unexpected(),t.id=null)},oh.parseClassSuper=function(t){t.superClass=this.eat(Lu._extends)?this.parseExprSubscripts(!1):null},oh.enterClassBody=function(){var t={declared:Object.create(null),used:[]};return this.privateNameStack.push(t),t.declared},oh.exitClassBody=function(){for(var t=this.privateNameStack.pop(),e=t.declared,n=t.used,i=this.privateNameStack.length,r=0===i?null:this.privateNameStack[i-1],s=0;s<n.length;++s){var a=n[s];Hu(e,a.name)||(r?r.used.push(a):this.raiseRecoverable(a.start,"Private field '#"+a.name+"' must be declared in an enclosing class"))}},oh.parseExport=function(t,e){if(this.next(),this.eat(Lu.star))return this.options.ecmaVersion>=11&&(this.eatContextual("as")?(t.exported=this.parseModuleExportName(),this.checkExport(e,t.exported,this.lastTokStart)):t.exported=null),this.expectContextual("from"),this.type!==Lu.string&&this.unexpected(),t.source=this.parseExprAtom(),this.semicolon(),this.finishNode(t,"ExportAllDeclaration");if(this.eat(Lu._default)){var n;if(this.checkExport(e,"default",this.lastTokStart),this.type===Lu._function||(n=this.isAsyncFunction())){var i=this.startNode();this.next(),n&&this.next(),t.declaration=this.parseFunction(i,4|hh,!1,n)}else if(this.type===Lu._class){var r=this.startNode();t.declaration=this.parseClass(r,"nullableID")}else t.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(t,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())t.declaration=this.parseStatement(null),"VariableDeclaration"===t.declaration.type?this.checkVariableExport(e,t.declaration.declarations):this.checkExport(e,t.declaration.id,t.declaration.id.start),t.specifiers=[],t.source=null;else{if(t.declaration=null,t.specifiers=this.parseExportSpecifiers(e),this.eatContextual("from"))this.type!==Lu.string&&this.unexpected(),t.source=this.parseExprAtom();else{for(var s=0,a=t.specifiers;s<a.length;s+=1){var o=a[s];this.checkUnreserved(o.local),this.checkLocalExport(o.local),"Literal"===o.local.type&&this.raise(o.local.start,"A string literal cannot be used as an exported binding without `from`.")}t.source=null}this.semicolon()}return this.finishNode(t,"ExportNamedDeclaration")},oh.checkExport=function(t,e,n){t&&("string"!=typeof e&&(e="Identifier"===e.type?e.name:e.value),Hu(t,e)&&this.raiseRecoverable(n,"Duplicate export '"+e+"'"),t[e]=!0)},oh.checkPatternExport=function(t,e){var n=e.type;if("Identifier"===n)this.checkExport(t,e,e.start);else if("ObjectPattern"===n)for(var i=0,r=e.properties;i<r.length;i+=1){var s=r[i];this.checkPatternExport(t,s)}else if("ArrayPattern"===n)for(var a=0,o=e.elements;a<o.length;a+=1){var l=o[a];l&&this.checkPatternExport(t,l)}else"Property"===n?this.checkPatternExport(t,e.value):"AssignmentPattern"===n?this.checkPatternExport(t,e.left):"RestElement"===n?this.checkPatternExport(t,e.argument):"ParenthesizedExpression"===n&&this.checkPatternExport(t,e.expression)},oh.checkVariableExport=function(t,e){if(t)for(var n=0,i=e;n<i.length;n+=1){var r=i[n];this.checkPatternExport(t,r.id)}},oh.shouldParseExportStatement=function(){return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},oh.parseExportSpecifiers=function(t){var e=[],n=!0;for(this.expect(Lu.braceL);!this.eat(Lu.braceR);){if(n)n=!1;else if(this.expect(Lu.comma),this.afterTrailingComma(Lu.braceR))break;var i=this.startNode();i.local=this.parseModuleExportName(),i.exported=this.eatContextual("as")?this.parseModuleExportName():i.local,this.checkExport(t,i.exported,i.exported.start),e.push(this.finishNode(i,"ExportSpecifier"))}return e},oh.parseImport=function(t){return this.next(),this.type===Lu.string?(t.specifiers=uh,t.source=this.parseExprAtom()):(t.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),t.source=this.type===Lu.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(t,"ImportDeclaration")},oh.parseImportSpecifiers=function(){var t=[],e=!0;if(this.type===Lu.name){var n=this.startNode();if(n.local=this.parseIdent(),this.checkLValSimple(n.local,2),t.push(this.finishNode(n,"ImportDefaultSpecifier")),!this.eat(Lu.comma))return t}if(this.type===Lu.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLValSimple(i.local,2),t.push(this.finishNode(i,"ImportNamespaceSpecifier")),t}for(this.expect(Lu.braceL);!this.eat(Lu.braceR);){if(e)e=!1;else if(this.expect(Lu.comma),this.afterTrailingComma(Lu.braceR))break;var r=this.startNode();r.imported=this.parseModuleExportName(),this.eatContextual("as")?r.local=this.parseIdent():(this.checkUnreserved(r.imported),r.local=r.imported),this.checkLValSimple(r.local,2),t.push(this.finishNode(r,"ImportSpecifier"))}return t},oh.parseModuleExportName=function(){if(this.options.ecmaVersion>=13&&this.type===Lu.string){var t=this.parseLiteral(this.value);return Ku.test(t.value)&&this.raise(t.start,"An export name cannot include a lone surrogate."),t}return this.parseIdent(!0)},oh.adaptDirectivePrologue=function(t){for(var e=0;e<t.length&&this.isDirectiveCandidate(t[e]);++e)t[e].directive=t[e].expression.raw.slice(1,-1)},oh.isDirectiveCandidate=function(t){return this.options.ecmaVersion>=5&&"ExpressionStatement"===t.type&&"Literal"===t.expression.type&&"string"==typeof t.expression.value&&('"'===this.input[t.start]||"'"===this.input[t.start])};var mh=nh.prototype;mh.toAssignable=function(t,e,n){if(this.options.ecmaVersion>=6&&t)switch(t.type){case"Identifier":this.inAsync&&"await"===t.name&&this.raise(t.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"AssignmentPattern":case"RestElement":break;case"ObjectExpression":t.type="ObjectPattern",n&&this.checkPatternErrors(n,!0);for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.toAssignable(s,e),"RestElement"!==s.type||"ArrayPattern"!==s.argument.type&&"ObjectPattern"!==s.argument.type||this.raise(s.argument.start,"Unexpected token")}break;case"Property":"init"!==t.kind&&this.raise(t.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(t.value,e);break;case"ArrayExpression":t.type="ArrayPattern",n&&this.checkPatternErrors(n,!0),this.toAssignableList(t.elements,e);break;case"SpreadElement":t.type="RestElement",this.toAssignable(t.argument,e),"AssignmentPattern"===t.argument.type&&this.raise(t.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==t.operator&&this.raise(t.left.end,"Only '=' operator can be used for specifying default value."),t.type="AssignmentPattern",delete t.operator,this.toAssignable(t.left,e);break;case"ParenthesizedExpression":this.toAssignable(t.expression,e,n);break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":if(!e)break;default:this.raise(t.start,"Assigning to rvalue")}else n&&this.checkPatternErrors(n,!0);return t},mh.toAssignableList=function(t,e){for(var n=t.length,i=0;i<n;i++){var r=t[i];r&&this.toAssignable(r,e)}if(n){var s=t[n-1];6===this.options.ecmaVersion&&e&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return t},mh.parseSpread=function(t){var e=this.startNode();return this.next(),e.argument=this.parseMaybeAssign(!1,t),this.finishNode(e,"SpreadElement")},mh.parseRestBinding=function(){var t=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==Lu.name&&this.unexpected(),t.argument=this.parseBindingAtom(),this.finishNode(t,"RestElement")},mh.parseBindingAtom=function(){if(this.options.ecmaVersion>=6)switch(this.type){case Lu.bracketL:var t=this.startNode();return this.next(),t.elements=this.parseBindingList(Lu.bracketR,!0,!0),this.finishNode(t,"ArrayPattern");case Lu.braceL:return this.parseObj(!0)}return this.parseIdent()},mh.parseBindingList=function(t,e,n){for(var i=[],r=!0;!this.eat(t);)if(r?r=!1:this.expect(Lu.comma),e&&this.type===Lu.comma)i.push(null);else{if(n&&this.afterTrailingComma(t))break;if(this.type===Lu.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===Lu.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(t);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}return i},mh.parseBindingListItem=function(t){return t},mh.parseMaybeDefault=function(t,e,n){if(n=n||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(Lu.eq))return n;var i=this.startNodeAt(t,e);return i.left=n,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},mh.checkLValSimple=function(t,e,n){void 0===e&&(e=0);var i=0!==e;switch(t.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(t.name)&&this.raiseRecoverable(t.start,(i?"Binding ":"Assigning to ")+t.name+" in strict mode"),i&&(2===e&&"let"===t.name&&this.raiseRecoverable(t.start,"let is disallowed as a lexically bound name"),n&&(Hu(n,t.name)&&this.raiseRecoverable(t.start,"Argument name clash"),n[t.name]=!0),5!==e&&this.declareName(t.name,e,t.start));break;case"ChainExpression":this.raiseRecoverable(t.start,"Optional chaining cannot appear in left-hand side");break;case"MemberExpression":i&&this.raiseRecoverable(t.start,"Binding member expression");break;case"ParenthesizedExpression":return i&&this.raiseRecoverable(t.start,"Binding parenthesized expression"),this.checkLValSimple(t.expression,e,n);default:this.raise(t.start,(i?"Binding":"Assigning to")+" rvalue")}},mh.checkLValPattern=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"ObjectPattern":for(var i=0,r=t.properties;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,e,n)}break;case"ArrayPattern":for(var a=0,o=t.elements;a<o.length;a+=1){var l=o[a];l&&this.checkLValInnerPattern(l,e,n)}break;default:this.checkLValSimple(t,e,n)}},mh.checkLValInnerPattern=function(t,e,n){switch(void 0===e&&(e=0),t.type){case"Property":this.checkLValInnerPattern(t.value,e,n);break;case"AssignmentPattern":this.checkLValPattern(t.left,e,n);break;case"RestElement":this.checkLValPattern(t.argument,e,n);break;default:this.checkLValPattern(t,e,n)}};var yh=function(t,e,n,i,r){this.token=t,this.isExpr=!!e,this.preserveSpace=!!n,this.override=i,this.generator=!!r},gh={b_stat:new yh("{",!1),b_expr:new yh("{",!0),b_tmpl:new yh("${",!1),p_stat:new yh("(",!1),p_expr:new yh("(",!0),q_tmpl:new yh("`",!0,!0,(function(t){return t.tryReadTemplateToken()})),f_stat:new yh("function",!1),f_expr:new yh("function",!0),f_expr_gen:new yh("function",!0,!1,null,!0),f_gen:new yh("function",!1,!1,null,!0)},bh=nh.prototype;bh.initialContext=function(){return[gh.b_stat]},bh.curContext=function(){return this.context[this.context.length-1]},bh.braceIsBlock=function(t){var e=this.curContext();return e===gh.f_expr||e===gh.f_stat||(t!==Lu.colon||e!==gh.b_stat&&e!==gh.b_expr?t===Lu._return||t===Lu.name&&this.exprAllowed?Pu.test(this.input.slice(this.lastTokEnd,this.start)):t===Lu._else||t===Lu.semi||t===Lu.eof||t===Lu.parenR||t===Lu.arrow||(t===Lu.braceL?e===gh.b_stat:t!==Lu._var&&t!==Lu._const&&t!==Lu.name&&!this.exprAllowed):!e.isExpr)},bh.inGeneratorContext=function(){for(var t=this.context.length-1;t>=1;t--){var e=this.context[t];if("function"===e.token)return e.generator}return!1},bh.updateContext=function(t){var e,n=this.type;n.keyword&&t===Lu.dot?this.exprAllowed=!1:(e=n.updateContext)?e.call(this,t):this.exprAllowed=n.beforeExpr},bh.overrideContext=function(t){this.curContext()!==t&&(this.context[this.context.length-1]=t)},Lu.parenR.updateContext=Lu.braceR.updateContext=function(){if(1!==this.context.length){var t=this.context.pop();t===gh.b_stat&&"function"===this.curContext().token&&(t=this.context.pop()),this.exprAllowed=!t.isExpr}else this.exprAllowed=!0},Lu.braceL.updateContext=function(t){this.context.push(this.braceIsBlock(t)?gh.b_stat:gh.b_expr),this.exprAllowed=!0},Lu.dollarBraceL.updateContext=function(){this.context.push(gh.b_tmpl),this.exprAllowed=!0},Lu.parenL.updateContext=function(t){var e=t===Lu._if||t===Lu._for||t===Lu._with||t===Lu._while;this.context.push(e?gh.p_stat:gh.p_expr),this.exprAllowed=!0},Lu.incDec.updateContext=function(){},Lu._function.updateContext=Lu._class.updateContext=function(t){!t.beforeExpr||t===Lu._else||t===Lu.semi&&this.curContext()!==gh.p_stat||t===Lu._return&&Pu.test(this.input.slice(this.lastTokEnd,this.start))||(t===Lu.colon||t===Lu.braceL)&&this.curContext()===gh.b_stat?this.context.push(gh.f_stat):this.context.push(gh.f_expr),this.exprAllowed=!1},Lu.backQuote.updateContext=function(){this.curContext()===gh.q_tmpl?this.context.pop():this.context.push(gh.q_tmpl),this.exprAllowed=!1},Lu.star.updateContext=function(t){if(t===Lu._function){var e=this.context.length-1;this.context[e]===gh.f_expr?this.context[e]=gh.f_expr_gen:this.context[e]=gh.f_gen}this.exprAllowed=!0},Lu.name.updateContext=function(t){var e=!1;this.options.ecmaVersion>=6&&t!==Lu.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(e=!0),this.exprAllowed=e};var vh=nh.prototype;function _h(t){return"MemberExpression"===t.type&&"PrivateIdentifier"===t.property.type||"ChainExpression"===t.type&&_h(t.expression)}vh.checkPropClash=function(t,e,n){if(!(this.options.ecmaVersion>=9&&"SpreadElement"===t.type||this.options.ecmaVersion>=6&&(t.computed||t.method||t.shorthand))){var i,r=t.key;switch(r.type){case"Identifier":i=r.name;break;case"Literal":i=String(r.value);break;default:return}var s=t.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===s&&(e.proto&&(n?n.doubleProto<0&&(n.doubleProto=r.start):this.raiseRecoverable(r.start,"Redefinition of __proto__ property")),e.proto=!0);else{var a=e[i="$"+i];a?("init"===s?this.strict&&a.init||a.get||a.set:a.init||a[s])&&this.raiseRecoverable(r.start,"Redefinition of property"):a=e[i]={init:!1,get:!1,set:!1},a[s]=!0}}},vh.parseExpression=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeAssign(t,e);if(this.type===Lu.comma){var s=this.startNodeAt(n,i);for(s.expressions=[r];this.eat(Lu.comma);)s.expressions.push(this.parseMaybeAssign(t,e));return this.finishNode(s,"SequenceExpression")}return r},vh.parseMaybeAssign=function(t,e,n){if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(t);this.exprAllowed=!1}var i=!1,r=-1,s=-1,a=-1;e?(r=e.parenthesizedAssign,s=e.trailingComma,a=e.doubleProto,e.parenthesizedAssign=e.trailingComma=-1):(e=new ah,i=!0);var o=this.start,l=this.startLoc;this.type!==Lu.parenL&&this.type!==Lu.name||(this.potentialArrowAt=this.start,this.potentialArrowInForAwait="await"===t);var c=this.parseMaybeConditional(t,e);if(n&&(c=n.call(this,c,o,l)),this.type.isAssign){var u=this.startNodeAt(o,l);return u.operator=this.value,this.type===Lu.eq&&(c=this.toAssignable(c,!1,e)),i||(e.parenthesizedAssign=e.trailingComma=e.doubleProto=-1),e.shorthandAssign>=c.start&&(e.shorthandAssign=-1),this.type===Lu.eq?this.checkLValPattern(c):this.checkLValSimple(c),u.left=c,this.next(),u.right=this.parseMaybeAssign(t),a>-1&&(e.doubleProto=a),this.finishNode(u,"AssignmentExpression")}return i&&this.checkExpressionErrors(e,!0),r>-1&&(e.parenthesizedAssign=r),s>-1&&(e.trailingComma=s),c},vh.parseMaybeConditional=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprOps(t,e);if(this.checkExpressionErrors(e))return r;if(this.eat(Lu.question)){var s=this.startNodeAt(n,i);return s.test=r,s.consequent=this.parseMaybeAssign(),this.expect(Lu.colon),s.alternate=this.parseMaybeAssign(t),this.finishNode(s,"ConditionalExpression")}return r},vh.parseExprOps=function(t,e){var n=this.start,i=this.startLoc,r=this.parseMaybeUnary(e,!1,!1,t);return this.checkExpressionErrors(e)||r.start===n&&"ArrowFunctionExpression"===r.type?r:this.parseExprOp(r,n,i,-1,t)},vh.parseExprOp=function(t,e,n,i,r){var s=this.type.binop;if(null!=s&&(!r||this.type!==Lu._in)&&s>i){var a=this.type===Lu.logicalOR||this.type===Lu.logicalAND,o=this.type===Lu.coalesce;o&&(s=Lu.logicalAND.binop);var l=this.value;this.next();var c=this.start,u=this.startLoc,h=this.parseExprOp(this.parseMaybeUnary(null,!1,!1,r),c,u,s,r),d=this.buildBinary(e,n,t,h,l,a||o);return(a&&this.type===Lu.coalesce||o&&(this.type===Lu.logicalOR||this.type===Lu.logicalAND))&&this.raiseRecoverable(this.start,"Logical expressions and coalesce expressions cannot be mixed. Wrap either by parentheses"),this.parseExprOp(d,e,n,i,r)}return t},vh.buildBinary=function(t,e,n,i,r,s){"PrivateIdentifier"===i.type&&this.raise(i.start,"Private identifier can only be left side of binary expression");var a=this.startNodeAt(t,e);return a.left=n,a.operator=r,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},vh.parseMaybeUnary=function(t,e,n,i){var r,s=this.start,a=this.startLoc;if(this.isContextual("await")&&this.canAwait)r=this.parseAwait(i),e=!0;else if(this.type.prefix){var o=this.startNode(),l=this.type===Lu.incDec;o.operator=this.value,o.prefix=!0,this.next(),o.argument=this.parseMaybeUnary(null,!0,l,i),this.checkExpressionErrors(t,!0),l?this.checkLValSimple(o.argument):this.strict&&"delete"===o.operator&&"Identifier"===o.argument.type?this.raiseRecoverable(o.start,"Deleting local variable in strict mode"):"delete"===o.operator&&_h(o.argument)?this.raiseRecoverable(o.start,"Private fields can not be deleted"):e=!0,r=this.finishNode(o,l?"UpdateExpression":"UnaryExpression")}else if(e||this.type!==Lu.privateId){if(r=this.parseExprSubscripts(t,i),this.checkExpressionErrors(t))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var c=this.startNodeAt(s,a);c.operator=this.value,c.prefix=!1,c.argument=r,this.checkLValSimple(r),this.next(),r=this.finishNode(c,"UpdateExpression")}}else(i||0===this.privateNameStack.length)&&this.unexpected(),r=this.parsePrivateIdent(),this.type!==Lu._in&&this.unexpected();return n||!this.eat(Lu.starstar)?r:e?void this.unexpected(this.lastTokStart):this.buildBinary(s,a,r,this.parseMaybeUnary(null,!1,!1,i),"**",!1)},vh.parseExprSubscripts=function(t,e){var n=this.start,i=this.startLoc,r=this.parseExprAtom(t,e);if("ArrowFunctionExpression"===r.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd))return r;var s=this.parseSubscripts(r,n,i,!1,e);return t&&"MemberExpression"===s.type&&(t.parenthesizedAssign>=s.start&&(t.parenthesizedAssign=-1),t.parenthesizedBind>=s.start&&(t.parenthesizedBind=-1),t.trailingComma>=s.start&&(t.trailingComma=-1)),s},vh.parseSubscripts=function(t,e,n,i,r){for(var s=this.options.ecmaVersion>=8&&"Identifier"===t.type&&"async"===t.name&&this.lastTokEnd===t.end&&!this.canInsertSemicolon()&&t.end-t.start==5&&this.potentialArrowAt===t.start,a=!1;;){var o=this.parseSubscript(t,e,n,i,s,a,r);if(o.optional&&(a=!0),o===t||"ArrowFunctionExpression"===o.type){if(a){var l=this.startNodeAt(e,n);l.expression=o,o=this.finishNode(l,"ChainExpression")}return o}t=o}},vh.parseSubscript=function(t,e,n,i,r,s,a){var o=this.options.ecmaVersion>=11,l=o&&this.eat(Lu.questionDot);i&&l&&this.raise(this.lastTokStart,"Optional chaining cannot appear in the callee of new expressions");var c=this.eat(Lu.bracketL);if(c||l&&this.type!==Lu.parenL&&this.type!==Lu.backQuote||this.eat(Lu.dot)){var u=this.startNodeAt(e,n);u.object=t,c?(u.property=this.parseExpression(),this.expect(Lu.bracketR)):this.type===Lu.privateId&&"Super"!==t.type?u.property=this.parsePrivateIdent():u.property=this.parseIdent("never"!==this.options.allowReserved),u.computed=!!c,o&&(u.optional=l),t=this.finishNode(u,"MemberExpression")}else if(!i&&this.eat(Lu.parenL)){var h=new ah,d=this.yieldPos,p=this.awaitPos,f=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var m=this.parseExprList(Lu.parenR,this.options.ecmaVersion>=8,!1,h);if(r&&!l&&!this.canInsertSemicolon()&&this.eat(Lu.arrow))return this.checkPatternErrors(h,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=d,this.awaitPos=p,this.awaitIdentPos=f,this.parseArrowExpression(this.startNodeAt(e,n),m,!0,a);this.checkExpressionErrors(h,!0),this.yieldPos=d||this.yieldPos,this.awaitPos=p||this.awaitPos,this.awaitIdentPos=f||this.awaitIdentPos;var y=this.startNodeAt(e,n);y.callee=t,y.arguments=m,o&&(y.optional=l),t=this.finishNode(y,"CallExpression")}else if(this.type===Lu.backQuote){(l||s)&&this.raise(this.start,"Optional chaining cannot appear in the tag of tagged template expressions");var g=this.startNodeAt(e,n);g.tag=t,g.quasi=this.parseTemplate({isTagged:!0}),t=this.finishNode(g,"TaggedTemplateExpression")}return t},vh.parseExprAtom=function(t,e){this.type===Lu.slash&&this.readRegexp();var n,i=this.potentialArrowAt===this.start;switch(this.type){case Lu._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),n=this.startNode(),this.next(),this.type!==Lu.parenL||this.allowDirectSuper||this.raise(n.start,"super() call outside constructor of a subclass"),this.type!==Lu.dot&&this.type!==Lu.bracketL&&this.type!==Lu.parenL&&this.unexpected(),this.finishNode(n,"Super");case Lu._this:return n=this.startNode(),this.next(),this.finishNode(n,"ThisExpression");case Lu.name:var r=this.start,s=this.startLoc,a=this.containsEsc,o=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!a&&"async"===o.name&&!this.canInsertSemicolon()&&this.eat(Lu._function))return this.overrideContext(gh.f_expr),this.parseFunction(this.startNodeAt(r,s),0,!1,!0,e);if(i&&!this.canInsertSemicolon()){if(this.eat(Lu.arrow))return this.parseArrowExpression(this.startNodeAt(r,s),[o],!1,e);if(this.options.ecmaVersion>=8&&"async"===o.name&&this.type===Lu.name&&!a&&(!this.potentialArrowInForAwait||"of"!==this.value||this.containsEsc))return o=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(Lu.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(r,s),[o],!0,e)}return o;case Lu.regexp:var l=this.value;return(n=this.parseLiteral(l.value)).regex={pattern:l.pattern,flags:l.flags},n;case Lu.num:case Lu.string:return this.parseLiteral(this.value);case Lu._null:case Lu._true:case Lu._false:return(n=this.startNode()).value=this.type===Lu._null?null:this.type===Lu._true,n.raw=this.type.keyword,this.next(),this.finishNode(n,"Literal");case Lu.parenL:var c=this.start,u=this.parseParenAndDistinguishExpression(i,e);return t&&(t.parenthesizedAssign<0&&!this.isSimpleAssignTarget(u)&&(t.parenthesizedAssign=c),t.parenthesizedBind<0&&(t.parenthesizedBind=c)),u;case Lu.bracketL:return n=this.startNode(),this.next(),n.elements=this.parseExprList(Lu.bracketR,!0,!0,t),this.finishNode(n,"ArrayExpression");case Lu.braceL:return this.overrideContext(gh.b_expr),this.parseObj(!1,t);case Lu._function:return n=this.startNode(),this.next(),this.parseFunction(n,0);case Lu._class:return this.parseClass(this.startNode(),!1);case Lu._new:return this.parseNew();case Lu.backQuote:return this.parseTemplate();case Lu._import:return this.options.ecmaVersion>=11?this.parseExprImport():this.unexpected();default:this.unexpected()}},vh.parseExprImport=function(){var t=this.startNode();this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword import");var e=this.parseIdent(!0);switch(this.type){case Lu.parenL:return this.parseDynamicImport(t);case Lu.dot:return t.meta=e,this.parseImportMeta(t);default:this.unexpected()}},vh.parseDynamicImport=function(t){if(this.next(),t.source=this.parseMaybeAssign(),!this.eat(Lu.parenR)){var e=this.start;this.eat(Lu.comma)&&this.eat(Lu.parenR)?this.raiseRecoverable(e,"Trailing comma is not allowed in import()"):this.unexpected(e)}return this.finishNode(t,"ImportExpression")},vh.parseImportMeta=function(t){this.next();var e=this.containsEsc;return t.property=this.parseIdent(!0),"meta"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for import is 'import.meta'"),e&&this.raiseRecoverable(t.start,"'import.meta' must not contain escaped characters"),"module"===this.options.sourceType||this.options.allowImportExportEverywhere||this.raiseRecoverable(t.start,"Cannot use 'import.meta' outside a module"),this.finishNode(t,"MetaProperty")},vh.parseLiteral=function(t){var e=this.startNode();return e.value=t,e.raw=this.input.slice(this.start,this.end),110===e.raw.charCodeAt(e.raw.length-1)&&(e.bigint=e.raw.slice(0,-1).replace(/_/g,"")),this.next(),this.finishNode(e,"Literal")},vh.parseParenExpression=function(){this.expect(Lu.parenL);var t=this.parseExpression();return this.expect(Lu.parenR),t},vh.parseParenAndDistinguishExpression=function(t,e){var n,i=this.start,r=this.startLoc,s=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var a,o=this.start,l=this.startLoc,c=[],u=!0,h=!1,d=new ah,p=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==Lu.parenR;){if(u?u=!1:this.expect(Lu.comma),s&&this.afterTrailingComma(Lu.parenR,!0)){h=!0;break}if(this.type===Lu.ellipsis){a=this.start,c.push(this.parseParenItem(this.parseRestBinding())),this.type===Lu.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}c.push(this.parseMaybeAssign(!1,d,this.parseParenItem))}var m=this.lastTokEnd,y=this.lastTokEndLoc;if(this.expect(Lu.parenR),t&&!this.canInsertSemicolon()&&this.eat(Lu.arrow))return this.checkPatternErrors(d,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=p,this.awaitPos=f,this.parseParenArrowList(i,r,c,e);c.length&&!h||this.unexpected(this.lastTokStart),a&&this.unexpected(a),this.checkExpressionErrors(d,!0),this.yieldPos=p||this.yieldPos,this.awaitPos=f||this.awaitPos,c.length>1?((n=this.startNodeAt(o,l)).expressions=c,this.finishNodeAt(n,"SequenceExpression",m,y)):n=c[0]}else n=this.parseParenExpression();if(this.options.preserveParens){var g=this.startNodeAt(i,r);return g.expression=n,this.finishNode(g,"ParenthesizedExpression")}return n},vh.parseParenItem=function(t){return t},vh.parseParenArrowList=function(t,e,n,i){return this.parseArrowExpression(this.startNodeAt(t,e),n,!1,i)};var wh=[];vh.parseNew=function(){this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword new");var t=this.startNode(),e=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(Lu.dot)){t.meta=e;var n=this.containsEsc;return t.property=this.parseIdent(!0),"target"!==t.property.name&&this.raiseRecoverable(t.property.start,"The only valid meta property for new is 'new.target'"),n&&this.raiseRecoverable(t.start,"'new.target' must not contain escaped characters"),this.allowNewDotTarget||this.raiseRecoverable(t.start,"'new.target' can only be used in functions and class static block"),this.finishNode(t,"MetaProperty")}var i=this.start,r=this.startLoc,s=this.type===Lu._import;return t.callee=this.parseSubscripts(this.parseExprAtom(),i,r,!0,!1),s&&"ImportExpression"===t.callee.type&&this.raise(i,"Cannot use new with import()"),this.eat(Lu.parenL)?t.arguments=this.parseExprList(Lu.parenR,this.options.ecmaVersion>=8,!1):t.arguments=wh,this.finishNode(t,"NewExpression")},vh.parseTemplateElement=function(t){var e=t.isTagged,n=this.startNode();return this.type===Lu.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),n.value={raw:this.value,cooked:null}):n.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),n.tail=this.type===Lu.backQuote,this.finishNode(n,"TemplateElement")},vh.parseTemplate=function(t){void 0===t&&(t={});var e=t.isTagged;void 0===e&&(e=!1);var n=this.startNode();this.next(),n.expressions=[];var i=this.parseTemplateElement({isTagged:e});for(n.quasis=[i];!i.tail;)this.type===Lu.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(Lu.dollarBraceL),n.expressions.push(this.parseExpression()),this.expect(Lu.braceR),n.quasis.push(i=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(n,"TemplateLiteral")},vh.isAsyncProp=function(t){return!t.computed&&"Identifier"===t.key.type&&"async"===t.key.name&&(this.type===Lu.name||this.type===Lu.num||this.type===Lu.string||this.type===Lu.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===Lu.star)&&!Pu.test(this.input.slice(this.lastTokEnd,this.start))},vh.parseObj=function(t,e){var n=this.startNode(),i=!0,r={};for(n.properties=[],this.next();!this.eat(Lu.braceR);){if(i)i=!1;else if(this.expect(Lu.comma),this.options.ecmaVersion>=5&&this.afterTrailingComma(Lu.braceR))break;var s=this.parseProperty(t,e);t||this.checkPropClash(s,r,e),n.properties.push(s)}return this.finishNode(n,t?"ObjectPattern":"ObjectExpression")},vh.parseProperty=function(t,e){var n,i,r,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(Lu.ellipsis))return t?(a.argument=this.parseIdent(!1),this.type===Lu.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(a.argument=this.parseMaybeAssign(!1,e),this.type===Lu.comma&&e&&e.trailingComma<0&&(e.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(t||e)&&(r=this.start,s=this.startLoc),t||(n=this.eat(Lu.star)));var o=this.containsEsc;return this.parsePropertyName(a),!t&&!o&&this.options.ecmaVersion>=8&&!n&&this.isAsyncProp(a)?(i=!0,n=this.options.ecmaVersion>=9&&this.eat(Lu.star),this.parsePropertyName(a,e)):i=!1,this.parsePropertyValue(a,t,n,i,r,s,e,o),this.finishNode(a,"Property")},vh.parsePropertyValue=function(t,e,n,i,r,s,a,o){if((n||i)&&this.type===Lu.colon&&this.unexpected(),this.eat(Lu.colon))t.value=e?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),t.kind="init";else if(this.options.ecmaVersion>=6&&this.type===Lu.parenL)e&&this.unexpected(),t.kind="init",t.method=!0,t.value=this.parseMethod(n,i);else if(e||o||!(this.options.ecmaVersion>=5)||t.computed||"Identifier"!==t.key.type||"get"!==t.key.name&&"set"!==t.key.name||this.type===Lu.comma||this.type===Lu.braceR||this.type===Lu.eq)this.options.ecmaVersion>=6&&!t.computed&&"Identifier"===t.key.type?((n||i)&&this.unexpected(),this.checkUnreserved(t.key),"await"!==t.key.name||this.awaitIdentPos||(this.awaitIdentPos=r),t.kind="init",e?t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key)):this.type===Lu.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),t.value=this.parseMaybeDefault(r,s,this.copyNode(t.key))):t.value=this.copyNode(t.key),t.shorthand=!0):this.unexpected();else{(n||i)&&this.unexpected(),t.kind=t.key.name,this.parsePropertyName(t),t.value=this.parseMethod(!1);var l="get"===t.kind?0:1;if(t.value.params.length!==l){var c=t.value.start;"get"===t.kind?this.raiseRecoverable(c,"getter should have no params"):this.raiseRecoverable(c,"setter should have exactly one param")}else"set"===t.kind&&"RestElement"===t.value.params[0].type&&this.raiseRecoverable(t.value.params[0].start,"Setter cannot use rest params")}},vh.parsePropertyName=function(t){if(this.options.ecmaVersion>=6){if(this.eat(Lu.bracketL))return t.computed=!0,t.key=this.parseMaybeAssign(),this.expect(Lu.bracketR),t.key;t.computed=!1}return t.key=this.type===Lu.num||this.type===Lu.string?this.parseExprAtom():this.parseIdent("never"!==this.options.allowReserved)},vh.initFunction=function(t){t.id=null,this.options.ecmaVersion>=6&&(t.generator=t.expression=!1),this.options.ecmaVersion>=8&&(t.async=!1)},vh.parseMethod=function(t,e,n){var i=this.startNode(),r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=t),this.options.ecmaVersion>=8&&(i.async=!!e),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(64|eh(e,i.generator)|(n?128:0)),this.expect(Lu.parenL),i.params=this.parseBindingList(Lu.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0,!1),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")},vh.parseArrowExpression=function(t,e,n,i){var r=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.enterScope(16|eh(n,!1)),this.initFunction(t),this.options.ecmaVersion>=8&&(t.async=!!n),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,t.params=this.toAssignableList(e,!0),this.parseFunctionBody(t,!0,!1,i),this.yieldPos=r,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(t,"ArrowFunctionExpression")},vh.parseFunctionBody=function(t,e,n,i){var r=e&&this.type!==Lu.braceL,s=this.strict,a=!1;if(r)t.body=this.parseMaybeAssign(i),t.expression=!0,this.checkParams(t,!1);else{var o=this.options.ecmaVersion>=7&&!this.isSimpleParamList(t.params);s&&!o||(a=this.strictDirective(this.end))&&o&&this.raiseRecoverable(t.start,"Illegal 'use strict' directive in function with non-simple parameter list");var l=this.labels;this.labels=[],a&&(this.strict=!0),this.checkParams(t,!s&&!a&&!e&&!n&&this.isSimpleParamList(t.params)),this.strict&&t.id&&this.checkLValSimple(t.id,5),t.body=this.parseBlock(!1,void 0,a&&!s),t.expression=!1,this.adaptDirectivePrologue(t.body.body),this.labels=l}this.exitScope()},vh.isSimpleParamList=function(t){for(var e=0,n=t;e<n.length;e+=1)if("Identifier"!==n[e].type)return!1;return!0},vh.checkParams=function(t,e){for(var n=Object.create(null),i=0,r=t.params;i<r.length;i+=1){var s=r[i];this.checkLValInnerPattern(s,1,e?null:n)}},vh.parseExprList=function(t,e,n,i){for(var r=[],s=!0;!this.eat(t);){if(s)s=!1;else if(this.expect(Lu.comma),e&&this.afterTrailingComma(t))break;var a=void 0;n&&this.type===Lu.comma?a=null:this.type===Lu.ellipsis?(a=this.parseSpread(i),i&&this.type===Lu.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),r.push(a)}return r},vh.checkUnreserved=function(t){var e=t.start,n=t.end,i=t.name;this.inGenerator&&"yield"===i&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===i&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.currentThisScope().inClassFieldInit&&"arguments"===i&&this.raiseRecoverable(e,"Cannot use 'arguments' in class field initializer"),!this.inClassStaticBlock||"arguments"!==i&&"await"!==i||this.raise(e,"Cannot use "+i+" in class static initialization block"),this.keywords.test(i)&&this.raise(e,"Unexpected keyword '"+i+"'"),this.options.ecmaVersion<6&&-1!==this.input.slice(e,n).indexOf("\\")||(this.strict?this.reservedWordsStrict:this.reservedWords).test(i)&&(this.inAsync||"await"!==i||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,"The keyword '"+i+"' is reserved"))},vh.parseIdent=function(t,e){var n=this.startNode();return this.type===Lu.name?n.name=this.value:this.type.keyword?(n.name=this.type.keyword,"class"!==n.name&&"function"!==n.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(!!t),this.finishNode(n,"Identifier"),t||(this.checkUnreserved(n),"await"!==n.name||this.awaitIdentPos||(this.awaitIdentPos=n.start)),n},vh.parsePrivateIdent=function(){var t=this.startNode();return this.type===Lu.privateId?t.name=this.value:this.unexpected(),this.next(),this.finishNode(t,"PrivateIdentifier"),0===this.privateNameStack.length?this.raise(t.start,"Private field '#"+t.name+"' must be declared in an enclosing class"):this.privateNameStack[this.privateNameStack.length-1].used.push(t),t},vh.parseYield=function(t){this.yieldPos||(this.yieldPos=this.start);var e=this.startNode();return this.next(),this.type===Lu.semi||this.canInsertSemicolon()||this.type!==Lu.star&&!this.type.startsExpr?(e.delegate=!1,e.argument=null):(e.delegate=this.eat(Lu.star),e.argument=this.parseMaybeAssign(t)),this.finishNode(e,"YieldExpression")},vh.parseAwait=function(t){this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0,!1,t),this.finishNode(e,"AwaitExpression")};var xh=nh.prototype;xh.raise=function(t,e){var n=Zu(this.input,t);e+=" ("+n.line+":"+n.column+")";var i=new SyntaxError(e);throw i.pos=t,i.loc=n,i.raisedAt=this.pos,i},xh.raiseRecoverable=xh.raise,xh.curPosition=function(){if(this.options.locations)return new Ju(this.curLine,this.pos-this.lineStart)};var Sh=nh.prototype,Ih=function(t){this.flags=t,this.var=[],this.lexical=[],this.functions=[],this.inClassFieldInit=!1};Sh.enterScope=function(t){this.scopeStack.push(new Ih(t))},Sh.exitScope=function(){this.scopeStack.pop()},Sh.treatFunctionsAsVarInScope=function(t){return 2&t.flags||!this.inModule&&1&t.flags},Sh.declareName=function(t,e,n){var i=!1;if(2===e){var r=this.currentScope();i=r.lexical.indexOf(t)>-1||r.functions.indexOf(t)>-1||r.var.indexOf(t)>-1,r.lexical.push(t),this.inModule&&1&r.flags&&delete this.undefinedExports[t]}else if(4===e)this.currentScope().lexical.push(t);else if(3===e){var s=this.currentScope();i=this.treatFunctionsAsVar?s.lexical.indexOf(t)>-1:s.lexical.indexOf(t)>-1||s.var.indexOf(t)>-1,s.functions.push(t)}else for(var a=this.scopeStack.length-1;a>=0;--a){var o=this.scopeStack[a];if(o.lexical.indexOf(t)>-1&&!(32&o.flags&&o.lexical[0]===t)||!this.treatFunctionsAsVarInScope(o)&&o.functions.indexOf(t)>-1){i=!0;break}if(o.var.push(t),this.inModule&&1&o.flags&&delete this.undefinedExports[t],259&o.flags)break}i&&this.raiseRecoverable(n,"Identifier '"+t+"' has already been declared")},Sh.checkLocalExport=function(t){-1===this.scopeStack[0].lexical.indexOf(t.name)&&-1===this.scopeStack[0].var.indexOf(t.name)&&(this.undefinedExports[t.name]=t)},Sh.currentScope=function(){return this.scopeStack[this.scopeStack.length-1]},Sh.currentVarScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags)return e}},Sh.currentThisScope=function(){for(var t=this.scopeStack.length-1;;t--){var e=this.scopeStack[t];if(259&e.flags&&!(16&e.flags))return e}};var Ah=function(t,e,n){this.type="",this.start=e,this.end=0,t.options.locations&&(this.loc=new Qu(t,n)),t.options.directSourceFile&&(this.sourceFile=t.options.directSourceFile),t.options.ranges&&(this.range=[e,0])},Th=nh.prototype;function Ch(t,e,n,i){return t.type=e,t.end=n,this.options.locations&&(t.loc.end=i),this.options.ranges&&(t.range[1]=n),t}Th.startNode=function(){return new Ah(this,this.start,this.startLoc)},Th.startNodeAt=function(t,e){return new Ah(this,t,e)},Th.finishNode=function(t,e){return Ch.call(this,t,e,this.lastTokEnd,this.lastTokEndLoc)},Th.finishNodeAt=function(t,e,n,i){return Ch.call(this,t,e,n,i)},Th.copyNode=function(t){var e=new Ah(this,t.start,this.startLoc);for(var n in t)e[n]=t[n];return e};var Nh,kh,Eh="ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS",Oh=Eh+" Extended_Pictographic",Mh={9:Eh,10:Oh,11:Oh,12:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict",13:"ASCII ASCII_Hex_Digit AHex Alphabetic Alpha Any Assigned Bidi_Control Bidi_C Bidi_Mirrored Bidi_M Case_Ignorable CI Cased Changes_When_Casefolded CWCF Changes_When_Casemapped CWCM Changes_When_Lowercased CWL Changes_When_NFKC_Casefolded CWKCF Changes_When_Titlecased CWT Changes_When_Uppercased CWU Dash Default_Ignorable_Code_Point DI Deprecated Dep Diacritic Dia Emoji Emoji_Component Emoji_Modifier Emoji_Modifier_Base Emoji_Presentation Extender Ext Grapheme_Base Gr_Base Grapheme_Extend Gr_Ext Hex_Digit Hex IDS_Binary_Operator IDSB IDS_Trinary_Operator IDST ID_Continue IDC ID_Start IDS Ideographic Ideo Join_Control Join_C Logical_Order_Exception LOE Lowercase Lower Math Noncharacter_Code_Point NChar Pattern_Syntax Pat_Syn Pattern_White_Space Pat_WS Quotation_Mark QMark Radical Regional_Indicator RI Sentence_Terminal STerm Soft_Dotted SD Terminal_Punctuation Term Unified_Ideograph UIdeo Uppercase Upper Variation_Selector VS White_Space space XID_Continue XIDC XID_Start XIDS Extended_Pictographic EBase EComp EMod EPres ExtPict"},Dh="Cased_Letter LC Close_Punctuation Pe Connector_Punctuation Pc Control Cc cntrl Currency_Symbol Sc Dash_Punctuation Pd Decimal_Number Nd digit Enclosing_Mark Me Final_Punctuation Pf Format Cf Initial_Punctuation Pi Letter L Letter_Number Nl Line_Separator Zl Lowercase_Letter Ll Mark M Combining_Mark Math_Symbol Sm Modifier_Letter Lm Modifier_Symbol Sk Nonspacing_Mark Mn Number N Open_Punctuation Ps Other C Other_Letter Lo Other_Number No Other_Punctuation Po Other_Symbol So Paragraph_Separator Zp Private_Use Co Punctuation P punct Separator Z Space_Separator Zs Spacing_Mark Mc Surrogate Cs Symbol S Titlecase_Letter Lt Unassigned Cn Uppercase_Letter Lu",Bh="Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb",Lh=Bh+" Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd",Ph=Lh+" Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho",Fh={9:Bh,10:Lh,11:Ph,12:"Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi",13:"Adlam Adlm Ahom Anatolian_Hieroglyphs Hluw Arabic Arab Armenian Armn Avestan Avst Balinese Bali Bamum Bamu Bassa_Vah Bass Batak Batk Bengali Beng Bhaiksuki Bhks Bopomofo Bopo Brahmi Brah Braille Brai Buginese Bugi Buhid Buhd Canadian_Aboriginal Cans Carian Cari Caucasian_Albanian Aghb Chakma Cakm Cham Cham Cherokee Cher Common Zyyy Coptic Copt Qaac Cuneiform Xsux Cypriot Cprt Cyrillic Cyrl Deseret Dsrt Devanagari Deva Duployan Dupl Egyptian_Hieroglyphs Egyp Elbasan Elba Ethiopic Ethi Georgian Geor Glagolitic Glag Gothic Goth Grantha Gran Greek Grek Gujarati Gujr Gurmukhi Guru Han Hani Hangul Hang Hanunoo Hano Hatran Hatr Hebrew Hebr Hiragana Hira Imperial_Aramaic Armi Inherited Zinh Qaai Inscriptional_Pahlavi Phli Inscriptional_Parthian Prti Javanese Java Kaithi Kthi Kannada Knda Katakana Kana Kayah_Li Kali Kharoshthi Khar Khmer Khmr Khojki Khoj Khudawadi Sind Lao Laoo Latin Latn Lepcha Lepc Limbu Limb Linear_A Lina Linear_B Linb Lisu Lisu Lycian Lyci Lydian Lydi Mahajani Mahj Malayalam Mlym Mandaic Mand Manichaean Mani Marchen Marc Masaram_Gondi Gonm Meetei_Mayek Mtei Mende_Kikakui Mend Meroitic_Cursive Merc Meroitic_Hieroglyphs Mero Miao Plrd Modi Mongolian Mong Mro Mroo Multani Mult Myanmar Mymr Nabataean Nbat New_Tai_Lue Talu Newa Newa Nko Nkoo Nushu Nshu Ogham Ogam Ol_Chiki Olck Old_Hungarian Hung Old_Italic Ital Old_North_Arabian Narb Old_Permic Perm Old_Persian Xpeo Old_South_Arabian Sarb Old_Turkic Orkh Oriya Orya Osage Osge Osmanya Osma Pahawh_Hmong Hmng Palmyrene Palm Pau_Cin_Hau Pauc Phags_Pa Phag Phoenician Phnx Psalter_Pahlavi Phlp Rejang Rjng Runic Runr Samaritan Samr Saurashtra Saur Sharada Shrd Shavian Shaw Siddham Sidd SignWriting Sgnw Sinhala Sinh Sora_Sompeng Sora Soyombo Soyo Sundanese Sund Syloti_Nagri Sylo Syriac Syrc Tagalog Tglg Tagbanwa Tagb Tai_Le Tale Tai_Tham Lana Tai_Viet Tavt Takri Takr Tamil Taml Tangut Tang Telugu Telu Thaana Thaa Thai Thai Tibetan Tibt Tifinagh Tfng Tirhuta Tirh Ugaritic Ugar Vai Vaii Warang_Citi Wara Yi Yiii Zanabazar_Square Zanb Dogra Dogr Gunjala_Gondi Gong Hanifi_Rohingya Rohg Makasar Maka Medefaidrin Medf Old_Sogdian Sogo Sogdian Sogd Elymaic Elym Nandinagari Nand Nyiakeng_Puachue_Hmong Hmnp Wancho Wcho Chorasmian Chrs Diak Dives_Akuru Khitan_Small_Script Kits Yezi Yezidi Cypro_Minoan Cpmn Old_Uyghur Ougr Tangsa Tnsa Toto Vithkuqi Vith"},Vh={};for(var Uh=0,Rh=[9,10,11,12,13];Uh<Rh.length;Uh+=1)kh=void 0,(kh=Vh[Nh=Rh[Uh]]={binary:Gu(Mh[Nh]+" "+Dh),nonBinary:{General_Category:Gu(Dh),Script:Gu(Fh[Nh])}}).nonBinary.Script_Extensions=kh.nonBinary.Script,kh.nonBinary.gc=kh.nonBinary.General_Category,kh.nonBinary.sc=kh.nonBinary.Script,kh.nonBinary.scx=kh.nonBinary.Script_Extensions;var $h=nh.prototype,jh=function(t){this.parser=t,this.validFlags="gim"+(t.options.ecmaVersion>=6?"uy":"")+(t.options.ecmaVersion>=9?"s":"")+(t.options.ecmaVersion>=13?"d":""),this.unicodeProperties=Vh[t.options.ecmaVersion>=13?13:t.options.ecmaVersion],this.source="",this.flags="",this.start=0,this.switchU=!1,this.switchN=!1,this.pos=0,this.lastIntValue=0,this.lastStringValue="",this.lastAssertionIsQuantifiable=!1,this.numCapturingParens=0,this.maxBackReference=0,this.groupNames=[],this.backReferenceNames=[]};function zh(t){return 36===t||t>=40&&t<=43||46===t||63===t||t>=91&&t<=94||t>=123&&t<=125}function Wh(t){return t>=65&&t<=90||t>=97&&t<=122}function Hh(t){return Wh(t)||95===t}function qh(t){return Hh(t)||Gh(t)}function Gh(t){return t>=48&&t<=57}function Yh(t){return t>=48&&t<=57||t>=65&&t<=70||t>=97&&t<=102}function Kh(t){return t>=65&&t<=70?t-65+10:t>=97&&t<=102?t-97+10:t-48}function Jh(t){return t>=48&&t<=55}jh.prototype.reset=function(t,e,n){var i=-1!==n.indexOf("u");this.start=0|t,this.source=e+"",this.flags=n,this.switchU=i&&this.parser.options.ecmaVersion>=6,this.switchN=i&&this.parser.options.ecmaVersion>=9},jh.prototype.raise=function(t){this.parser.raiseRecoverable(this.start,"Invalid regular expression: /"+this.source+"/: "+t)},jh.prototype.at=function(t,e){void 0===e&&(e=!1);var n=this.source,i=n.length;if(t>=i)return-1;var r=n.charCodeAt(t);if(!e&&!this.switchU||r<=55295||r>=57344||t+1>=i)return r;var s=n.charCodeAt(t+1);return s>=56320&&s<=57343?(r<<10)+s-56613888:r},jh.prototype.nextIndex=function(t,e){void 0===e&&(e=!1);var n=this.source,i=n.length;if(t>=i)return i;var r,s=n.charCodeAt(t);return!e&&!this.switchU||s<=55295||s>=57344||t+1>=i||(r=n.charCodeAt(t+1))<56320||r>57343?t+1:t+2},jh.prototype.current=function(t){return void 0===t&&(t=!1),this.at(this.pos,t)},jh.prototype.lookahead=function(t){return void 0===t&&(t=!1),this.at(this.nextIndex(this.pos,t),t)},jh.prototype.advance=function(t){void 0===t&&(t=!1),this.pos=this.nextIndex(this.pos,t)},jh.prototype.eat=function(t,e){return void 0===e&&(e=!1),this.current(e)===t&&(this.advance(e),!0)},$h.validateRegExpFlags=function(t){for(var e=t.validFlags,n=t.flags,i=0;i<n.length;i++){var r=n.charAt(i);-1===e.indexOf(r)&&this.raise(t.start,"Invalid regular expression flag"),n.indexOf(r,i+1)>-1&&this.raise(t.start,"Duplicate regular expression flag")}},$h.validateRegExpPattern=function(t){this.regexp_pattern(t),!t.switchN&&this.options.ecmaVersion>=9&&t.groupNames.length>0&&(t.switchN=!0,this.regexp_pattern(t))},$h.regexp_pattern=function(t){t.pos=0,t.lastIntValue=0,t.lastStringValue="",t.lastAssertionIsQuantifiable=!1,t.numCapturingParens=0,t.maxBackReference=0,t.groupNames.length=0,t.backReferenceNames.length=0,this.regexp_disjunction(t),t.pos!==t.source.length&&(t.eat(41)&&t.raise("Unmatched ')'"),(t.eat(93)||t.eat(125))&&t.raise("Lone quantifier brackets")),t.maxBackReference>t.numCapturingParens&&t.raise("Invalid escape");for(var e=0,n=t.backReferenceNames;e<n.length;e+=1){var i=n[e];-1===t.groupNames.indexOf(i)&&t.raise("Invalid named capture referenced")}},$h.regexp_disjunction=function(t){for(this.regexp_alternative(t);t.eat(124);)this.regexp_alternative(t);this.regexp_eatQuantifier(t,!0)&&t.raise("Nothing to repeat"),t.eat(123)&&t.raise("Lone quantifier brackets")},$h.regexp_alternative=function(t){for(;t.pos<t.source.length&&this.regexp_eatTerm(t););},$h.regexp_eatTerm=function(t){return this.regexp_eatAssertion(t)?(t.lastAssertionIsQuantifiable&&this.regexp_eatQuantifier(t)&&t.switchU&&t.raise("Invalid quantifier"),!0):!!(t.switchU?this.regexp_eatAtom(t):this.regexp_eatExtendedAtom(t))&&(this.regexp_eatQuantifier(t),!0)},$h.regexp_eatAssertion=function(t){var e=t.pos;if(t.lastAssertionIsQuantifiable=!1,t.eat(94)||t.eat(36))return!0;if(t.eat(92)){if(t.eat(66)||t.eat(98))return!0;t.pos=e}if(t.eat(40)&&t.eat(63)){var n=!1;if(this.options.ecmaVersion>=9&&(n=t.eat(60)),t.eat(61)||t.eat(33))return this.regexp_disjunction(t),t.eat(41)||t.raise("Unterminated group"),t.lastAssertionIsQuantifiable=!n,!0}return t.pos=e,!1},$h.regexp_eatQuantifier=function(t,e){return void 0===e&&(e=!1),!!this.regexp_eatQuantifierPrefix(t,e)&&(t.eat(63),!0)},$h.regexp_eatQuantifierPrefix=function(t,e){return t.eat(42)||t.eat(43)||t.eat(63)||this.regexp_eatBracedQuantifier(t,e)},$h.regexp_eatBracedQuantifier=function(t,e){var n=t.pos;if(t.eat(123)){var i=0,r=-1;if(this.regexp_eatDecimalDigits(t)&&(i=t.lastIntValue,t.eat(44)&&this.regexp_eatDecimalDigits(t)&&(r=t.lastIntValue),t.eat(125)))return-1!==r&&r<i&&!e&&t.raise("numbers out of order in {} quantifier"),!0;t.switchU&&!e&&t.raise("Incomplete quantifier"),t.pos=n}return!1},$h.regexp_eatAtom=function(t){return this.regexp_eatPatternCharacters(t)||t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)},$h.regexp_eatReverseSolidusAtomEscape=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatAtomEscape(t))return!0;t.pos=e}return!1},$h.regexp_eatUncapturingGroup=function(t){var e=t.pos;if(t.eat(40)){if(t.eat(63)&&t.eat(58)){if(this.regexp_disjunction(t),t.eat(41))return!0;t.raise("Unterminated group")}t.pos=e}return!1},$h.regexp_eatCapturingGroup=function(t){if(t.eat(40)){if(this.options.ecmaVersion>=9?this.regexp_groupSpecifier(t):63===t.current()&&t.raise("Invalid group"),this.regexp_disjunction(t),t.eat(41))return t.numCapturingParens+=1,!0;t.raise("Unterminated group")}return!1},$h.regexp_eatExtendedAtom=function(t){return t.eat(46)||this.regexp_eatReverseSolidusAtomEscape(t)||this.regexp_eatCharacterClass(t)||this.regexp_eatUncapturingGroup(t)||this.regexp_eatCapturingGroup(t)||this.regexp_eatInvalidBracedQuantifier(t)||this.regexp_eatExtendedPatternCharacter(t)},$h.regexp_eatInvalidBracedQuantifier=function(t){return this.regexp_eatBracedQuantifier(t,!0)&&t.raise("Nothing to repeat"),!1},$h.regexp_eatSyntaxCharacter=function(t){var e=t.current();return!!zh(e)&&(t.lastIntValue=e,t.advance(),!0)},$h.regexp_eatPatternCharacters=function(t){for(var e=t.pos,n=0;-1!==(n=t.current())&&!zh(n);)t.advance();return t.pos!==e},$h.regexp_eatExtendedPatternCharacter=function(t){var e=t.current();return!(-1===e||36===e||e>=40&&e<=43||46===e||63===e||91===e||94===e||124===e||(t.advance(),0))},$h.regexp_groupSpecifier=function(t){if(t.eat(63)){if(this.regexp_eatGroupName(t))return-1!==t.groupNames.indexOf(t.lastStringValue)&&t.raise("Duplicate capture group name"),void t.groupNames.push(t.lastStringValue);t.raise("Invalid group")}},$h.regexp_eatGroupName=function(t){if(t.lastStringValue="",t.eat(60)){if(this.regexp_eatRegExpIdentifierName(t)&&t.eat(62))return!0;t.raise("Invalid capture group name")}return!1},$h.regexp_eatRegExpIdentifierName=function(t){if(t.lastStringValue="",this.regexp_eatRegExpIdentifierStart(t)){for(t.lastStringValue+=Yu(t.lastIntValue);this.regexp_eatRegExpIdentifierPart(t);)t.lastStringValue+=Yu(t.lastIntValue);return!0}return!1},$h.regexp_eatRegExpIdentifierStart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),function(t){return Cu(t,!0)||36===t||95===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},$h.regexp_eatRegExpIdentifierPart=function(t){var e=t.pos,n=this.options.ecmaVersion>=11,i=t.current(n);return t.advance(n),92===i&&this.regexp_eatRegExpUnicodeEscapeSequence(t,n)&&(i=t.lastIntValue),function(t){return Nu(t,!0)||36===t||95===t||8204===t||8205===t}(i)?(t.lastIntValue=i,!0):(t.pos=e,!1)},$h.regexp_eatAtomEscape=function(t){return!!(this.regexp_eatBackReference(t)||this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)||t.switchN&&this.regexp_eatKGroupName(t))||(t.switchU&&(99===t.current()&&t.raise("Invalid unicode escape"),t.raise("Invalid escape")),!1)},$h.regexp_eatBackReference=function(t){var e=t.pos;if(this.regexp_eatDecimalEscape(t)){var n=t.lastIntValue;if(t.switchU)return n>t.maxBackReference&&(t.maxBackReference=n),!0;if(n<=t.numCapturingParens)return!0;t.pos=e}return!1},$h.regexp_eatKGroupName=function(t){if(t.eat(107)){if(this.regexp_eatGroupName(t))return t.backReferenceNames.push(t.lastStringValue),!0;t.raise("Invalid named reference")}return!1},$h.regexp_eatCharacterEscape=function(t){return this.regexp_eatControlEscape(t)||this.regexp_eatCControlLetter(t)||this.regexp_eatZero(t)||this.regexp_eatHexEscapeSequence(t)||this.regexp_eatRegExpUnicodeEscapeSequence(t,!1)||!t.switchU&&this.regexp_eatLegacyOctalEscapeSequence(t)||this.regexp_eatIdentityEscape(t)},$h.regexp_eatCControlLetter=function(t){var e=t.pos;if(t.eat(99)){if(this.regexp_eatControlLetter(t))return!0;t.pos=e}return!1},$h.regexp_eatZero=function(t){return 48===t.current()&&!Gh(t.lookahead())&&(t.lastIntValue=0,t.advance(),!0)},$h.regexp_eatControlEscape=function(t){var e=t.current();return 116===e?(t.lastIntValue=9,t.advance(),!0):110===e?(t.lastIntValue=10,t.advance(),!0):118===e?(t.lastIntValue=11,t.advance(),!0):102===e?(t.lastIntValue=12,t.advance(),!0):114===e&&(t.lastIntValue=13,t.advance(),!0)},$h.regexp_eatControlLetter=function(t){var e=t.current();return!!Wh(e)&&(t.lastIntValue=e%32,t.advance(),!0)},$h.regexp_eatRegExpUnicodeEscapeSequence=function(t,e){void 0===e&&(e=!1);var n,i=t.pos,r=e||t.switchU;if(t.eat(117)){if(this.regexp_eatFixedHexDigits(t,4)){var s=t.lastIntValue;if(r&&s>=55296&&s<=56319){var a=t.pos;if(t.eat(92)&&t.eat(117)&&this.regexp_eatFixedHexDigits(t,4)){var o=t.lastIntValue;if(o>=56320&&o<=57343)return t.lastIntValue=1024*(s-55296)+(o-56320)+65536,!0}t.pos=a,t.lastIntValue=s}return!0}if(r&&t.eat(123)&&this.regexp_eatHexDigits(t)&&t.eat(125)&&(n=t.lastIntValue)>=0&&n<=1114111)return!0;r&&t.raise("Invalid unicode escape"),t.pos=i}return!1},$h.regexp_eatIdentityEscape=function(t){if(t.switchU)return!!this.regexp_eatSyntaxCharacter(t)||!!t.eat(47)&&(t.lastIntValue=47,!0);var e=t.current();return!(99===e||t.switchN&&107===e||(t.lastIntValue=e,t.advance(),0))},$h.regexp_eatDecimalEscape=function(t){t.lastIntValue=0;var e=t.current();if(e>=49&&e<=57){do{t.lastIntValue=10*t.lastIntValue+(e-48),t.advance()}while((e=t.current())>=48&&e<=57);return!0}return!1},$h.regexp_eatCharacterClassEscape=function(t){var e=t.current();if(function(t){return 100===t||68===t||115===t||83===t||119===t||87===t}(e))return t.lastIntValue=-1,t.advance(),!0;if(t.switchU&&this.options.ecmaVersion>=9&&(80===e||112===e)){if(t.lastIntValue=-1,t.advance(),t.eat(123)&&this.regexp_eatUnicodePropertyValueExpression(t)&&t.eat(125))return!0;t.raise("Invalid property name")}return!1},$h.regexp_eatUnicodePropertyValueExpression=function(t){var e=t.pos;if(this.regexp_eatUnicodePropertyName(t)&&t.eat(61)){var n=t.lastStringValue;if(this.regexp_eatUnicodePropertyValue(t)){var i=t.lastStringValue;return this.regexp_validateUnicodePropertyNameAndValue(t,n,i),!0}}if(t.pos=e,this.regexp_eatLoneUnicodePropertyNameOrValue(t)){var r=t.lastStringValue;return this.regexp_validateUnicodePropertyNameOrValue(t,r),!0}return!1},$h.regexp_validateUnicodePropertyNameAndValue=function(t,e,n){Hu(t.unicodeProperties.nonBinary,e)||t.raise("Invalid property name"),t.unicodeProperties.nonBinary[e].test(n)||t.raise("Invalid property value")},$h.regexp_validateUnicodePropertyNameOrValue=function(t,e){t.unicodeProperties.binary.test(e)||t.raise("Invalid property name")},$h.regexp_eatUnicodePropertyName=function(t){var e=0;for(t.lastStringValue="";Hh(e=t.current());)t.lastStringValue+=Yu(e),t.advance();return""!==t.lastStringValue},$h.regexp_eatUnicodePropertyValue=function(t){var e=0;for(t.lastStringValue="";qh(e=t.current());)t.lastStringValue+=Yu(e),t.advance();return""!==t.lastStringValue},$h.regexp_eatLoneUnicodePropertyNameOrValue=function(t){return this.regexp_eatUnicodePropertyValue(t)},$h.regexp_eatCharacterClass=function(t){if(t.eat(91)){if(t.eat(94),this.regexp_classRanges(t),t.eat(93))return!0;t.raise("Unterminated character class")}return!1},$h.regexp_classRanges=function(t){for(;this.regexp_eatClassAtom(t);){var e=t.lastIntValue;if(t.eat(45)&&this.regexp_eatClassAtom(t)){var n=t.lastIntValue;!t.switchU||-1!==e&&-1!==n||t.raise("Invalid character class"),-1!==e&&-1!==n&&e>n&&t.raise("Range out of order in character class")}}},$h.regexp_eatClassAtom=function(t){var e=t.pos;if(t.eat(92)){if(this.regexp_eatClassEscape(t))return!0;if(t.switchU){var n=t.current();(99===n||Jh(n))&&t.raise("Invalid class escape"),t.raise("Invalid escape")}t.pos=e}var i=t.current();return 93!==i&&(t.lastIntValue=i,t.advance(),!0)},$h.regexp_eatClassEscape=function(t){var e=t.pos;if(t.eat(98))return t.lastIntValue=8,!0;if(t.switchU&&t.eat(45))return t.lastIntValue=45,!0;if(!t.switchU&&t.eat(99)){if(this.regexp_eatClassControlLetter(t))return!0;t.pos=e}return this.regexp_eatCharacterClassEscape(t)||this.regexp_eatCharacterEscape(t)},$h.regexp_eatClassControlLetter=function(t){var e=t.current();return!(!Gh(e)&&95!==e||(t.lastIntValue=e%32,t.advance(),0))},$h.regexp_eatHexEscapeSequence=function(t){var e=t.pos;if(t.eat(120)){if(this.regexp_eatFixedHexDigits(t,2))return!0;t.switchU&&t.raise("Invalid escape"),t.pos=e}return!1},$h.regexp_eatDecimalDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Gh(n=t.current());)t.lastIntValue=10*t.lastIntValue+(n-48),t.advance();return t.pos!==e},$h.regexp_eatHexDigits=function(t){var e=t.pos,n=0;for(t.lastIntValue=0;Yh(n=t.current());)t.lastIntValue=16*t.lastIntValue+Kh(n),t.advance();return t.pos!==e},$h.regexp_eatLegacyOctalEscapeSequence=function(t){if(this.regexp_eatOctalDigit(t)){var e=t.lastIntValue;if(this.regexp_eatOctalDigit(t)){var n=t.lastIntValue;e<=3&&this.regexp_eatOctalDigit(t)?t.lastIntValue=64*e+8*n+t.lastIntValue:t.lastIntValue=8*e+n}else t.lastIntValue=e;return!0}return!1},$h.regexp_eatOctalDigit=function(t){var e=t.current();return Jh(e)?(t.lastIntValue=e-48,t.advance(),!0):(t.lastIntValue=0,!1)},$h.regexp_eatFixedHexDigits=function(t,e){var n=t.pos;t.lastIntValue=0;for(var i=0;i<e;++i){var r=t.current();if(!Yh(r))return t.pos=n,!1;t.lastIntValue=16*t.lastIntValue+Kh(r),t.advance()}return!0};var Qh=function(t){this.type=t.type,this.value=t.value,this.start=t.start,this.end=t.end,t.options.locations&&(this.loc=new Qu(t,t.startLoc,t.endLoc)),t.options.ranges&&(this.range=[t.start,t.end])},Zh=nh.prototype;function Xh(t){return"function"!=typeof BigInt?null:BigInt(t.replace(/_/g,""))}Zh.next=function(t){!t&&this.type.keyword&&this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+this.type.keyword),this.options.onToken&&this.options.onToken(new Qh(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Zh.getToken=function(){return this.next(),new Qh(this)},"undefined"!=typeof Symbol&&(Zh[Symbol.iterator]=function(){var t=this;return{next:function(){var e=t.getToken();return{done:e.type===Lu.eof,value:e}}}}),Zh.nextToken=function(){var t=this.curContext();return t&&t.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(Lu.eof):t.override?t.override(this):void this.readToken(this.fullCharCodeAtPos())},Zh.readToken=function(t){return Cu(t,this.options.ecmaVersion>=6)||92===t?this.readWord():this.getTokenFromCode(t)},Zh.fullCharCodeAtPos=function(){var t=this.input.charCodeAt(this.pos);if(t<=55295||t>=56320)return t;var e=this.input.charCodeAt(this.pos+1);return e<=56319||e>=57344?t:(t<<10)+e-56613888},Zh.skipBlockComment=function(){var t=this.options.onComment&&this.curPosition(),e=this.pos,n=this.input.indexOf("*/",this.pos+=2);if(-1===n&&this.raise(this.pos-2,"Unterminated comment"),this.pos=n+2,this.options.locations)for(var i=void 0,r=e;(i=Uu(this.input,r,this.pos))>-1;)++this.curLine,r=this.lineStart=i;this.options.onComment&&this.options.onComment(!0,this.input.slice(e+2,n),e,this.pos,t,this.curPosition())},Zh.skipLineComment=function(t){for(var e=this.pos,n=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=t);this.pos<this.input.length&&!Vu(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(e+t,this.pos),e,this.pos,n,this.curPosition())},Zh.skipSpace=function(){t:for(;this.pos<this.input.length;){var t=this.input.charCodeAt(this.pos);switch(t){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break t}break;default:if(!(t>8&&t<14||t>=5760&&Ru.test(String.fromCharCode(t))))break t;++this.pos}}},Zh.finishToken=function(t,e){this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var n=this.type;this.type=t,this.value=e,this.updateContext(n)},Zh.readToken_dot=function(){var t=this.input.charCodeAt(this.pos+1);if(t>=48&&t<=57)return this.readNumber(!0);var e=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===t&&46===e?(this.pos+=3,this.finishToken(Lu.ellipsis)):(++this.pos,this.finishToken(Lu.dot))},Zh.readToken_slash=function(){var t=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===t?this.finishOp(Lu.assign,2):this.finishOp(Lu.slash,1)},Zh.readToken_mult_modulo_exp=function(t){var e=this.input.charCodeAt(this.pos+1),n=1,i=42===t?Lu.star:Lu.modulo;return this.options.ecmaVersion>=7&&42===t&&42===e&&(++n,i=Lu.starstar,e=this.input.charCodeAt(this.pos+2)),61===e?this.finishOp(Lu.assign,n+1):this.finishOp(i,n)},Zh.readToken_pipe_amp=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?this.options.ecmaVersion>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Lu.assign,3):this.finishOp(124===t?Lu.logicalOR:Lu.logicalAND,2):61===e?this.finishOp(Lu.assign,2):this.finishOp(124===t?Lu.bitwiseOR:Lu.bitwiseAND,1)},Zh.readToken_caret=function(){return 61===this.input.charCodeAt(this.pos+1)?this.finishOp(Lu.assign,2):this.finishOp(Lu.bitwiseXOR,1)},Zh.readToken_plus_min=function(t){var e=this.input.charCodeAt(this.pos+1);return e===t?45!==e||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Pu.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(Lu.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===e?this.finishOp(Lu.assign,2):this.finishOp(Lu.plusMin,1)},Zh.readToken_lt_gt=function(t){var e=this.input.charCodeAt(this.pos+1),n=1;return e===t?(n=62===t&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+n)?this.finishOp(Lu.assign,n+1):this.finishOp(Lu.bitShift,n)):33!==e||60!==t||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===e&&(n=2),this.finishOp(Lu.relational,n)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Zh.readToken_eq_excl=function(t){var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(Lu.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===t&&62===e&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(Lu.arrow)):this.finishOp(61===t?Lu.eq:Lu.prefix,1)},Zh.readToken_question=function(){var t=this.options.ecmaVersion;if(t>=11){var e=this.input.charCodeAt(this.pos+1);if(46===e){var n=this.input.charCodeAt(this.pos+2);if(n<48||n>57)return this.finishOp(Lu.questionDot,2)}if(63===e)return t>=12&&61===this.input.charCodeAt(this.pos+2)?this.finishOp(Lu.assign,3):this.finishOp(Lu.coalesce,2)}return this.finishOp(Lu.question,1)},Zh.readToken_numberSign=function(){var t=35;if(this.options.ecmaVersion>=13&&(++this.pos,Cu(t=this.fullCharCodeAtPos(),!0)||92===t))return this.finishToken(Lu.privateId,this.readWord1());this.raise(this.pos,"Unexpected character '"+Yu(t)+"'")},Zh.getTokenFromCode=function(t){switch(t){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(Lu.parenL);case 41:return++this.pos,this.finishToken(Lu.parenR);case 59:return++this.pos,this.finishToken(Lu.semi);case 44:return++this.pos,this.finishToken(Lu.comma);case 91:return++this.pos,this.finishToken(Lu.bracketL);case 93:return++this.pos,this.finishToken(Lu.bracketR);case 123:return++this.pos,this.finishToken(Lu.braceL);case 125:return++this.pos,this.finishToken(Lu.braceR);case 58:return++this.pos,this.finishToken(Lu.colon);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(Lu.backQuote);case 48:var e=this.input.charCodeAt(this.pos+1);if(120===e||88===e)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===e||79===e)return this.readRadixNumber(8);if(98===e||66===e)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(t);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(t);case 124:case 38:return this.readToken_pipe_amp(t);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(t);case 60:case 62:return this.readToken_lt_gt(t);case 61:case 33:return this.readToken_eq_excl(t);case 63:return this.readToken_question();case 126:return this.finishOp(Lu.prefix,1);case 35:return this.readToken_numberSign()}this.raise(this.pos,"Unexpected character '"+Yu(t)+"'")},Zh.finishOp=function(t,e){var n=this.input.slice(this.pos,this.pos+e);return this.pos+=e,this.finishToken(t,n)},Zh.readRegexp=function(){for(var t,e,n=this.pos;;){this.pos>=this.input.length&&this.raise(n,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(Pu.test(i)&&this.raise(n,"Unterminated regular expression"),t)t=!1;else{if("["===i)e=!0;else if("]"===i&&e)e=!1;else if("/"===i&&!e)break;t="\\"===i}++this.pos}var r=this.input.slice(n,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new jh(this));o.reset(n,r,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var l=null;try{l=new RegExp(r,a)}catch(t){}return this.finishToken(Lu.regexp,{pattern:r,flags:a,value:l})},Zh.readInt=function(t,e,n){for(var i=this.options.ecmaVersion>=12&&void 0===e,r=n&&48===this.input.charCodeAt(this.pos),s=this.pos,a=0,o=0,l=0,c=null==e?1/0:e;l<c;++l,++this.pos){var u=this.input.charCodeAt(this.pos),h=void 0;if(i&&95===u)r&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed in legacy octal numeric literals"),95===o&&this.raiseRecoverable(this.pos,"Numeric separator must be exactly one underscore"),0===l&&this.raiseRecoverable(this.pos,"Numeric separator is not allowed at the first of digits"),o=u;else{if((h=u>=97?u-97+10:u>=65?u-65+10:u>=48&&u<=57?u-48:1/0)>=t)break;o=u,a=a*t+h}}return i&&95===o&&this.raiseRecoverable(this.pos-1,"Numeric separator is not allowed at the last of digits"),this.pos===s||null!=e&&this.pos-s!==e?null:a},Zh.readRadixNumber=function(t){var e=this.pos;this.pos+=2;var n=this.readInt(t);return null==n&&this.raise(this.start+2,"Expected number in radix "+t),this.options.ecmaVersion>=11&&110===this.input.charCodeAt(this.pos)?(n=Xh(this.input.slice(e,this.pos)),++this.pos):Cu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Lu.num,n)},Zh.readNumber=function(t){var e=this.pos;t||null!==this.readInt(10,void 0,!0)||this.raise(e,"Invalid number");var n=this.pos-e>=2&&48===this.input.charCodeAt(e);n&&this.strict&&this.raise(e,"Invalid number");var i=this.input.charCodeAt(this.pos);if(!n&&!t&&this.options.ecmaVersion>=11&&110===i){var r=Xh(this.input.slice(e,this.pos));return++this.pos,Cu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(Lu.num,r)}n&&/[89]/.test(this.input.slice(e,this.pos))&&(n=!1),46!==i||n||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||n||(43!==(i=this.input.charCodeAt(++this.pos))&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(e,"Invalid number")),Cu(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var s,a=(s=this.input.slice(e,this.pos),n?parseInt(s,8):parseFloat(s.replace(/_/g,"")));return this.finishToken(Lu.num,a)},Zh.readCodePoint=function(){var t;if(123===this.input.charCodeAt(this.pos)){this.options.ecmaVersion<6&&this.unexpected();var e=++this.pos;t=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,t>1114111&&this.invalidStringToken(e,"Code point out of bounds")}else t=this.readHexChar(4);return t},Zh.readString=function(t){for(var e="",n=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===t)break;92===i?(e+=this.input.slice(n,this.pos),e+=this.readEscapedChar(!1),n=this.pos):8232===i||8233===i?(this.options.ecmaVersion<10&&this.raise(this.start,"Unterminated string constant"),++this.pos,this.options.locations&&(this.curLine++,this.lineStart=this.pos)):(Vu(i)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return e+=this.input.slice(n,this.pos++),this.finishToken(Lu.string,e)};var td={};Zh.tryReadTemplateToken=function(){this.inTemplateElement=!0;try{this.readTmplToken()}catch(t){if(t!==td)throw t;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Zh.invalidStringToken=function(t,e){if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw td;this.raise(t,e)},Zh.readTmplToken=function(){for(var t="",e=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var n=this.input.charCodeAt(this.pos);if(96===n||36===n&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==Lu.template&&this.type!==Lu.invalidTemplate?(t+=this.input.slice(e,this.pos),this.finishToken(Lu.template,t)):36===n?(this.pos+=2,this.finishToken(Lu.dollarBraceL)):(++this.pos,this.finishToken(Lu.backQuote));if(92===n)t+=this.input.slice(e,this.pos),t+=this.readEscapedChar(!0),e=this.pos;else if(Vu(n)){switch(t+=this.input.slice(e,this.pos),++this.pos,n){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:t+="\n";break;default:t+=String.fromCharCode(n)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),e=this.pos}else++this.pos}},Zh.readInvalidTemplateToken=function(){for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(Lu.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Zh.readEscapedChar=function(t){var e=this.input.charCodeAt(++this.pos);switch(++this.pos,e){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return Yu(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";case 56:case 57:if(this.strict&&this.invalidStringToken(this.pos-1,"Invalid escape sequence"),t){var n=this.pos-1;return this.invalidStringToken(n,"Invalid escape sequence in template string"),null}default:if(e>=48&&e<=55){var i=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],r=parseInt(i,8);return r>255&&(i=i.slice(0,-1),r=parseInt(i,8)),this.pos+=i.length-1,e=this.input.charCodeAt(this.pos),"0"===i&&56!==e&&57!==e||!this.strict&&!t||this.invalidStringToken(this.pos-1-i.length,t?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(r)}return Vu(e)?"":String.fromCharCode(e)}},Zh.readHexChar=function(t){var e=this.pos,n=this.readInt(16,t);return null===n&&this.invalidStringToken(e,"Bad character escape sequence"),n},Zh.readWord1=function(){this.containsEsc=!1;for(var t="",e=!0,n=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var r=this.fullCharCodeAtPos();if(Nu(r,i))this.pos+=r<=65535?1:2;else{if(92!==r)break;this.containsEsc=!0,t+=this.input.slice(n,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(e?Cu:Nu)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),t+=Yu(a),n=this.pos}e=!1}return t+this.input.slice(n,this.pos)},Zh.readWord=function(){var t=this.readWord1(),e=Lu.name;return this.keywords.test(t)&&(e=Du[t]),this.finishToken(e,t)},nh.acorn={Parser:nh,version:"8.8.0",defaultOptions:Xu,Position:Ju,SourceLocation:Qu,getLineInfo:Zu,Node:Ah,TokenType:ku,tokTypes:Lu,keywordTypes:Du,TokContext:yh,tokContexts:gh,isIdentifierChar:Nu,isIdentifierStart:Cu,Token:Qh,isNewLine:Vu,lineBreak:Pu,lineBreakG:Fu,nonASCIIwhitespace:Ru};const ed={undefined:"void(0)",Infinity:"Number.POSITIVE_INFINITY",NaN:"Number.NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2"},nd={ecmaVersion:11},id=t=>(e,n)=>n.error(e,t+" not allowed"),rd=id("Aggregate function"),sd=id("Window function"),ad="Invalid column reference",od="Invalid function call",ld="Table expressions do not support closures",cd="Use aq.escape(fn) to use a function as-is (including closures)",ud=`\nNote: ${ld}. ${cd}, or use table.params({ name: value }) to define dynamic parameters.`,hd=`\nNote: ${ld}. ${cd}, or use aq.addFunction(name, fn) to add new op functions.`;function dd(t,e){const n=function(t){try{return(e=`expr=(${t.field?function(t){const e=JSON.stringify(t+"");return t.table?`(a,b)=>b[${e}]`:`d=>d[${e}]`}(t):i(t)?nt(t):t})`,n=nd,nh.parse(e,n)).body[0].expression.right}catch(e){o("Expression parse error: "+t)}var e,n}(e);let r=t.root=n;return t.spec=e,t.tuple=null,t.tuple1=null,t.tuple2=null,t.$param=null,t.$op=0,t.scope=new Set,t.paramsRef=new Map,t.columnRef=new Map,function(t){return mu("FunctionExpression",t)||mu("ArrowFunctionExpression",t)}(r)?(function(t,e){t.generator&&id("Generator functions")(t,e),t.async&&id("Async functions")(t,e);const{params:n}=t,i=n.length,r=t=>(n,i)=>e.columnRef.set(n,[i,t]),s=(t,n)=>e.paramsRef.set(t,n);i&&(e.join?(yd(e,n[0],"tuple1",r(1)),i>1&&yd(e,n[1],"tuple2",r(2)),i>2&&yd(e,n[2],"$param",s)):(yd(e,n[0],"tuple",r(0)),i>1&&yd(e,n[1],"$param",s))),e.root=t.body}(r,t),r=r.body):t.join?(t.scope.add(t.tuple1="d1"),t.scope.add(t.tuple2="d2"),t.scope.add(t.$param="$")):(t.scope.add(t.tuple="d"),t.scope.add(t.$param="$")),su(r,t,pd),t.root}const pd={FunctionDeclaration:id("Function definitions"),ForStatement:id("For loops"),ForOfStatement:id("For-of loops"),ForInStatement:id("For-in loops"),WhileStatement:id("While loops"),DoWhileStatement:id("Do-while loops"),AwaitExpression:id("Await expressions"),ArrowFunctionExpression:id("Function definitions"),AssignmentExpression:id("Assignments"),FunctionExpression:id("Function definitions"),NewExpression:id('Use of "new"'),UpdateExpression:id("Update expressions"),VariableDeclarator(t,e){Td(t.id,e)},Identifier(t,e,n){vd(t,e,n)&&!e.scope.has(t.name)&&e.error(t,"Invalid variable reference",ud)},CallExpression(t,e){const n=gd(t.callee),i=Rt(n)||$t(n);if(i){if((e.join||!1===e.aggregate)&&Ft(n)&&rd(t,e),(e.join||!1===e.window)&&Vt(n)&&sd(t,e),e.$op=1,e.ast)Ad(t,n,e),t.arguments.forEach((t=>su(t,e,md)));else{const r=e.op(function(t,e,n,i){const r=[],s=[],a=e.param[0]||0,o=a+(e.param[1]||0);return i.forEach(((e,n)=>{n<a?(su(e,t,md),r.push(t.field(e))):n<o?(su(e,t,md),s.push(t.param(e))):t.error(e,"Invalid operator parameter")})),{name:n,fields:r,params:s,...t.spec.window||{}}}(e,i,n,t.arguments));Object.assign(t,{type:"Op",name:r.id})}return e.$op=0,!1}Ut(n)?Ad(t,n,e):e.error(t,od,hd)},MemberExpression(t,e,n){const{object:i,property:r}=t;if(!mu(pt,i))return;const{name:s}=i;if(bd(t)&&mu(pt,r)&&_(ed,r.name))return void Id(t,r.name);const a=s===e.tuple?0:s===e.tuple1?1:s===e.tuple2?2:-1;return a>=0?fd(t,a,e,_d,n):s===e.$param?fd(t,a,e,xd):void(e.paramsRef.has(s)?Sd(t,e.paramsRef.get(s)):e.columnRef.has(s)?wd(i,s,e,t):_(e.params,s)&&Sd(i,s))}};function fd(t,e,n,i,r){const{property:s,computed:a}=t;let o;if(a)if(mu(ft,s))o=s.value;else try{o=n.param(s)}catch(e){n.error(t,"Invalid member expression")}else o=s.name;return i(t,o,e,n,r),!1}const md={...pd,VariableDeclarator:id("Variable declaration in operator call"),Identifier(t,e,n){vd(t,e,n)&&e.error(t,"Variable not accessible in operator call")},CallExpression(t,e){const n=gd(t.callee);Ut(n)?Ad(t,n,e):e.error(t,od,hd)}};function yd(t,e,n,i){mu(pt,e)?(t.scope.add(e.name),t[n]=e.name):mu(yt,e)&&e.properties.forEach((e=>{const n=mu(pt,e.key)?e.key.name:mu(ft,e.key)?e.key.value:t.error(e,"Invalid argument");mu(pt,e.value)||t.error(e.value,"Unsupported destructuring pattern"),i(e.value.name,n)}))}function gd(t){return mu(pt,t)?t.name:mu(mt,t)?bd(t)?"max"===(e=t.property.name)?"greatest":"min"===e?"least":e:t.property.name:null;var e}function bd(t){return mu(pt,t.object)&&"Math"===t.object.name}function vd(t,e,n){const{name:i}=t;if(mu(mt,n)&&n.property===t);else if(mu(gt,n)&&n.key===t);else if(e.paramsRef.has(i))Sd(t,e.paramsRef.get(i));else if(e.columnRef.has(i))wd(t,i,e,n);else if(_(e.params,i))Sd(t,i);else{if(!_(ed,i))return!0;Id(t,i)}}function _d(t,e,n,i,r){const s=0===n?i.table:n>0?i.join[n-1]:null,a=s&&s.column(e);s&&!a&&i.error(t,ad),i.aggronly&&!i.$op&&i.error(t,"Invalid column reference (must be input to an aggregate function)"),Ht(t,e,n,a,r)}function wd(t,e,n,i){const[r,s]=n.columnRef.get(e);_d(t,r,s,n,i)}function xd(t,e,n,i){i.params&&!_(i.params,e)&&i.error(t,"Invalid param reference"),Sd(t,e)}function Sd(t,e){t.type="Parameter",t.name=e}function Id(t,e){t.type="Constant",t.name=e,t.raw=ed[e]}function Ad(t,e,n){if(e===Gt){const e=n.table;e||n.error(t,"The row_object method is not valid in multi-table expressions."),Yt(t,t.arguments.length?t.arguments.map((t=>{const i=n.param(t),r=l(i)?e.columnName(i):i;return e.column(r)||n.error(t,ad),r})):e.columnNames())}else t.callee={type:"Function",name:e}}function Td(t,e){mu(pt,t)?e.scope.add(t.name):mu("ArrayPattern",t)?t.elements.forEach((t=>Td(t,e))):mu(yt,t)?t.properties.forEach((t=>Td(t.value,e))):e.error(t.id,"Unsupported variable declaration")}const Cd={[bt]:1,Op:1};function Nd(t,e={}){const n=e.generate||Ct,i=e.compiler||zt,r=function(t){return(t.table?kd(t.table):t.join?{...kd(t.join[1]),...kd(t.join[0])}:{})||{}}(e),s={},a={},l=[],c=[];let u=0,h=-1;const d=e.join?i.join:1==e.index?i.expr2:i.expr,p={op(t){const e=function(t){let e=`${t.name}(${t.fields.concat(t.params).join(",")})`;return t.frame&&(e+=`[${t.frame.map((t=>Number.isFinite(t)?Math.abs(t):-1))},${!!t.peers}]`),e}(t);return a[e]||(t.id=++h,a[e]=t)},field(t){const e=n(t);return s[e]||(s[e]=++u)},param:t=>mu(ft,t)?t.value:i.param(n(t),r),value(t,i){l.push(t);const s=i.escape||(e.ast?function(t){return su(t,null,{Column:fu,Constant:fu,Default:pu}),t}(i):d(n(i),r));c.push(s),Cd[i.type]&&s!==i&&m(s)&&(s.field=i.name)},error(t,e,n=""){const i=t.start-6,r=t.end-6;o(`${e}: "${String(p.spec).slice(i,r)}"${n}`)}};Object.assign(p,e,{params:r});for(const[e,n]of qt(t))p.value(e+"",n.escape?yu(p,n,r):dd(p,n));if(e.ast)return{names:l,exprs:c};const f=[];for(const t in s)f[s[t]]=i.expr(t,r);const y=Object.values(a);return y.forEach((t=>t.fields=t.fields.map((t=>f[t])))),{names:l,exprs:c,ops:y}}function kd(t){return t&&c(t.params)?t.params():{}}const Ed="Expr",Od="ExprList",Md="ExprNumber",Dd="ExprObject",Bd="JoinKeys",Ld="JoinValues",Pd="Options",Fd="OrderKeys",Vd="SelectionList",Ud="TableRef",Rd="TableRefList";function $d(t,e){return t&&t.expr?new jd({...t,...e}):new jd(e,t)}class jd{constructor(t,e){this.expr=e,Object.assign(this,t)}toString(){return String(this.expr)}toObject(){return{...this,expr:this.toString(),...c(this.expr)?{func:!0}:{}}}}function zd(t){return $d(t,{desc:!0})}function Wd(t,e,n=0){const i=n?{field:!0,table:n}:{field:!0};return $d(t,e?{expr:e,...i}:i)}function Hd(t,e,n){return $d(t,{window:{frame:e||[-1/0,0],peers:!!n}})}function qd(t,e){return(e=e&&c(e.query)?e.query():e)&&c(e.evaluate)?e.evaluate(null,t):t(e)}function Gd(t){return m(t)&&(i(t.all)||i(t.matches)||i(t.not)||i(t.range))}function Yd(t){return t&&c(t.toObject)?t.toObject():c(t)?{expr:String(t),func:!0}:i(t)?t.map(Yd):m(t)?jc(t,(t=>Yd(t))):t}function Kd(t){return i(t)?t.map(Kd):m(t)?i(t.verbs)?pp.from(t):i(t.all)?Jc():i(t.range)?Zc(...t.range):i(t.match)?Xc(RegExp(...t.match)):i(t.not)?Qc(t.not.map(Yd)):function(t){let e=t,n=t.expr;if(null!=n){if(!0===t.field?e=n=Wd(n):!0===t.func&&(e=n=function(t){const e=t=>t;return e.toString=()=>t,e}(n)),m(t.window)){const{frame:i,peers:r}=t.window;e=n=Hd(n,i,r)}!0===t.desc&&(e=zd(n))}return t===e?jc(t,(t=>Kd(t))):e}(t):t}function Jd(t){const e=[];return r(t).forEach((t=>{l(t)?e.push(t):g(t)?e.push(Wd(t,null)):m(t)&&t.expr||c(t)?e.push(t):o("Invalid key value: "+t)})),e}function Qd(t,e){return e<2?r(t):t}const Zd={[Ed]:sp,[Od]:ap,[Md]:function(t){return l(t)?t:np(t)},[Dd]:np,[Bd]:function(t){return i(t)?t.map(ap):np(t,{join:!0})},[Ld]:function(t){return i(t)?t.map(((t,e)=>e<2?ap(t):np(t,{join:!0}))):np(t,{join:!0})},[Fd]:ap,[Vd]:function(t){return r(t).map(rp).flat()}};function Xd(t,e,n){return e===Pd?t?function(t,e={}){const n={};for(const i in t){const r=t[i];n[i]=e[i]?Xd(r,e[i]):r}return n}(t,n):t:Zd[e](t)}function tp(t){return{type:bt,name:t}}function ep(t){return{type:bt,index:t}}function np(t,e){if(g(t))return function(t,e){return Nd({expr:t},{...e,ast:!0}).exprs[0]}(t,e);if(t.expr){let n;if(!0===t.field?n=tp(t.expr):!0===t.func&&(n=np(t.expr,e)),n)return t.desc&&(n={type:"Descending",expr:n}),t.window&&(n={type:"Window",expr:n,...t.window}),n}return Object.keys(t).map((n=>({...np(t[n],e),as:n})))}function ip(t){const e="Selection";return t.all?{type:e,operator:"all"}:t.not?{type:e,operator:"not",arguments:ap(t.not)}:t.range?{type:e,operator:"range",arguments:ap(t.range)}:t.matches?{type:e,operator:"matches",arguments:t.matches}:o("Invalid input")}function rp(t){return Gd(t)?ip(t):l(t)?ep(t):g(t)?tp(t):m(t)?Object.keys(t).map((e=>({type:bt,name:e,as:t[e]}))):o("Invalid input")}function sp(t){return Gd(t)?ip(t):l(t)?ep(t):g(t)?tp(t):m(t)?np(t):o("Invalid input")}function ap(t){return r(t).map(sp).flat()}function op(t){return t&&c(t.toAST)?t.toAST():t}class lp{constructor(t,e=[],n=[]){this.verb=t,this.schema=e,e.forEach(((t,e)=>{const r=t.type,s=n[e],a=r===Bd?i(h=s)?h.map(Jd):h:r===Ld?i(u=s)?u.map(Qd):u:r===Fd?function(t){const e=[];return t.forEach((t=>{const n=null!=t.expr?t.expr:t;if(m(n)&&!c(n))for(const t in n)e.push(n[t]);else t=l(n)?n:g(n)?Wd(t):c(n)?t:o("Invalid orderby field: "+t),e.push(t)})),e}(s):s;var u,h;this[t.name]=void 0!==a?a:t.default}))}static from(t){const e=up[t.verb];return e(...(e.schema||[]).map((({name:e})=>Kd(t[e]))))}evaluate(t,e){const n=this.schema.map((({name:t,type:n})=>{const i=this[t];return n===Ud?qd(e,i):n===Rd?i.map((t=>qd(e,t))):i}));return t[this.verb](...n)}toObject(){const t={verb:this.verb};return this.schema.forEach((({name:e})=>{t[e]=Yd(this[e])})),t}toAST(){const t={type:"Verb",verb:this.verb};return this.schema.forEach((({name:e,type:n,props:i})=>{t[e]=function(t,e,n){return e===Ud?op(t):e===Rd?t.map(op):Xd(Yd(t),e,n)}(this[e],n,i)})),t}}function cp(t,e){return Object.assign(((...n)=>new lp(t,e,n)),{schema:e})}const up={count:cp("count",[{name:"options",type:Pd}]),derive:cp("derive",[{name:"values",type:Dd},{name:"options",type:Pd,props:{before:Vd,after:Vd}}]),filter:cp("filter",[{name:"criteria",type:Dd}]),groupby:cp("groupby",[{name:"keys",type:Od}]),orderby:cp("orderby",[{name:"keys",type:Fd}]),relocate:cp("relocate",[{name:"columns",type:Vd},{name:"options",type:Pd,props:{before:Vd,after:Vd}}]),rename:cp("rename",[{name:"columns",type:Vd}]),rollup:cp("rollup",[{name:"values",type:Dd}]),sample:cp("sample",[{name:"size",type:Md},{name:"options",type:Pd,props:{weight:Ed}}]),select:cp("select",[{name:"columns",type:Vd}]),ungroup:cp("ungroup"),unorder:cp("unorder"),reify:cp("reify"),dedupe:cp("dedupe",[{name:"keys",type:Od,default:[]}]),impute:cp("impute",[{name:"values",type:Dd},{name:"options",type:Pd,props:{expand:Od}}]),fold:cp("fold",[{name:"values",type:Od},{name:"options",type:Pd}]),pivot:cp("pivot",[{name:"keys",type:Od},{name:"values",type:Od},{name:"options",type:Pd}]),spread:cp("spread",[{name:"values",type:Od},{name:"options",type:Pd}]),unroll:cp("unroll",[{name:"values",type:Od},{name:"options",type:Pd,props:{drop:Od}}]),lookup:cp("lookup",[{name:"table",type:Ud},{name:"on",type:Bd},{name:"values",type:Od}]),join:cp("join",[{name:"table",type:Ud},{name:"on",type:Bd},{name:"values",type:Ld},{name:"options",type:Pd}]),cross:cp("cross",[{name:"table",type:Ud},{name:"values",type:Ld},{name:"options",type:Pd}]),semijoin:cp("semijoin",[{name:"table",type:Ud},{name:"on",type:Bd}]),antijoin:cp("antijoin",[{name:"table",type:Ud},{name:"on",type:Bd}]),concat:cp("concat",[{name:"tables",type:Rd}]),union:cp("union",[{name:"tables",type:Rd}]),intersect:cp("intersect",[{name:"tables",type:Rd}]),except:cp("except",[{name:"tables",type:Rd}])};function hp(t){return new pp(null,null,t)}function dp(t){return pp.from(t)}class pp extends a{constructor(t,e,n){super(e),this._verbs=t||[],this._table=n}static from({verbs:t,table:e,params:n}){return new pp(t.map(lp.from),n,e)}get[Symbol.toStringTag](){return this._verbs?`Query: ${this._verbs.length} verbs`+(this._table?` on '${this._table}'`:""):"Object"}get length(){return this._verbs.length}get tableName(){return this._table}params(t){return arguments.length?(this._params={...this._params,...t},this):this._params}evaluate(t,e){t=t||e(this._table);for(const n of this._verbs)t=n.evaluate(t.params(this._params),e);return t}toObject(){return fp(this,"toObject")}toJSON(){return this.toObject()}toAST(){return fp(this,"toAST",{type:"Query"})}}function fp(t,e,n){return{...n,verbs:t._verbs.map((t=>t[e]())),...t._params?{params:t._params}:null,...t._table?{table:t._table}:null}}function mp(t,e){return new pp(t._verbs.concat(e),t._params,t._table)}for(const t in up){const e=up[t];pp.prototype["__"+t]=function(t,...n){return mp(t,e(...n))}}function yp(t,e,...n){const i=["_","$"],r=i.slice(0,n.length);return r.push('"use strict"; const '+n.map(((t,e)=>t.map(((t,n)=>`${i[e]}${n} = ${i[e]}[${n}]`)).join(", "))).join(", ")+`; return (${t}) => ${e};`),Function(...r)(...n)}function gp(t,e){const{type:n,length:i,numChildren:r}=t;if((({typeId:t})=>-1===t)(n))return function(t){const{data:e,length:n,nullCount:i}=t,r=e[e.length-1].dictionary,s=r.length,a=function(t,e,n,i){const r=t.length>1||n?function(t,e,n){const i=new n.ArrayType(e),r=t.length;for(let e,n=0,s=0;n<r;++n)e=t[n].length,i.set(t[n].values.subarray(0,e),s),s+=e;return i}(t,e,t[0].type.indices):t[0].values;return n?function(t,e,n){const i=t.length;for(let r,s,a,o,l=0,c=0;l<i;++l){if(a=t[l].nullBitmap,r=t[l].length>>3,a&&a.length)for(let t=0;t<=r;++t)255!==(o=a[t])&&(s=c+(t<<3),0==(1&o)&&(e[s+0]=n),0==(2&o)&&(e[s+1]=n),0==(4&o)&&(e[s+2]=n),0==(8&o)&&(e[s+3]=n),0==(16&o)&&(e[s+4]=n),0==(32&o)&&(e[s+5]=n),0==(64&o)&&(e[s+6]=n),0==(128&o)&&(e[s+7]=n));c+=t[l].length}return e}(t,r,i):r}(e||[t],n,i,s),o=Array(s),l=t=>null==t||t<0||t>=s?null:void 0!==o[t]?o[t]:o[t]=r.get(t);return{vector:t,length:n,get:t=>l(a[t]),key:t=>a[t],keyFor(t){if(null===t)return i?s:-1;for(let e=0;e<s;++e)if(void 0===o[e]&&(o[e]=r.get(e)),o[e]===t)return e;return-1},groups(t){const e=s+(i?1:0);return{keys:a,get:[l],names:t,rows:X(0,e),size:e}},[Symbol.iterator]:()=>t[Symbol.iterator]()}}(t);const s=r&&e?_p(t):r?bp(_p(t)):(({typeId:t})=>5===t)(n)?bp((e=>t.get(e))):null;return s?{vector:t,length:i,get:s,[Symbol.iterator]:()=>function*(t,e){for(let n=0;n<t;++n)yield e(n)}(i,s)}:t}function bp(t){const e=[];return n=>{const i=e[n];return void 0!==i?i:e[n]=t(n)}}const vp=t=>t.numChildren?u(t.length,_p(t)):t.nullCount?[...t]:t.toArray(),_p=t=>{return(({typeId:t})=>12===t)(e=t.type)||(({typeId:t})=>16===t)(e)?wp(t):(({typeId:t})=>13===t)(t.type)?function(t){const e=[],n=[];t.type.children.forEach(((i,r)=>{e.push(gp(t.getChildAt(r),!0)),n.push(`${nt(i.name)}:_${r}.get(row)`)}));const i=yp("row","({"+n+"})",e);return t.nullCount?e=>t.isValid(e)?i(e):null:i}(t):o(`Unsupported Arrow type: ${nt(t.VectorName)}`);var e},wp=t=>t.nullCount?e=>t.isValid(e)?vp(t.get(e)):null:e=>vp(t.get(e));function xp(t,e={}){t&&!t.batches&&(t=function(){try{return Bc}catch(t){Lc()}}()(t));const n=t.schema.fields.map((t=>t.name)),i=Gc({columnNames:t=>t?n.filter(t):n.slice(),columnIndex:t=>n.indexOf(t)},e.columns||Jc()),r=w();return i.forEach(((e,n)=>{r.add(e,gp(t.getChild(n)))})),new nu(r.data,r.names)}const Sp=t=>t,Ip=[t=>"true"===t||"false"===t,t=>"false"!==t],Ap=[t=>"NaN"===t||(t=+t)===t,t=>+t],Tp=[P,t=>new Date(Date.parse(t))];function Cp(t){const{decimal:e}=t;return e&&"."!==e?Ap.map((t=>n=>t(n&&n.replace(e,".")))):Ap}function Np(t,e){const n=t.length;for(let i=0;i<n;++i){const n=t[i];if(null!=n&&!e(n))return!1}return!0}function kp(t,e=0){return u(t-e,(t=>`col${t+e+1}`))}function Ep(t,e,n){let i=t();const r=i.length,s=+n.autoMax||1e3,a=u(r,(()=>[]));e=e?e.length<r?[...e,kp(r,e.length)]:e:kp(r);let o=0;for(;o<s&&i;++o,i=t())for(let t=0;t<r;++t)a[t].push(""===i[t]?null:i[t]);const l=function(t,e,n){const{parse:i={}}=n,r=!1===n.autoType;return t.map(((t,s)=>c(i[t])?i[t]:r?Sp:function(t,e){const n=[Ip,Cp(e),Tp],i=n.length;for(let e=0;e<i;++e){const[i,r]=n[e];if(Np(t,i))return r}return Sp}(e[s],n)))}(e,a,n);for(l.forEach(((t,e)=>{if(t===Sp)return;const n=a[e];for(let e=0;e<o;++e)null!=n[e]&&(n[e]=t(n[e]))}));i;i=t())for(let t=0;t<r;++t)a[t].push(i[t]?l[t](i[t]):null);const h={};return e.forEach(((t,e)=>h[t]=a[e])),new nu(h,e)}const Op={},Mp={},Dp=10;function Bp(t,e,n){let i=+e||0;for(;--i>=0;)t();return n?()=>{let e;for(;!e;){if(!n(e=t()))return e;e=null}}:t}function Lp(t,e={}){const n=function(t,{delimiter:e=",",skip:n,comment:i}){1!==e.length&&o(`Text "delimiter" should be a single character, found "${e}"`);const r=e.charCodeAt(0);let s,a=t.length,l=0,c=a<=0,u=!1;function h(){if(c)return Mp;if(u)return u=!1,Op;const e=l;let n,i;if(34===t.charCodeAt(e)){for(;l++<a&&34!==t.charCodeAt(l)||34===t.charCodeAt(++l););return(n=l)>=a?c=!0:(i=t.charCodeAt(l++))===Dp?u=!0:13===i&&(u=!0,t.charCodeAt(l)===Dp&&++l),t.slice(e+1,n-1).replace(/""/g,'"')}for(;l<a;){if((i=t.charCodeAt(n=l++))===Dp)u=!0;else if(13===i)u=!0,t.charCodeAt(l)===Dp&&++l;else if(i!==r)continue;return t.slice(e,n)}return c=!0,t.slice(e,a)}return t.charCodeAt(a-1)===Dp&&--a,13===t.charCodeAt(a-1)&&--a,Bp((function(){if((s=h())!==Mp){const t=[];for(;s!==Op&&s!==Mp;)t.push(s),s=h();return t}}),n,i&&(t=>(t&&t[0]||"").startsWith(i)))}(t,e);return Ep(n,!1!==e.header?n():e.names,e)}function Pp(t,e={}){const n=function(t,{skip:e,comment:n}){let i=t.length,r=0;return t.charCodeAt(i-1)===Dp&&--i,13===t.charCodeAt(i-1)&&--i,Bp((function(){if(r>=i)return;const e=r;let n,s,a=!1;for(;r<i;)if((s=t.charCodeAt(n=r++))===Dp?a=!0:13===s&&(a=!0,t.charCodeAt(r)===Dp&&++r),a)return t.slice(e,n);return t.slice(e,i)}),e,n&&(t=>(t||"").startsWith(n)))}(t,e),i=function({positions:t,widths:e}){t||e||o('Fixed width files require a "positions" or "widths" option');let n=0;return t||e.map((t=>[n,n+=t]))}(e);return Ep((()=>{const t=n();if(t)return i.map((([e,n])=>t.slice(e,n).trim()))}),e.names,e)}function Fp(t){const e=t.length;for(let n=0;n<e;++n){const e=t.charCodeAt(n);if(e<48||e>57)return!1}return!0}function Vp(t,e={}){const n=zc(e.autoType);g(t)&&(t=JSON.parse(t));let i,r=t.data;if(m(r)&&!T(r)?t.schema&&t.schema.fields&&(i=t.schema.fields.map((t=>t.name))):r=t,n||e.parse){const t=e.parse||{};for(const e in r){const i=r[e],s=i.length;if(t[e])for(let n=0;n<s;++n)i[n]=t[e](i[n]);else if(n)for(let t=0;t<s;++t){const e=i[t];g(e)&&P(e)&&!Fp(e)&&(i[t]=new Date(e))}}}return new nu(r,i)}function Up(t,e){const n=w();return e.forEach(((e,i)=>{const r=g(e)?e:i;if(r){const e=t.column(i)||o(`Unrecognized column: ${i}`);n.add(r,e)}})),t.create(n)}function Rp(t,e,{before:n,after:i}={}){const r=null!=n,s=null!=i;r||s||o("relocate requires a before or after option."),r&&s&&o("relocate accepts only one of the before or after options."),e=Gc(t,e);const a=[...Gc(t,r?n:i).keys()],l=r?a[0]:a.pop(),c=new Map;return t.columnNames().forEach((t=>{const n=!e.has(t);if(t===l){s&&n&&c.set(t,t);for(const[t,n]of e)c.set(t,n);if(s)return}n&&c.set(t,t)})),Up(t,c)}function $p(t,e=(t=>t),n=""){const i=t.length;if(!i)return"";let r=e(t[0],0);for(let s=1;s<i;++s)r+=n+e(t[s],s);return r}function jp(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function zp(t){return et(t)?t:+t}class Wp{constructor(t){this._values=t||[],this._sorted=null,this._start=0}values(t){return this._start&&(this._values=this._values.slice(this._start),this._start=0),t?this._values.slice():this._values}add(t){this._values.push(t),this._sorted=null}rem(){this._start+=1,this._sorted=null}min(){return this._sorted&&this._sorted.length?this._sorted[0]:function(t,e=0,n=t.length){let i=n?t[e++]:S;for(let r=e;r<n;++r)i>t[r]&&(i=t[r]);return i}(this._values,this._start)}max(){return this._sorted&&this._sorted.length?this._sorted[this._sorted.length-1]:function(t,e=0,n=t.length){let i=n?t[e++]:S;for(let r=e;r<n;++r)i<t[r]&&(i=t[r]);return i}(this._values,this._start)}quantile(t){return this._sorted||(this._sorted=this.values(!0),this._sorted.sort(jp)),function(t,e){const n=t.length;if(!n)return S;if((e=+e)<=0||n<2)return zp(t[0]);if(e>=1)return zp(t[n-1]);const i=(n-1)*e,r=Math.floor(i),s=zp(t[r]);return et(s)?s:s+(zp(t[r+1])-s)*(i-r)}(this._sorted,t)}}const Hp=(t,e,n)=>yp(e,"{"+$p(t,((t,i)=>`_${i}.${n}(${e});`))+"}",t);function qp(t,e){const{ops:n,output:i}=function(t,e){const n={},i=[];function r(t,s=[]){const a=t+":"+s;if(n[a])return n[a];const o=Rt(t),l=o.create(...s);return e<0&&o.stream&&o.stream.forEach((t=>r(t,[]))),o.req&&o.req.forEach((t=>r(t,[]))),n[a]=l,i.push(l),l}const s=t.map((t=>{const e=r(t.name,t.params);return e.output=t.id,e}));return{ops:i,output:s}}(t,e),r=t[0].fields,s=r.length;return new(0===s?Gp:1===s?Yp:2===s?Kp:o("Unsupported field count: "+s))(r,n,i,e)}class Gp extends ru{constructor(t,e,n,i){super(n),this._op=e,this._fields=t,this._stream=!!i}init(){const t={count:0,valid:0,stream:this._stream};return this._op.forEach((e=>e.init(t))),t.values&&(t.list=new Wp),t}write(t,e,n){const i=this._outputs,r=i.length;for(let s=0;s<r;++s)e[i[s].output][n]=i[s].value(t);return 1}_add(){}_rem(){}add(t){++t.count}rem(t){--t.count}}class Yp extends Gp{constructor(t,e,n,i){super(t,e,n,i);const r=["state","v1","v2"];this._add=Hp(e,r,"add"),this._rem=Hp(e,r,"rem")}add(t,e,n){const i=this._fields[0](e,n);++t.count,C(i)&&(++t.valid,t.list&&t.list.add(i),this._add(t,i))}rem(t,e,n){const i=this._fields[0](e,n);--t.count,C(i)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i))}}class Kp extends Gp{constructor(t,e,n,i){super(t,e,n,i);const r=["state","v1","v2"];this._add=Hp(e,r,"add"),this._rem=Hp(e,r,"rem")}add(t,e,n){const i=this._fields[0](e,n),r=this._fields[1](e,n);++t.count,C(i)&&C(r)&&(++t.valid,t.list&&t.list.add([i,r]),this._add(t,i,r))}rem(t,e,n){const i=this._fields[0](e,n),r=this._fields[1](e,n);--t.count,C(i)&&C(r)&&(--t.valid,t.list&&t.list.rem(),this._rem(t,i,r))}}function Jp(t,e,n){if(e.length){const i=t.data(),{keys:r}=t.groups()||{},s=Qp(t,e),a=r?(t,e)=>s[t][r[e]]:t=>s[t][0];n=n.map((t=>e=>t(e,i,a)))}return n}function Qp(t,e,n){if(!e.length)return n;const i=Zp(e),r=t.groups(),s=r?r.size:1;return n=n||u(e.length,(()=>Array(s))),s>1?i.forEach((e=>{const i=tf(t,e,r);for(let t=0;t<s;++t)e.write(i[t],n,t)})):i.forEach((e=>{const i=Xp(t,e);e.write(i,n,0)})),n}function Zp(t,e){const n=[],i={};for(const e of t){const t=e.fields.map((t=>t+"")).join(",");(i[t]||(i[t]=[])).push(e)}for(const t in i)n.push(qp(i[t],e));return n}function Xp(t,e){const n=e.init(),i=t.totalRows(),r=t.data(),s=t.mask();if(t.isOrdered()){const s=t.indices();for(let t=0;t<i;++t)e.add(n,s[t],r)}else if(s)for(let t=s.next(0);t>=0;t=s.next(t+1))e.add(n,t,r);else for(let t=0;t<i;++t)e.add(n,t,r);return n}function tf(t,e,n){const{keys:i,size:r}=n,s=u(r,(()=>e.init())),a=t.data();if(t.isOrdered()){const n=t.indices(),r=n.length;for(let t=0;t<r;++t){const r=n[t];e.add(s[i[r]],r,a)}}else if(t.isFiltered()){const n=t.mask();for(let t=n.next(0);t>=0;t=n.next(t+1))e.add(s[i[t]],t,a)}else{const n=t.totalRows();for(let t=0;t<n;++t)e.add(s[i[t]],t,a)}return s}function ef(t,e){const{get:n,names:i,rows:r,size:s}=e,a=i.length;for(let e=0;e<a;++e){const a=t.add(i[e],Array(s)),o=n[e];for(let t=0;t<s;++t)a[t]=o(r[t])}}function nf(t){return{left(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)<0?i=s+1:r=s}return i},right(e,n,i,r){for(null==i&&(i=0),null==r&&(r=e.length);i<r;){const s=i+r>>>1;t(e[s],n)>0?r=s:i=s+1}return i}}}const rf=nf(jp);function sf(t){return Vt(t.name)||t.frame&&(Number.isFinite(t.frame[0])||Number.isFinite(t.frame[1]))}function af(t,{names:e,exprs:n,ops:i},r={}){const s=t.totalRows(),a=w(r.drop?null:t),o=e.map((t=>a.add(t,Array(s)))),[l,c]=function(t){const e=[],n=[],i=t.length;for(let r=0;r<i;++r){const i=t[r];i.id=r,(sf(i)?n:e).push(i)}return[e,n]}(i),h=t.isGrouped()?t.groups().size:1,d=Qp(t,l,u(i.length,(()=>Array(h))));return c.length?function(t,e,n,i={},r){const s=t.data(),a=function(t,e){const n={};return t.forEach((t=>{const e=(t=>(t.frame||[null,null]).map((t=>Number.isFinite(t)?Math.abs(t):null)))(t),i=(t=>!!t.peers)(t),r=`${e},${i}`,{aggOps:s,winOps:a}=n[r]||(n[r]={frame:e,peers:i,aggOps:[],winOps:[]});Ft(t.name)?s.push(t):a.push(function(t){const{id:e,name:n,fields:i=[],params:r=[]}=t,s=$t(n).create(...r);return i.length&&(s.get=i[0]),s.id=e,s}(t))})),Object.values(n).map((t=>function(t,e,n,i,r){let s,a,o,l,c;const u=t=>a[t-1]===a[t],h=i.length,d=r.length,p=i.length?yp(["w","r","k"],"{"+$p(i,((t,e)=>`r[_${e}.id][k]=_${e}.value(w,_${e}.get);`))+"}",i):()=>{},f={i0:0,i1:0,index:0,size:0,peer:u,init(t,e,n,u){f.index=f.i0=f.i1=0,f.size=e.length,s=t,a=e,l=n,c=u,o=r?r.map((t=>t.init())):null;for(let t=0;t<h;++t)i[t].init();return f},value:(e,n)=>n(s[e],t),step(i){const[h,m]=e,y=f.size,g=f.i0,b=f.i1;f.i0=null!=h?Math.max(0,i-Math.abs(h)):0,f.i1=null!=m?Math.min(y,i+Math.abs(m)+1):y,f.index=i,n&&(f.i0>0&&u(f.i0)&&(f.i0=rf.left(a,a[f.i0])),f.i1<y&&u(f.i1)&&(f.i1=rf.right(a,a[f.i1-1])));for(let e=0;e<d;++e){const n=r[e],i=o[e];for(let e=g;e<f.i0;++e)n.rem(i,s[e],t);for(let e=b;e<f.i1;++e)n.add(i,s[e],t);n.write(i,l,c)}return p(f,l,c),l}};return f}(e,t.frame,t.peers,t.winOps,Zp(t.aggOps,null!=t.frame[0]?-1:1))))}(r,s),o=a.length,l=yp(["r","d","op"],"{"+$p(e,((t,e)=>`_${e}[r] = $${e}(r, d, op);`))+"}",e,n);t.partitions().forEach(((e,n)=>{const r=e.length,c=function(t,e){if(t.isOrdered()){const n=t.comparator(),i=t.data(),r=e.length,s=new Uint32Array(r);for(let t=1,a=0;t<r;++t)s[t]=n(e[t-1],e[t],i)?++a:a;return s}return e}(t,e);for(let t=0;t<o;++t)a[t].init(e,c,i,n);const u=t=>i[t][n];for(let t=0;t<r;++t){for(let e=0;e<o;++e)a[e].step(t);l(e[t],s,u)}}))}(t,o,n,d,c):function(t,e,n,i){const r=t.mask(),s=t.data(),{keys:a}=t.groups()||{},o=a?(t,e)=>i[t][a[e]]:t=>i[t][0],l=e.length;for(let i=0;i<l;++i){const a=n[i],l=e[i];if(r)for(let t=r.next(0);t>=0;t=r.next(t+1))l[t]=a(t,s,o);else{const e=t.totalRows();for(let t=0;t<e;++t)l[t]=a(t,s,o)}}}(t,o,n,d),t.create(a)}const of=2147483648;class lf{constructor(t){this._size=t,this._bits=new Uint32Array(Math.ceil(t/32))}get length(){return this._size}count(){const t=this._bits.length;let e=0;for(let n=0;n<t;++n)for(let t=this._bits[n];t;++e)t&=t-1;return e}get(t){return this._bits[t>>5]&of>>>t}set(t){this._bits[t>>5]|=of>>>t}clear(t){this._bits[t>>5]&=~(of>>>t)}scan(t){for(let e=this.next(0);e>=0;e=this.next(e+1))t(e)}next(t){const e=this._bits,n=e.length;let i=t>>5,r=e[i]&4294967295>>>t;for(;i<n;r=e[++i])if(0!==r)return(i<<5)+Math.clz32(r);return-1}nth(t){let e=this.next(0);for(;t--&&e>=0;)e=this.next(e+1);return e}not(){const t=this._bits,e=t.length;for(let n=0;n<e;++n)t[n]=~t[n];const n=this._size%32;return n&&(t[e-1]&=of>>n-1),this}and(t){if(t){const e=this._bits,n=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]&=n[t]}return this}or(t){if(t){const e=this._bits,n=t._bits,i=e.length;for(let t=0;t<i;++t)e[t]|=n[t]}return this}}function cf(t,{names:e=[],exprs:n=[],ops:i=[]},s={}){if(!e.length)return t;const a=s.limit>0?+s.limit:1/0,o=s.index?!0===s.index?"index":s.index+"":null,l=new Set(s.drop),c=Jp(t,i,n),u=w(),h=new Set(e),d=[],p=[],f=[];t.columnNames().forEach((e=>{if(!l.has(e)){const n=u.add(e,[]);h.has(e)||(d.push(t.column(e)),p.push(n))}})),e.forEach((t=>{l.has(t)||(u.has(t)||u.add(t,[]),f.push(u.data[t]))}));const m=o?u.add(o,[]):null;let y=0;const g=d.length,b=f.length,v=(t,e)=>{for(let n=0;n<g;++n)p[n].length=y+e,p[n].fill(d[n].get(t),y,y+e)},_=m?(t,e)=>{for(let n=0;n<e;++n)m[t+n]=n}:()=>{};if(1===b){const e=c[0],n=f[0];t.scan(((t,i)=>{const s=r(e(t,i)),o=Math.min(s.length,a);v(t,o);for(let t=0;t<o;++t)n[y+t]=s[t];_(y,o),y+=o}))}else t.scan(((t,e)=>{let n=0;const i=c.map((i=>{const s=r(i(t,e));return n=Math.min(Math.max(n,s.length),a),s}));v(t,n);for(let t=0;t<b;++t){const e=f[t],r=i[t];for(let t=0;t<n;++t)e[y+t]=r[t]}_(y,n),y+=n}));return t.create(u.new())}function uf(t,e,n,i={window:!1}){const s=new Map,a=n=>{g(n=l(n)?e.columnName(n):n)?s.set(n,Wd(n)):c(n)?Gc(e,n).forEach(a):m(n)?Hc(s,n):o(`Invalid ${t} value: ${n+""}`)};return r(n).forEach(a),i.preparse&&i.preparse(s),Nd(s,{table:e,...i})}function hf(t,e,n,i){const r=n&&n.length;return function(t,{names:e,exprs:n,ops:i},r){const s=Jp(t,i,n),a=r?null:w(t),o=t.totalRows();return e.forEach(((e,n)=>{const i=t.column(e),l=r?i.data:a.add(e,Array(o)),c=s[n];t.scan((t=>{const e=i.get(t);l[t]=C(e)?e:c(t)}))})),r?t:t.create(a)}(r?function(t,e,n){const i=t.groups(),r=t.data(),s=(i?i.names:[]).concat(e),a=(i?i.get:[]).concat(e.map((e=>t.getter(e)))),o=new Set,l=kt(a);t.scan(((t,e)=>o.add(l(t,e))));const c=t.columnNames(),u=w(),h=c.map((t=>u.add(t,[])));c.forEach(((e,n)=>{const i=r[e],s=h[n];t.scan((t=>s.push(i.get(t))))}));const d=kt(a.map(((t,e)=>t=>t[e]))),p=yp("v","{"+h.map(((t,e)=>`_${e}.push(v[$${e}]);`)).join("")+"}",h,c.map((t=>s.indexOf(t))));if(i){let t=i.keys.length;const e=n.reduce(((t,e)=>t*e.length),i.size),r=new Uint32Array(e+(t-o.size));r.set(i.keys),df(i,n,((e,n)=>{o.has(d(e))||(p(e),r[t++]=n[0])})),u.groupby({...i,keys:r})}else df(i,n,(t=>{o.has(d(t))||p(t)}));return t.create(u.new())}(t,n,i):t,e,r)}function df(t,e,n){const i=t?t.get.length:0,r=t?1:0,s=r+e.length,a=new Int32Array(s),o=new Int32Array(s),l=[];if(t){const{get:e,rows:n,size:r}=t;a[0]=r,l.push(((t,r)=>{const s=n[r];for(let n=0;n<i;++n)t[n]=e[n](s)}))}e.forEach(((t,e)=>{const n=e+i;a[e+r]=t.length,l.push(((e,i)=>e[n]=t[i]))}));const c=Array(i+e.length);for(let t=0;t<s;++t)l[t](c,0);n(c,o);for(let t=s-1;t>=0;){const e=++o[t];e<a[t]?(l[t](c,e),n(c,o),t=s-1):(o[t]=0,l[t](c,0),--t)}}function pf(t,{names:e,exprs:n,ops:i}){const r=w(),s=t.groups();return s&&ef(r,s),function(t,e,n,i=[],r){if(!e.length)return;const s=n?n.size:1,a=(t,e)=>i[t][e],o=t.length;for(let n=0;n<o;++n){const o=e[n];if(null!=o.field)r.add(t[n],i[o.field]);else if(s>1){const e=r.add(t[n],Array(s));for(let t=0;t<s;++t)e[t]=o(t,null,a)}else r.add(t[n],[o(0,null,a)])}}(e,n,s,Qp(t,i),r),t.create(r.new())}function ff(t){t.forEach(((e,n)=>e.field?t.set(n,lt(e+"")):0))}function mf(t,e){const n=new Map;return t.scan(((t,i)=>{const r=e(t,i);null!=r&&r==r&&n.set(r,t)})),n}function yf(t,e,n,{names:r,exprs:s},a={}){const o=t.data(),l=t.indices(!1),c=l.length,u=new Int32Array(c),h=e.data(),d=e.indices(!1),p=d.length,f=new Int32Array(p),m=r.length,y=w(),g=Array(m),b=Array(m);for(let t=0;t<r.length;++t)g[t]=y.add(r[t],[]),b[t]=s[t];const v=function(t,e){const n=["i","a","j","b"];return yp(n,"{"+$p(t,((t,e)=>`_${e}.push($${e}(${n}));`))+"}",t,e)}(g,b);if((i(n)?bf:gf)(v,n,o,h,l,d,u,f,c,p),a.left)for(let t=0;t<c;++t)u[t]||v(l[t],o,-1,h);if(a.right)for(let t=0;t<p;++t)f[t]||v(-1,o,d[t],h);return t.create(y.new())}function gf(t,e,n,i,r,s,a,o,l,c){for(let u=0;u<l;++u){const l=r[u];for(let r=0;r<c;++r){const c=s[r];e(l,n,c,i)&&(t(l,n,c,i),a[u]=1,o[r]=1)}}}function bf(t,[e,n],i,r,s,a,o,l,c,u){let h,d,p,f,m,y,g,b,v=t;c>=u?(h=i,d=e,p=o,f=s,m=r,y=n,g=l,b=a):(h=r,d=n,p=l,f=a,m=i,y=e,g=o,b=s,v=(e,n,i,r)=>t(i,r,e,n));const _=function(t,e,n){const i=new Map,r=t.length;for(let s=0;s<r;++s){const r=n(t[s],e);null!=r&&r==r&&(i.has(r)?i.get(r).push(s):i.set(r,[s]))}return i}(b,m,y),w=f.length;for(let t=0;t<w;++t){const e=f[t],n=_.get(d(e,h));if(n){const i=n.length;for(let t=0;t<i;++t){const i=n[t];v(e,h,b[i],m),g[i]=1}p[t]=1}}}function vf(t,e,n){const i=new Map;return r(n).forEach(((n,r)=>{g(n=l(n)?e.columnName(n):n)?i.set(r,Wd(n)):c(n)||m(n)&&n.expr?i.set(r,n):o(`Invalid ${t} key value: ${n+""}`)})),kt(Nd(i,{table:e,aggregate:!1,window:!1}).exprs,!0)}function _f(t,e,n){if(n)g(n)?n=[n,n]:i(n)&&1===n.length&&(n=[n[0],n[0]]);else{const i=function(t,e){const n=new Set(e);return t.filter((t=>n.has(t)))}(t.columnNames(),e.columnNames());i.length||o("Natural join requires shared column names."),n=[i,i]}return n}function wf(t,e,n,i){return n.length!==i.length&&o("Mismatched number of join keys"),[vf("join",t,n),vf("join",e,i)]}const xf={aggregate:!1,window:!1,index:1};function Sf(t,e,n,s,a={}){n=_f(t,e,n);const o={join:[t,e]};let l;if(i(n)){const[i,o]=n.map(r);l=wf(t,e,i,o),s||(s=function(t,e,n,i){const r=[];e.forEach(((t,e)=>g(t)&&t===n[e]?r.push(t):0));const s=Qc(r);if(i.left&&i.right){const e=new Set(r);return[t.columnNames().map((t=>{const n=`[${nt(t)}]`;return e.has(t)?{[t]:`(a, b) => a${n} == null ? b${n} : a${n}`}:t})),s]}return i.right?[s,Jc()]:[Jc(),s]}(t,i,o,a))}else l=Nd({on:n},o).exprs[0],s||(s=[Jc(),Jc()]);return yf(t,e,l,function(t,e,n,r,s=[]){if(i(n)){let i,a,o,l=n.length;i=a=o={names:[],exprs:[]},l--&&(i=uf("join",t,n[0],r)),l--&&(a=uf("join",e,n[1],xf)),l--&&(o=Nd(n[2],r));const c=new Set,u=new Set(i.names);return a.names.forEach((t=>{u.has(t)&&c.add(t)})),c.size&&(If(i.names,c,s[0]||"_1"),If(a.names,c,s[1]||"_2")),{names:i.names.concat(a.names,o.names),exprs:i.exprs.concat(a.exprs,o.exprs)}}return Nd(n,r)}(t,e,s,o,a&&a.suffix),a)}function If(t,e,n){t.forEach(((i,r)=>e.has(i)?t[r]=i+n:0))}function Af(t,e,n,[i,r]){const s=mf(n,r);e.scan(((e,n)=>{s.get(i(e,n))>=0&&t.set(e)}))}function Tf(t,e,n,i){const r=e.numRows(),s=n.numRows(),a=e.data(),o=n.data();if(e.isFiltered()||n.isFiltered()){const l=e.indices(!1),c=n.indices(!1);for(let e=0;e<r;++e){const n=l[e];for(let e=0;e<s;++e)if(i(n,a,c[e],o)){t.set(n);break}}}else for(let e=0;e<r;++e)for(let n=0;n<s;++n)if(i(e,a,n,o)){t.set(e);break}}function Cf(t,e,n,s){return n=_f(t,e,n),function(t,e,n,r={}){const s=new lf(t.totalRows());return(i(n)?Af:Tf)(s,t,e,n),r.anti&&s.not().and(t.mask()),t.create({filter:s})}(t,e,i(n)?wf(t,e,...n.map(r)):Nd({on:n},{join:[t,e]}).exprs[0],s)}const Nf=(t,e)=>null!=t?t:e;function kf(t){t.forEach(((e,n)=>e.field?t.set(n,st(e+"")):0))}function Ef(t,e){return pf(t,Nd(e,{table:t,aggronly:!0,window:!1}))}function Of(t,e,n,i){return(e?i?Df:Mf:i?Lf:Bf)(t.length,t,n,i)}function Mf(t,e,n){const i=n.length;for(let r=0;r<t;++r)e[r]=n[i*G()|0];return e}function Df(t,e,n,i){const r=n.length,s=new Float64Array(r);let a=0;for(let t=0;t<r;++t)s[t]=a+=i(n[t]);const o=nf(jp).right;for(let i=0;i<t;++i)e[i]=n[o(s,a*G())];return e}function Bf(t,e,n){const i=n.length;if(t>=i)return n;for(let i=0;i<t;++i)e[i]=n[i];for(let r=t;r<i;++r){const i=r*G();i<t&&(e[0|i]=n[r])}return e}function Lf(t,e,n,i){const r=n.length;if(t>=r)return n;const s=new Float32Array(r),a=new Uint32Array(r);for(let t=0;t<r;++t)a[t]=t,s[t]=-Math.log(G())/i(n[t]);a.sort(((t,e)=>s[t]-s[e]));for(let i=0;i<t;++i)e[i]=n[a[i]];return e}const Pf=t=>e=>t.get(e)||0;function Ff(t,{names:e=[],exprs:n=[],ops:i=[]}){const r=e.length;if(0===r)return null;if(1===r&&!t.isFiltered()&&n[0].field){const i=t.column(n[0].field);if(i.groups)return i.groups(e)}let s=Jp(t,i,n);const a=kt(s),o=t.totalRows(),l=new Uint32Array(o),c={},u=[],h=t.data(),d=t.mask();if(d)for(let t=d.next(0);t>=0;t=d.next(t+1)){const e=a(t,h)+"",n=c[e];l[t]=null!=n?n:c[e]=u.push(t)-1}else for(let t=0;t<o;++t){const e=a(t,h)+"",n=c[e];l[t]=null!=n?n:c[e]=u.push(t)-1}return i.length||(s=s.map((t=>e=>t(e,h)))),{keys:l,get:s,names:e,rows:u,size:u.length}}const Vf=(t,e,n,i)=>`((u = ${t}) < (v = ${e}) || u == null) && v != null ? ${n}\n    : (u > v || v == null) && u != null ? ${i}\n    : ((v = v instanceof Date ? +v : v), (u = u instanceof Date ? +u : u)) !== u && v === v ? ${n}\n    : v !== v && u === u ? ${i} : `,Uf={__antijoin:(t,e,n)=>Cf(t,e,n,{anti:!0}),__count:(t,e={})=>Ef(t,{[e.as||"count"]:at()}),__cross:(t,e,n,i)=>Sf(t,e,(()=>!0),n,{...i,left:!0,right:!0}),__concat:function(t,e){const n=t.numRows(),i=n+e.reduce(((t,e)=>t+e.numRows()),0);if(n===i)return t;const r=[t,...e],s=w();return t.columnNames().forEach((t=>{const e=Array(i);let n=0;r.forEach((i=>{const r=i.column(t)||{get:()=>S};i.scan((t=>e[n++]=r.get(t)))})),s.add(t,e)})),t.create(s.new())},__dedupe:function(t,e=[]){return t.groupby(e.length?e:t.columnNames()).filter("row_number() === 1").ungroup().reify()},__derive:function(t,e,n={}){const i=af(t,Nd(e,{table:t}),n);return n.drop||null==n.before&&null==n.after?i:Rp(i,Object.keys(e).filter((e=>!t.column(e))),n)},__except:function(t,e){if(0===e.length)return t;const n=t.columnNames();return e.reduce(((t,e)=>t.antijoin(e.select(n))),t).dedupe()},__filter:function(t,e){const n=Nd({p:e},{table:t});let i=n.exprs[0];if(n.ops.length){const{data:e}=af(t,n,{drop:!0}).column("p");i=t=>e[t]}return function(t,e){const n=t.totalRows(),i=t.mask(),r=t.data(),s=new lf(n);if(i)for(let t=i.next(0);t>=0;t=i.next(t+1))e(t,r)&&s.set(t);else for(let t=0;t<n;++t)e(t,r)&&s.set(t);return t.create({filter:s})}(t,i)},__fold:function(t,e,n){return function(t,{names:e=[],exprs:n=[],ops:i=[]},r={}){if(0===e.length)return t;const[s="key",a="value"]=r.as||[],o=Jp(t,i,n);return cf(t,{names:[s,a],exprs:[()=>e,(t,e)=>o.map((n=>n(t,e)))]},{...r,drop:e})}(t,uf("fold",t,e),n)},__impute:function(t,e,n={}){if((e=Nd(e,{table:t})).names.forEach((e=>t.column(e)?0:o(`Invalid impute column ${nt(e)}`))),n.expand){const i={preparse:ff,aggronly:!0},r=uf("impute",t,n.expand,i),s=pf(t.ungroup(),r);return hf(t,e,r.names,r.names.map((t=>s.get(t,0))))}return hf(t,e)},__intersect:function(t,e){const n=t.columnNames();return e.length?e.reduce(((t,e)=>t.semijoin(e.select(n))),t).dedupe():t.reify([])},__join:Sf,__lookup:function(t,e,n,i){return function(t,e,[n,i],{names:r,exprs:s,ops:a}){const o=w(t),l=t.totalRows();r.forEach((t=>o.add(t,Array(l).fill(S))));const c=mf(e,i),u=yp(["lr","rr","data"],"{"+$p(r,((t,e)=>`_[${e}][lr] = $[${e}](rr, data);`))+"}",r.map((t=>o.data[t])),Jp(e,a,s)),h=e.data();return t.scan(((t,e)=>{const i=c.get(n(t,e));i>=0&&u(t,i,h)})),t.create(o)}(t,e,[vf("lookup",t,(n=_f(t,e,n))[0]),vf("lookup",e,n[1])],uf("lookup",e,i))},__pivot:function(t,e,n,i){return function(t,e,n,i={}){const{keys:r,keyColumn:s}=function(t,e,n){const i=n.limit>0?+n.limit:1/0,r=Nf(n.sort,!0),s=Nf(n.keySeparator,"_"),a=Jp(t,e.ops,e.exprs),o=1===a.length?a[0]:(t,e)=>a.map((n=>n(t,e))).join(s),l=Array(t.totalRows());t.scan(((t,e)=>l[t]=o(t,e)));const c=Qp(t.ungroup(),[{id:0,name:"array_agg_distinct",fields:[t=>l[t]],params:[]}])[0][0],u=r?c.sort():c;return{keys:Number.isFinite(i)?u.slice(0,i):u,keyColumn:l}}(t,e,i),a=Nf(i.valueSeparator,"_"),o=n.names.length>1?(t,e)=>e+a+r[t]:t=>r[t],l=r.map((e=>Qp(t,n.ops.map((t=>{if("count"===t.name){const n=t=>e===s[t]?1:NaN;return n.toString=()=>e+":1",{...t,name:"sum",fields:[n]}}const n=t.fields.map((t=>{const n=(n,i)=>e===s[n]?t(n,i):NaN;return n.toString=()=>e+":"+t,n}));return{...t,fields:n}})))));return t.create(function({names:t,exprs:e},n,i,r){const s=i?i.size:1,a=w(),o=r.length,l=t.length;let c;const u=(t,e)=>c[t][e];i&&ef(a,i);for(let i=0;i<l;++i){const l=e[i];if(null!=l.field)for(let e=0;e<o;++e)a.add(n(e,t[i]),r[e][l.field]);else if(s>1)for(let e=0;e<o;++e){c=r[e];const o=a.add(n(e,t[i]),Array(s));for(let t=0;t<s;++t)o[t]=l(t,null,u)}else for(let e=0;e<o;++e)c=r[e],a.add(n(e,t[i]),[l(0,null,u)])}return a.new()}(n,o,t.groups(),l))}(t,uf("fold",t,e),uf("fold",t,n,{preparse:kf,aggronly:!0}),i)},__relocate:Rp,__rename:function(t,e){const n=new Map;return t.columnNames((t=>(n.set(t,t),0))),Up(t,Gc(t,e,n))},__rollup:Ef,__sample:function(t,e,n={}){return function(t,e,n,i={}){const{replace:r,shuffle:s}=i,a=t.partitions(!1);let o=0;e=a.map(((t,n)=>{let i=e(n);return o+=i=r?i:Math.min(t.length,i),i}));const l=new Uint32Array(o);let c=0;return a.forEach(((t,i)=>{const s=e[i],a=l.subarray(c,c+=s);r||s!==t.length?Of(a,r,t,n):a.set(t)})),!1!==s&&(a.length>1||!r)&&function(t,e=0,n=t.length){let i=n-(e=+e);for(;i;){const n=G()*i--|0,r=t[i+e];t[i+e]=t[n+e],t[n+e]=r}}(l),t.reify(l)}(t,function(t,e){return l(e)?()=>e:Pf(pf(t,Nd({size:e},{table:t,window:!1})).column("size"))}(t,e),function(t,e){return null==e?null:(e=l(e)?t.columnName(e):e,Pf(g(e)?t.column(e):af(t,Nd({w:e},{table:t}),{drop:!0}).column("w")))}(t,n.weight),n)},__select:function(t,e){return Up(t,Gc(t,e))},__semijoin:Cf,__spread:function(t,e,n){return function(t,{names:e,exprs:n,ops:i=[]},s={}){if(0===e.length)return t;const a=1===e.length&&s.as||[],o=null==s.drop||!!s.drop,l=null==s.limit?a.length||1/0:Math.max(1,+s.limit||1),c=Jp(t,i,n),u=w(),h=e.reduce(((t,e,n)=>t.set(e,n)),new Map),d=(e,n)=>{const i=function(t,e,n){const i=t.totalRows(),s=[];return t.scan(((t,a)=>{const o=r(e(t,a)),l=Math.min(o.length,n);for(;s.length<l;)s.push(Array(i).fill(S));for(let e=0;e<l;++e)s[e][t]=o[e]})),s}(t,c[e],l),s=i.length;for(let t=0;t<s;++t)u.add(a[t]||`${n}_${t+1}`,i[t])};return t.columnNames().forEach((e=>{h.has(e)?(o||u.add(e,t.column(e)),d(h.get(e),e),h.delete(e)):u.add(e,t.column(e))})),h.forEach(d),t.create(u)}(t,uf("spread",t,e),n)},__union:function(t,e){return t.concat(e).dedupe()},__unroll:function(t,e,n){return cf(t,uf("unroll",t,e),n&&n.drop?{...n,drop:uf("unroll",t,n.drop).names}:n)},__groupby:function(t,e){return function(t,e){return t.create({groups:Ff(t,e)})}(t,uf("groupby",t,e))},__orderby:function(t,e){return function(t,e){return t.create({order:e})}(t,function(t,e){let n=-1;const i=new Map,r=t=>i.set(++n+"",t);return e.forEach((e=>{const n=null!=e.expr?e.expr:e;if(m(n)&&!c(n))for(const t in n)r(n[t]);else r(l(n)?Wd(e,t.columnName(n)):g(n)?Wd(e):c(n)?e:o("Invalid orderby field: "+e))})),function(t,e){const n=[],i=[],r=[];let s=null,a="0",o="0";t.isGrouped()&&(s=t.groups().keys,a="ka",o="kb");const{ops:l}=Nd(e,{table:t,value:(t,e)=>{if(n.push(t),e.escape){const t=t=>`fn[${r.length}](${t}, data)`;i.push([t("a"),t("b")]),r.push(e.escape)}else i.push([Ct(e,{index:"a",op:a}),Ct(e,{index:"b",op:o})])},window:!1}),c=Qp(t,l),u=(t,e)=>c[t][e],h=n.length;let d="return (a, b) => {"+(u&&t.isGrouped()?"const ka = keys[a], kb = keys[b];":"")+"let u, v; return ";for(let t=0;t<h;++t){const r=e.get(n[t]).desc?-1:1,[s,a]=i[t];d+=Vf(s,a,-r,r)}return d+="0;};",Function("op","keys","fn","data",d)(u,s,r,t.data())}(t,i)}(t,e))},__ungroup:function(t){return t.isGrouped()?t.create({groups:null}):t},__unorder:function(t){return t.isOrdered()?t.create({order:null}):t},__reduce:function(t,e){const n=w(),i=t.groups(),{get:r,names:s=[],rows:a,size:o=1}=i||{},l=new Uint32Array(o+1);s.forEach((t=>n.add(t,null)));const c=i?tf(t,e,i):[Xp(t,e)];e.outputs().map((t=>n.add(t,[])));const u=l.length-1;let h=0;for(let t=0;t<u;++t)h+=l[t+1]=e.write(c[t],n.data,l[t]);if(i){const e=t.data();s.forEach(((t,i)=>{const s=n.data[t]=Array(h),c=r[i];for(let t=0,n=0;t<o;++t)s.fill(c(a[t],e),n,n+=l[t+1])}))}return t.create(n.new())}};function Rf(t,e){return nu.new(t,e)}function $f(t,e){return nu.from(t,e)}function jf(t,e={}){const n=e.using||Lp;return fetch(t,e.fetch).then((t=>t[e.as||"text"]())).then((t=>n(t,e)))}function zf(t,e){return jf(t,{...e,as:"arrayBuffer",using:xp})}function Wf(t,e){return jf(t,{...e,as:"text",using:Lp})}function Hf(t,e){return jf(t,{...e,as:"text",using:Pp})}function qf(t,e){return jf(t,{...e,as:"json",using:Gf})}function Gf(t,e){return i(t)?$f(t):Vp(t,e)}function Yf(t,e={}){const n=`d[${JSON.stringify(t)}]`,{maxbins:i,nice:r,minstep:s,step:a,offset:o}=e,l=[i,r,s,a];let c=l.length;for(;c&&null==l[--c];)l.pop();return`d => op.bin(${n}, ...op.bins(${n}${l.length?", "+l.map((t=>t+"")).join(", "):""}), ${o||0})`}function Kf(t){return $d(t,{escape:!0,toString(){o("Escaped values can not be serialized.")}})}function Jf(t){return`() => op.round(${+t} * op.count())`}function Qf(...t){return t=t.flat(),e=>{const n=new Map,i=Math.min(t.length,e.numCols());for(let r=0;r<i;++r)n.set(e.columnName(r),t[r]);return n}}function Zf(t,e){return t.ungroup().rollup({_:e}).get("_")}Object.assign(nu.prototype,Uf);const Xf=(t,e)=>o(`Illegal ${e} name: ${nt(t)}`),tm=(t,e)=>o(`The ${e} name ${nt(t)} is reserved and can not be overridden.`);function em(t,e,n=dt,i="function"){t||Xf(t,i),!e.override&&_(n,t)&&((t,e)=>{o(`The ${e} ${nt(t)} is already defined. Use override option?`)})(t,i)}function nm(t,e,n,i){return n[t]===e||em(t,i)}function im(t,e,n,i={}){if(nm(t,e,n,i))return;const[r=0,s=0]=e.param;n[t]=e,dt[t]=(...e)=>it(t,e.slice(0,r),e.slice(r,r+s))}function rm(t,e,n){im(t,e,Dt,n)}function sm(t,e,n){im(t,e,Pt,n)}function am(t,e,n={}){1===arguments.length&&(""===(t=(e=t).name)||"anonymous"===t?o("Anonymous function provided, please include a name argument."):t===Gt&&tm(Gt,"function")),nm(t,e,tt,n)||(tt[t]=e,dt[t]=e)}const om=nu.prototype;let lm;function cm(t){for(;t;t=Object.getPrototypeOf(t))Object.getOwnPropertyNames(t).forEach((t=>lm[t]=1))}function um(t,e,n){const i="method";if(om[t]&&om[t].fn===e)return!0;lm||(lm={},cm(om),cm(pp.prototype)),lm[t]&&tm(t,i),"_"===(t+"")[0]&&Xf(t,i),em(t,n,om,i)}function hm(t,e,n={}){um(t,e,n)||(om[t]=function(...t){return e(this,...t)},om[t].fn=e)}function dm(t,e,n,i={}){hm(t,e,i),function(t,e){pp.prototype[t]=function(...t){return mp(this,e(...t))}}(t,up[t]=cp(t,n))}function pm(t,e={}){const n=t&&t.arquero_package||t,i={functions:[(t,e,n)=>nm(t,e,tt,n),am],aggregateFunctions:[(t,e,n)=>nm(t,e,Dt,n),rm],windowFunctions:[(t,e,n)=>nm(t,e,Pt,n),sm],tableMethods:[um,hm],verbs:[(t,e,n)=>um(t,e.method,n),(t,e,n)=>dm(t,e.method,e.params,n)]};function r(t){for(const r in i){const s=i[r],a=n[r];for(const n in a)s[t](n,a[n],e)}}r(0),r(1)}const fm={Table:h,ColumnTable:nu,Transformable:a,Query:pp,Reducer:ru,Verb:lp,Verbs:up,columnFactory:function(t){return arguments.length?p=t:p},parse:Nd,walk_ast:su},mm="5.1.0"},651:(t,e,n)=>{n.d(e,{Z:()=>o});var i=n(8081),r=n.n(i),s=n(3645),a=n.n(s)()(r());a.push([t.id,".data-table, .data-summary {\r\n  max-width: 100%;\r\n  background-color: var(--vscode-editor-background);\r\n  border: 1px solid var(--vscode-panel-border);\r\n}\r\n\r\n.data-summary {\r\n  padding: 10px;\r\n}\r\n\r\n.flat-data-grid {\r\n  min-height: 480px;\r\n  border: 1px solid var(--vscode-panel-border);\r\n}\r\n\r\n.github-octo-flat-ui {\r\n  height: 560px !important;\r\n  color: black !important;\r\n}\r\n\r\n.text-output {\r\n  background-color: var(--vscode-editor-background);\r\n  border-width: 0px;\r\n  font-family: var(--vscode-editor-font-family);\r\n  font-size: var(--vscode-editor-font-size);\r\n  margin-top: 0px;\r\n  margin-bottom: 0px;\r\n  max-height: 360px;\r\n  overflow: auto;\r\n  tab-size: 2;\r\n  white-space: pre-wrap;\r\n  padding: 10px;\r\n}\r\n\r\n.text-output code {\r\n  color: var(--vscode-editor-foreground) !important;\r\n}\r\n\r\n.data-summary-card {\r\n  max-width: 100px;\r\n  font-family: sans-serif;\r\n  font-size: 12px;\r\n  margin-right: 10px;\r\n  padding-top: 5px;\r\n}\r\n\r\n/* data table styles */\r\n.data-table form {\r\n  margin: 0px !important;\r\n  max-height: 360px;\r\n  display: block;\r\n  overflow-y: auto;\r\n  width: 100%;\r\n}\r\n\r\n.data-table form table {\r\n  table-layout: fixed !important;\r\n}\r\n\r\ntbody tr:hover {\r\n  box-shadow: inset 0 0 1500px 100px rgba(255, 255, 255, 0.1);\r\n}\r\n\r\n.vscode-light tbody tr:hover {\r\n  box-shadow: inset 0 0 1500px 100px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.data-table form table thead th {\r\n  background-color: var(--vscode-editor-background) !important;\r\n  position: sticky;\r\n  top: 0;\r\n}\r\n\r\n/* hide data table row selector column */\r\n.data-table form table thead th:first-child,\r\n.data-table form table tr td:first-child {\r\n  display: none;\r\n}\r\n\r\n/* apply spacing to sort symbol in table header */\r\nthead th span {\r\n  margin-left: 0 !important;\r\n  padding-right: 0.4rem;\r\n}\r\n\r\n/* table column header bottom border */\r\nthead th {\r\n  box-shadow: 0 1px 0 var(--vscode-panel-border) !important;\r\n}\r\n\r\n/* table column header text align and cursor */\r\nth {\r\n  text-align: left !important;\r\n  cursor: pointer !important;\r\n}\r\n\r\n/* data summary table styles */\r\n.data-summary table {\r\n  max-height: 360px;\r\n}\r\n\r\n.data-summary table thead th {\r\n  background-color: var(--vscode-editor-background) !important;\r\n  position: sticky;\r\n  top: 0;\r\n  z-index: 100;\r\n}\r\n\r\n/* data summary table column header text align */\r\n.data-summary td {\r\n  text-align: left !important;\r\n}\r\n\r\n/* data summary table transparent svg plots background */\r\n.data-summary td svg, .data-summary-card svg {\r\n  background-color: transparent !important;\r\n}\r\n\r\n/* data summary column type svg icon styles */\r\n.data-summary td svg {\r\n  transform: translateY(0px) !important;\r\n}\r\n\r\n/* flat grid row/cell styles */\r\n/* TODO: see issue #138 related to reducing data row height\r\n\r\n.github-octo-flat-ui {\r\n  line-height: 0.8 !important;\r\n}\r\n\r\n.cell {\r\n  height: 24px !important;\r\n}\r\n*/",""]);const o=a},3645:t=>{t.exports=function(t){var e=[];return e.toString=function(){return this.map((function(e){var n="",i=void 0!==e[5];return e[4]&&(n+="@supports (".concat(e[4],") {")),e[2]&&(n+="@media ".concat(e[2]," {")),i&&(n+="@layer".concat(e[5].length>0?" ".concat(e[5]):""," {")),n+=t(e),i&&(n+="}"),e[2]&&(n+="}"),e[4]&&(n+="}"),n})).join("")},e.i=function(t,n,i,r,s){"string"==typeof t&&(t=[[null,t,void 0]]);var a={};if(i)for(var o=0;o<this.length;o++){var l=this[o][0];null!=l&&(a[l]=!0)}for(var c=0;c<t.length;c++){var u=[].concat(t[c]);i&&a[u[0]]||(void 0!==s&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=s),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),e.push(u))}},e}},8081:t=>{t.exports=function(t){return t[1]}},6932:(t,e,n)=>{const i=n(8501),r=n(8844),s=n(1192);t.exports={XMLParser:r,XMLValidator:i,XMLBuilder:s}},7849:(t,e)=>{const n="[:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Za-z_\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.\\d\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*",i=new RegExp("^"+n+"$");e.isExist=function(t){return void 0!==t},e.isEmptyObject=function(t){return 0===Object.keys(t).length},e.merge=function(t,e,n){if(e){const i=Object.keys(e),r=i.length;for(let s=0;s<r;s++)t[i[s]]="strict"===n?[e[i[s]]]:e[i[s]]}},e.getValue=function(t){return e.isExist(t)?t:""},e.isName=function(t){return!(null==i.exec(t))},e.getAllMatches=function(t,e){const n=[];let i=e.exec(t);for(;i;){const r=[];r.startIndex=e.lastIndex-i[0].length;const s=i.length;for(let t=0;t<s;t++)r.push(i[t]);n.push(r),i=e.exec(t)}return n},e.nameRegexp=n},8501:(t,e,n)=>{const i=n(7849),r={allowBooleanAttributes:!1,unpairedTags:[]};function s(t){return" "===t||"\t"===t||"\n"===t||"\r"===t}function a(t,e){const n=e;for(;e<t.length;e++)if("?"!=t[e]&&" "!=t[e]);else{const i=t.substr(n,e-n);if(e>5&&"xml"===i)return d("InvalidXml","XML declaration allowed only at the start of the document.",f(t,e));if("?"==t[e]&&">"==t[e+1]){e++;break}}return e}function o(t,e){if(t.length>e+5&&"-"===t[e+1]&&"-"===t[e+2]){for(e+=3;e<t.length;e++)if("-"===t[e]&&"-"===t[e+1]&&">"===t[e+2]){e+=2;break}}else if(t.length>e+8&&"D"===t[e+1]&&"O"===t[e+2]&&"C"===t[e+3]&&"T"===t[e+4]&&"Y"===t[e+5]&&"P"===t[e+6]&&"E"===t[e+7]){let n=1;for(e+=8;e<t.length;e++)if("<"===t[e])n++;else if(">"===t[e]&&(n--,0===n))break}else if(t.length>e+9&&"["===t[e+1]&&"C"===t[e+2]&&"D"===t[e+3]&&"A"===t[e+4]&&"T"===t[e+5]&&"A"===t[e+6]&&"["===t[e+7])for(e+=8;e<t.length;e++)if("]"===t[e]&&"]"===t[e+1]&&">"===t[e+2]){e+=2;break}return e}function l(t,e){let n="",i="",r=!1;for(;e<t.length;e++){if('"'===t[e]||"'"===t[e])""===i?i=t[e]:i!==t[e]||(i="");else if(">"===t[e]&&""===i){r=!0;break}n+=t[e]}return""===i&&{value:n,index:e,tagClosed:r}}e.validate=function(t,e){e=Object.assign({},r,e);const n=[];let c=!1,p=!1;"\ufeff"===t[0]&&(t=t.substr(1));for(let r=0;r<t.length;r++)if("<"===t[r]&&"?"===t[r+1]){if(r+=2,r=a(t,r),r.err)return r}else{if("<"!==t[r]){if(s(t[r]))continue;return d("InvalidChar","char '"+t[r]+"' is not expected.",f(t,r))}{let y=r;if(r++,"!"===t[r]){r=o(t,r);continue}{let g=!1;"/"===t[r]&&(g=!0,r++);let b="";for(;r<t.length&&">"!==t[r]&&" "!==t[r]&&"\t"!==t[r]&&"\n"!==t[r]&&"\r"!==t[r];r++)b+=t[r];if(b=b.trim(),"/"===b[b.length-1]&&(b=b.substring(0,b.length-1),r--),m=b,!i.isName(m)){let e;return e=0===b.trim().length?"Invalid space after '<'.":"Tag '"+b+"' is an invalid name.",d("InvalidTag",e,f(t,r))}const v=l(t,r);if(!1===v)return d("InvalidAttr","Attributes for '"+b+"' have open quote.",f(t,r));let _=v.value;if(r=v.index,"/"===_[_.length-1]){const n=r-_.length;_=_.substring(0,_.length-1);const i=u(_,e);if(!0!==i)return d(i.err.code,i.err.msg,f(t,n+i.err.line));c=!0}else if(g){if(!v.tagClosed)return d("InvalidTag","Closing tag '"+b+"' doesn't have proper closing.",f(t,r));if(_.trim().length>0)return d("InvalidTag","Closing tag '"+b+"' can't have attributes or invalid starting.",f(t,y));{const e=n.pop();if(b!==e.tagName){let n=f(t,e.tagStartPos);return d("InvalidTag","Expected closing tag '"+e.tagName+"' (opened in line "+n.line+", col "+n.col+") instead of closing tag '"+b+"'.",f(t,y))}0==n.length&&(p=!0)}}else{const i=u(_,e);if(!0!==i)return d(i.err.code,i.err.msg,f(t,r-_.length+i.err.line));if(!0===p)return d("InvalidXml","Multiple possible root nodes found.",f(t,r));-1!==e.unpairedTags.indexOf(b)||n.push({tagName:b,tagStartPos:y}),c=!0}for(r++;r<t.length;r++)if("<"===t[r]){if("!"===t[r+1]){r++,r=o(t,r);continue}if("?"!==t[r+1])break;if(r=a(t,++r),r.err)return r}else if("&"===t[r]){const e=h(t,r);if(-1==e)return d("InvalidChar","char '&' is not expected.",f(t,r));r=e}else if(!0===p&&!s(t[r]))return d("InvalidXml","Extra text at the end",f(t,r));"<"===t[r]&&r--}}}var m;return c?1==n.length?d("InvalidTag","Unclosed tag '"+n[0].tagName+"'.",f(t,n[0].tagStartPos)):!(n.length>0)||d("InvalidXml","Invalid '"+JSON.stringify(n.map((t=>t.tagName)),null,4).replace(/\r?\n/g,"")+"' found.",{line:1,col:1}):d("InvalidXml","Start tag expected.",1)};const c=new RegExp("(\\s*)([^\\s=]+)(\\s*=)?(\\s*(['\"])(([\\s\\S])*?)\\5)?","g");function u(t,e){const n=i.getAllMatches(t,c),r={};for(let t=0;t<n.length;t++){if(0===n[t][1].length)return d("InvalidAttr","Attribute '"+n[t][2]+"' has no space in starting.",m(n[t]));if(void 0!==n[t][3]&&void 0===n[t][4])return d("InvalidAttr","Attribute '"+n[t][2]+"' is without value.",m(n[t]));if(void 0===n[t][3]&&!e.allowBooleanAttributes)return d("InvalidAttr","boolean attribute '"+n[t][2]+"' is not allowed.",m(n[t]));const i=n[t][2];if(!p(i))return d("InvalidAttr","Attribute '"+i+"' is an invalid name.",m(n[t]));if(r.hasOwnProperty(i))return d("InvalidAttr","Attribute '"+i+"' is repeated.",m(n[t]));r[i]=1}return!0}function h(t,e){if(";"===t[++e])return-1;if("#"===t[e])return function(t,e){let n=/\d/;for("x"===t[e]&&(e++,n=/[\da-fA-F]/);e<t.length;e++){if(";"===t[e])return e;if(!t[e].match(n))break}return-1}(t,++e);let n=0;for(;e<t.length;e++,n++)if(!(t[e].match(/\w/)&&n<20)){if(";"===t[e])break;return-1}return e}function d(t,e,n){return{err:{code:t,msg:e,line:n.line||n,col:n.col}}}function p(t){return i.isName(t)}function f(t,e){const n=t.substring(0,e).split(/\r?\n/);return{line:n.length,col:n[n.length-1].length+1}}function m(t){return t.startIndex+t[1].length}},1192:(t,e,n)=>{const i=n(2592),r={attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,cdataPropName:!1,format:!1,indentBy:"  ",suppressEmptyNode:!1,suppressUnpairedNode:!0,suppressBooleanAttributes:!0,tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},preserveOrder:!1,commentPropName:!1,unpairedTags:[],entities:[{regex:new RegExp("&","g"),val:"&amp;"},{regex:new RegExp(">","g"),val:"&gt;"},{regex:new RegExp("<","g"),val:"&lt;"},{regex:new RegExp("'","g"),val:"&apos;"},{regex:new RegExp('"',"g"),val:"&quot;"}],processEntities:!0,stopNodes:[],transformTagName:!1};function s(t){this.options=Object.assign({},r,t),this.options.ignoreAttributes||this.options.attributesGroupName?this.isAttribute=function(){return!1}:(this.attrPrefixLen=this.options.attributeNamePrefix.length,this.isAttribute=f),this.processTextOrObjNode=o,this.options.format?(this.indentate=p,this.tagEndChar=">\n",this.newLine="\n"):(this.indentate=function(){return""},this.tagEndChar=">",this.newLine=""),this.options.suppressEmptyNode?(this.buildTextNode=d,this.buildObjNode=c):(this.buildTextNode=u,this.buildObjNode=l),this.buildTextValNode=u,this.buildObjectNode=l,this.replaceEntitiesValue=h,this.buildAttrPairStr=a}function a(t,e){return e=this.options.attributeValueProcessor(t,""+e),e=this.replaceEntitiesValue(e),this.options.suppressBooleanAttributes&&"true"===e?" "+t:" "+t+'="'+e+'"'}function o(t,e,n){const i=this.j2x(t,n+1);return void 0!==t[this.options.textNodeName]&&1===Object.keys(t).length?this.buildTextNode(t[this.options.textNodeName],e,i.attrStr,n):this.buildObjNode(i.val,e,i.attrStr,n)}function l(t,e,n,i){let r="</"+e+this.tagEndChar,s="";return"?"===e[0]&&(s="?",r=""),n&&-1===t.indexOf("<")?this.indentate(i)+"<"+e+n+s+">"+t+r:!1!==this.options.commentPropName&&e===this.options.commentPropName&&0===s.length?this.indentate(i)+`\x3c!--${t}--\x3e`+this.newLine:this.indentate(i)+"<"+e+n+s+this.tagEndChar+t+this.indentate(i)+r}function c(t,e,n,i){return""!==t?this.buildObjectNode(t,e,n,i):"?"===e[0]?this.indentate(i)+"<"+e+n+"?"+this.tagEndChar:this.indentate(i)+"<"+e+n+"/"+this.tagEndChar}function u(t,e,n,i){if(!1!==this.options.cdataPropName&&e===this.options.cdataPropName)return this.indentate(i)+`<![CDATA[${t}]]>`+this.newLine;if(!1!==this.options.commentPropName&&e===this.options.commentPropName)return this.indentate(i)+`\x3c!--${t}--\x3e`+this.newLine;{let r=this.options.tagValueProcessor(e,t);return r=this.replaceEntitiesValue(r),""===r&&-1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode?this.indentate(i)+"<"+e+this.tagEndChar:this.indentate(i)+"<"+e+"/"+this.tagEndChar:this.indentate(i)+"<"+e+n+">"+r+"</"+e+this.tagEndChar}}function h(t){if(t&&t.length>0&&this.options.processEntities)for(let e=0;e<this.options.entities.length;e++){const n=this.options.entities[e];t=t.replace(n.regex,n.val)}return t}function d(t,e,n,i){return""===t&&-1!==this.options.unpairedTags.indexOf(e)?this.options.suppressUnpairedNode?this.indentate(i)+"<"+e+this.tagEndChar:this.indentate(i)+"<"+e+"/"+this.tagEndChar:""!==t?this.buildTextValNode(t,e,n,i):"?"===e[0]?this.indentate(i)+"<"+e+n+"?"+this.tagEndChar:this.indentate(i)+"<"+e+n+"/"+this.tagEndChar}function p(t){return this.options.indentBy.repeat(t)}function f(t){return!!t.startsWith(this.options.attributeNamePrefix)&&t.substr(this.attrPrefixLen)}s.prototype.build=function(t){return this.options.preserveOrder?i(t,this.options):(Array.isArray(t)&&this.options.arrayNodeName&&this.options.arrayNodeName.length>1&&(t={[this.options.arrayNodeName]:t}),this.j2x(t,0).val)},s.prototype.j2x=function(t,e){let n="",i="";for(let r in t)if(void 0===t[r]);else if(null===t[r])"?"===r[0]?i+=this.indentate(e)+"<"+r+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+r+"/"+this.tagEndChar;else if(t[r]instanceof Date)i+=this.buildTextNode(t[r],r,"",e);else if("object"!=typeof t[r]){const s=this.isAttribute(r);if(s)n+=this.buildAttrPairStr(s,""+t[r]);else if(r===this.options.textNodeName){let e=this.options.tagValueProcessor(r,""+t[r]);i+=this.replaceEntitiesValue(e)}else i+=this.buildTextNode(t[r],r,"",e)}else if(Array.isArray(t[r])){const n=t[r].length;for(let s=0;s<n;s++){const n=t[r][s];void 0===n||(null===n?"?"===r[0]?i+=this.indentate(e)+"<"+r+"?"+this.tagEndChar:i+=this.indentate(e)+"<"+r+"/"+this.tagEndChar:i+="object"==typeof n?this.processTextOrObjNode(n,r,e):this.buildTextNode(n,r,"",e))}}else if(this.options.attributesGroupName&&r===this.options.attributesGroupName){const e=Object.keys(t[r]),i=e.length;for(let s=0;s<i;s++)n+=this.buildAttrPairStr(e[s],""+t[r][e[s]])}else i+=this.processTextOrObjNode(t[r],r,e);return{attrStr:n,val:i}},t.exports=s},2592:t=>{function e(t,a,o,l){let c="",u="";a.format&&a.indentBy.length>0&&(u="\n"+a.indentBy.repeat(l));for(let h=0;h<t.length;h++){const d=t[h],p=n(d);let f="";if(f=0===o.length?p:`${o}.${p}`,p===a.textNodeName){let t=d[p];r(f,a)||(t=a.tagValueProcessor(p,t),t=s(t,a)),c+=u+t;continue}if(p===a.cdataPropName){c+=u+`<![CDATA[${d[p][0][a.textNodeName]}]]>`;continue}if(p===a.commentPropName){c+=u+`\x3c!--${d[p][0][a.textNodeName]}--\x3e`;continue}if("?"===p[0]){const t=i(d[":@"],a),e="?xml"===p?"":u;let n=d[p][0][a.textNodeName];n=0!==n.length?" "+n:"",c+=e+`<${p}${n}${t}?>`;continue}let m=u+`<${p}${i(d[":@"],a)}`,y=e(d[p],a,f,l+1);-1!==a.unpairedTags.indexOf(p)?a.suppressUnpairedNode?c+=m+">":c+=m+"/>":y&&0!==y.length||!a.suppressEmptyNode?c+=m+`>${y}${u}</${p}>`:c+=m+"/>"}return c}function n(t){const e=Object.keys(t);for(let t=0;t<e.length;t++){const n=e[t];if(":@"!==n)return n}}function i(t,e){let n="";if(t&&!e.ignoreAttributes)for(let i in t){let r=e.attributeValueProcessor(i,t[i]);r=s(r,e),!0===r&&e.suppressBooleanAttributes?n+=` ${i.substr(e.attributeNamePrefix.length)}`:n+=` ${i.substr(e.attributeNamePrefix.length)}="${r}"`}return n}function r(t,e){let n=(t=t.substr(0,t.length-e.textNodeName.length-1)).substr(t.lastIndexOf(".")+1);for(let i in e.stopNodes)if(e.stopNodes[i]===t||e.stopNodes[i]==="*."+n)return!0;return!1}function s(t,e){if(t&&t.length>0&&e.processEntities)for(let n=0;n<e.entities.length;n++){const i=e.entities[n];t=t.replace(i.regex,i.val)}return t}t.exports=function(t,n){return e(t,n,"",0)}},4780:t=>{const e=RegExp("^\\s([a-zA-z0-0]+)[ \t](['\"])([^&]+)\\2");function n(t,n){const i=e.exec(t);i&&(n[i[1]]={regx:RegExp(`&${i[1]};`,"g"),val:i[3]})}t.exports=function(t,e){const i={};if("O"!==t[e+3]||"C"!==t[e+4]||"T"!==t[e+5]||"Y"!==t[e+6]||"P"!==t[e+7]||"E"!==t[e+8])throw new Error("Invalid Tag instead of DOCTYPE");{e+=9;let r=1,s=!1,a=!1,o=!1,l="";for(;e<t.length;e++)if("<"===t[e]){if(s&&"!"===t[e+1]&&"E"===t[e+2]&&"N"===t[e+3]&&"T"===t[e+4]&&"I"===t[e+5]&&"T"===t[e+6]&&"Y"===t[e+7])e+=7,a=!0;else if(s&&"!"===t[e+1]&&"E"===t[e+2]&&"L"===t[e+3]&&"E"===t[e+4]&&"M"===t[e+5]&&"E"===t[e+6]&&"N"===t[e+7]&&"T"===t[e+8])e+=8;else if(s&&"!"===t[e+1]&&"A"===t[e+2]&&"T"===t[e+3]&&"T"===t[e+4]&&"L"===t[e+5]&&"I"===t[e+6]&&"S"===t[e+7]&&"T"===t[e+8])e+=8;else if(s&&"!"===t[e+1]&&"N"===t[e+2]&&"O"===t[e+3]&&"T"===t[e+4]&&"A"===t[e+5]&&"T"===t[e+6]&&"I"===t[e+7]&&"O"===t[e+8]&&"N"===t[e+9])e+=9;else{if("!"!==t[e+1]||"-"!==t[e+2]||"-"!==t[e+3])throw new Error("Invalid DOCTYPE");o=!0}r++,l=""}else if(">"===t[e]){if(o){if("-"!==t[e-1]||"-"!==t[e-2])throw new Error("Invalid XML comment in DOCTYPE");o=!1}else a&&(n(l,i),a=!1);if(r--,0===r)break}else"["===t[e]?s=!0:l+=t[e];if(0!==r)throw new Error("Unclosed DOCTYPE")}return{entities:i,i:e}}},6745:(t,e)=>{const n={preserveOrder:!1,attributeNamePrefix:"@_",attributesGroupName:!1,textNodeName:"#text",ignoreAttributes:!0,removeNSPrefix:!1,allowBooleanAttributes:!1,parseTagValue:!0,parseAttributeValue:!1,trimValues:!0,cdataPropName:!1,numberParseOptions:{hex:!0,leadingZeros:!0},tagValueProcessor:function(t,e){return e},attributeValueProcessor:function(t,e){return e},stopNodes:[],alwaysCreateTextNode:!1,isArray:()=>!1,commentPropName:!1,unpairedTags:[],processEntities:!0,htmlEntities:!1,ignoreDeclaration:!1,ignorePiTags:!1,transformTagName:!1};e.buildOptions=function(t){return Object.assign({},n,t)},e.defaultOptions=n},1078:(t,e,n)=>{const i=n(7849),r=n(6311),s=n(4780),a=n(4153);function o(t){const e=Object.keys(t);for(let n=0;n<e.length;n++){const i=e[n];this.lastEntities[i]={regex:new RegExp("&"+i+";","g"),val:t[i]}}}function l(t,e,n,i,r,s,a){if(void 0!==t&&(this.options.trimValues&&!i&&(t=t.trim()),t.length>0)){a||(t=this.replaceEntitiesValue(t));const i=this.options.tagValueProcessor(e,t,n,r,s);return null==i?t:typeof i!=typeof t||i!==t?i:this.options.trimValues||t.trim()===t?v(t,this.options.parseTagValue,this.options.numberParseOptions):t}}function c(t){if(this.options.removeNSPrefix){const e=t.split(":"),n="/"===t.charAt(0)?"/":"";if("xmlns"===e[0])return"";2===e.length&&(t=n+e[1])}return t}"<((!\\[CDATA\\[([\\s\\S]*?)(]]>))|((NAME:)?(NAME))([^>]*)>|((\\/)(NAME)\\s*>))([^<]*)".replace(/NAME/g,i.nameRegexp);const u=new RegExp("([^\\s=]+)\\s*(=\\s*(['\"])([\\s\\S]*?)\\3)?","gm");function h(t,e){if(!this.options.ignoreAttributes&&"string"==typeof t){const n=i.getAllMatches(t,u),r=n.length,s={};for(let t=0;t<r;t++){const i=this.resolveNameSpace(n[t][1]);let r=n[t][4];const a=this.options.attributeNamePrefix+i;if(i.length)if(void 0!==r){this.options.trimValues&&(r=r.trim()),r=this.replaceEntitiesValue(r);const t=this.options.attributeValueProcessor(i,r,e);s[a]=null==t?r:typeof t!=typeof r||t!==r?t:v(r,this.options.parseAttributeValue,this.options.numberParseOptions)}else this.options.allowBooleanAttributes&&(s[a]=!0)}if(!Object.keys(s).length)return;if(this.options.attributesGroupName){const t={};return t[this.options.attributesGroupName]=s,t}return s}}const d=function(t){t=t.replace(/\r\n?/g,"\n");const e=new r("!xml");let n=e,i="",a="";for(let o=0;o<t.length;o++)if("<"===t[o])if("/"===t[o+1]){const e=y(t,">",o,"Closing Tag is not closed.");let r=t.substring(o+2,e).trim();if(this.options.removeNSPrefix){const t=r.indexOf(":");-1!==t&&(r=r.substr(t+1))}this.options.transformTagName&&(r=this.options.transformTagName(r)),n&&(i=this.saveTextToParentTag(i,n,a)),a=a.substr(0,a.lastIndexOf(".")),n=this.tagsNodeStack.pop(),i="",o=e}else if("?"===t[o+1]){let e=g(t,o,!1,"?>");if(!e)throw new Error("Pi Tag is not closed.");if(i=this.saveTextToParentTag(i,n,a),this.options.ignoreDeclaration&&"?xml"===e.tagName||this.options.ignorePiTags);else{const t=new r(e.tagName);t.add(this.options.textNodeName,""),e.tagName!==e.tagExp&&e.attrExpPresent&&(t[":@"]=this.buildAttributesMap(e.tagExp,a)),n.addChild(t)}o=e.closeIndex+1}else if("!--"===t.substr(o+1,3)){const e=y(t,"--\x3e",o+4,"Comment is not closed.");if(this.options.commentPropName){const r=t.substring(o+4,e-2);i=this.saveTextToParentTag(i,n,a),n.add(this.options.commentPropName,[{[this.options.textNodeName]:r}])}o=e}else if("!D"===t.substr(o+1,2)){const e=s(t,o);this.docTypeEntities=e.entities,o=e.i}else if("!["===t.substr(o+1,2)){const e=y(t,"]]>",o,"CDATA is not closed.")-2,r=t.substring(o+9,e);if(i=this.saveTextToParentTag(i,n,a),this.options.cdataPropName)n.add(this.options.cdataPropName,[{[this.options.textNodeName]:r}]);else{let t=this.parseTextData(r,n.tagname,a,!0,!1,!0);null==t&&(t=""),n.add(this.options.textNodeName,t)}o=e+2}else{let s=g(t,o,this.options.removeNSPrefix),l=s.tagName,c=s.tagExp,u=s.attrExpPresent,h=s.closeIndex;this.options.transformTagName&&(l=this.options.transformTagName(l)),n&&i&&"!xml"!==n.tagname&&(i=this.saveTextToParentTag(i,n,a,!1)),l!==e.tagname&&(a+=a?"."+l:l);const d=n;if(d&&-1!==this.options.unpairedTags.indexOf(d.tagname)&&(n=this.tagsNodeStack.pop()),this.isItStopNode(this.options.stopNodes,a,l)){let e="";if(c.length>0&&c.lastIndexOf("/")===c.length-1)o=s.closeIndex;else if(-1!==this.options.unpairedTags.indexOf(l))o=s.closeIndex;else{const n=this.readStopNodeData(t,l,h+1);if(!n)throw new Error(`Unexpected end of ${l}`);o=n.i,e=n.tagContent}const i=new r(l);l!==c&&u&&(i[":@"]=this.buildAttributesMap(c,a)),e&&(e=this.parseTextData(e,l,a,!0,u,!0,!0)),a=a.substr(0,a.lastIndexOf(".")),i.add(this.options.textNodeName,e),n.addChild(i)}else{if(c.length>0&&c.lastIndexOf("/")===c.length-1){"/"===l[l.length-1]?(l=l.substr(0,l.length-1),c=l):c=c.substr(0,c.length-1),this.options.transformTagName&&(l=this.options.transformTagName(l));const t=new r(l);l!==c&&u&&(t[":@"]=this.buildAttributesMap(c,a)),a=a.substr(0,a.lastIndexOf(".")),n.addChild(t)}else{const t=new r(l);this.tagsNodeStack.push(n),l!==c&&u&&(t[":@"]=this.buildAttributesMap(c,a)),n.addChild(t),n=t}i="",o=h}}else i+=t[o];return e.child},p=function(t){if(this.options.processEntities){for(let e in this.docTypeEntities){const n=this.docTypeEntities[e];t=t.replace(n.regx,n.val)}for(let e in this.lastEntities){const n=this.lastEntities[e];t=t.replace(n.regex,n.val)}if(this.options.htmlEntities)for(let e in this.htmlEntities){const n=this.htmlEntities[e];t=t.replace(n.regex,n.val)}}return t};function f(t,e,n,i){return t&&(void 0===i&&(i=0===Object.keys(e.child).length),void 0!==(t=this.parseTextData(t,e.tagname,n,!1,!!e[":@"]&&0!==Object.keys(e[":@"]).length,i))&&""!==t&&e.add(this.options.textNodeName,t),t=""),t}function m(t,e,n){const i="*."+n;for(const n in t){const r=t[n];if(i===r||e===r)return!0}return!1}function y(t,e,n,i){const r=t.indexOf(e,n);if(-1===r)throw new Error(i);return r+e.length-1}function g(t,e,n,i=">"){const r=function(t,e,n=">"){let i,r="";for(let s=e;s<t.length;s++){let e=t[s];if(i)e===i&&(i="");else if('"'===e||"'"===e)i=e;else if(e===n[0]){if(!n[1])return{data:r,index:s};if(t[s+1]===n[1])return{data:r,index:s}}else"\t"===e&&(e=" ");r+=e}}(t,e+1,i);if(!r)return;let s=r.data;const a=r.index,o=s.search(/\s/);let l=s,c=!0;if(-1!==o&&(l=s.substr(0,o).replace(/\s\s*$/,""),s=s.substr(o+1)),n){const t=l.indexOf(":");-1!==t&&(l=l.substr(t+1),c=l!==r.data.substr(t+1))}return{tagName:l,tagExp:s,closeIndex:a,attrExpPresent:c}}function b(t,e,n){const i=n;let r=1;for(;n<t.length;n++)if("<"===t[n])if("/"===t[n+1]){const s=y(t,">",n,`${e} is not closed`);if(t.substring(n+2,s).trim()===e&&(r--,0===r))return{tagContent:t.substring(i,n),i:s};n=s}else if("?"===t[n+1])n=y(t,"?>",n+1,"StopNode is not closed.");else if("!--"===t.substr(n+1,3))n=y(t,"--\x3e",n+3,"StopNode is not closed.");else if("!["===t.substr(n+1,2))n=y(t,"]]>",n,"StopNode is not closed.")-2;else{const i=g(t,n,">");i&&((i&&i.tagName)===e&&"/"!==i.tagExp[i.tagExp.length-1]&&r++,n=i.closeIndex)}}function v(t,e,n){if(e&&"string"==typeof t){const e=t.trim();return"true"===e||"false"!==e&&a(t,n)}return i.isExist(t)?t:""}t.exports=class{constructor(t){this.options=t,this.currentNode=null,this.tagsNodeStack=[],this.docTypeEntities={},this.lastEntities={amp:{regex:/&(amp|#38|#x26);/g,val:"&"},apos:{regex:/&(apos|#39|#x27);/g,val:"'"},gt:{regex:/&(gt|#62|#x3E);/g,val:">"},lt:{regex:/&(lt|#60|#x3C);/g,val:"<"},quot:{regex:/&(quot|#34|#x22);/g,val:'"'}},this.htmlEntities={space:{regex:/&(nbsp|#160);/g,val:" "},cent:{regex:/&(cent|#162);/g,val:""},pound:{regex:/&(pound|#163);/g,val:""},yen:{regex:/&(yen|#165);/g,val:""},euro:{regex:/&(euro|#8364);/g,val:""},copyright:{regex:/&(copy|#169);/g,val:""},reg:{regex:/&(reg|#174);/g,val:""},inr:{regex:/&(inr|#8377);/g,val:""}},this.addExternalEntities=o,this.parseXml=d,this.parseTextData=l,this.resolveNameSpace=c,this.buildAttributesMap=h,this.isItStopNode=m,this.replaceEntitiesValue=p,this.readStopNodeData=b,this.saveTextToParentTag=f}}},8844:(t,e,n)=>{const{buildOptions:i}=n(6745),r=n(1078),{prettify:s}=n(6997),a=n(8501);t.exports=class{constructor(t){this.externalEntities={},this.options=i(t)}parse(t,e){if("string"==typeof t);else{if(!t.toString)throw new Error("XML data is accepted in String or Bytes[] form.");t=t.toString()}if(e){!0===e&&(e={});const n=a.validate(t,e);if(!0!==n)throw Error(`${n.err.msg}:${n.err.line}:${n.err.col}`)}const n=new r(this.options);n.addExternalEntities(this.externalEntities);const i=n.parseXml(t);return this.options.preserveOrder||void 0===i?i:s(i,this.options)}addEntity(t,e){if(-1!==e.indexOf("&"))throw new Error("Entity value can't have '&'");if(-1!==t.indexOf("&")||-1!==t.indexOf(";"))throw new Error("An entity must be set without '&' and ';'. Eg. use '#xD' for '&#xD;'");this.externalEntities[t]=e}}},6997:(t,e)=>{function n(t,e,a){let o;const l={};for(let c=0;c<t.length;c++){const u=t[c],h=i(u);let d="";if(d=void 0===a?h:a+"."+h,h===e.textNodeName)void 0===o?o=u[h]:o+=""+u[h];else{if(void 0===h)continue;if(u[h]){let t=n(u[h],e,d);const i=s(t,e);u[":@"]?r(t,u[":@"],d,e):1!==Object.keys(t).length||void 0===t[e.textNodeName]||e.alwaysCreateTextNode?0===Object.keys(t).length&&(e.alwaysCreateTextNode?t[e.textNodeName]="":t=""):t=t[e.textNodeName],void 0!==l[h]&&l.hasOwnProperty(h)?(Array.isArray(l[h])||(l[h]=[l[h]]),l[h].push(t)):e.isArray(h,d,i)?l[h]=[t]:l[h]=t}}}return"string"==typeof o?o.length>0&&(l[e.textNodeName]=o):void 0!==o&&(l[e.textNodeName]=o),l}function i(t){const e=Object.keys(t);for(let t=0;t<e.length;t++){const n=e[t];if(":@"!==n)return n}}function r(t,e,n,i){if(e){const r=Object.keys(e),s=r.length;for(let a=0;a<s;a++){const s=r[a];i.isArray(s,n+"."+s,!0,!0)?t[s]=[e[s]]:t[s]=e[s]}}}function s(t,e){const n=Object.keys(t).length;return!!(0===n||1===n&&t[e.textNodeName])}e.prettify=function(t,e){return n(t,e)}},6311:t=>{t.exports=class{constructor(t){this.tagname=t,this.child=[],this[":@"]={}}add(t,e){this.child.push({[t]:e})}addChild(t){t[":@"]&&Object.keys(t[":@"]).length>0?this.child.push({[t.tagname]:t.child,":@":t[":@"]}):this.child.push({[t.tagname]:t.child})}}},4153:t=>{const e=/^[-+]?0x[a-fA-F0-9]+$/,n=/^([\-\+])?(0*)(\.[0-9]+([eE]\-?[0-9]+)?|[0-9]+(\.[0-9]+([eE]\-?[0-9]+)?)?)$/;!Number.parseInt&&window.parseInt&&(Number.parseInt=window.parseInt),!Number.parseFloat&&window.parseFloat&&(Number.parseFloat=window.parseFloat);const i={hex:!0,leadingZeros:!0,decimalPoint:".",eNotation:!0};t.exports=function(t,r={}){if(r=Object.assign({},i,r),!t||"string"!=typeof t)return t;let s=t.trim();if(void 0!==r.skipLike&&r.skipLike.test(s))return t;if(r.hex&&e.test(s))return Number.parseInt(s,16);{const e=n.exec(s);if(e){const n=e[1],i=e[2];let o=(a=e[3])&&-1!==a.indexOf(".")?("."===(a=a.replace(/0+$/,""))?a="0":"."===a[0]?a="0"+a:"."===a[a.length-1]&&(a=a.substr(0,a.length-1)),a):a;const l=e[4]||e[6];if(!r.leadingZeros&&i.length>0&&n&&"."!==s[2])return t;if(!r.leadingZeros&&i.length>0&&!n&&"."!==s[1])return t;{const e=Number(s),a=""+e;return-1!==a.search(/[eE]/)||l?r.eNotation?e:t:-1!==s.indexOf(".")?"0"===a&&""===o||a===o||n&&a==="-"+o?e:t:i?o===a||n+o===a?e:t:s===a||s===n+a?e:t}}return t}var a}},3379:t=>{var e=[];function n(t){for(var n=-1,i=0;i<e.length;i++)if(e[i].identifier===t){n=i;break}return n}function i(t,i){for(var s={},a=[],o=0;o<t.length;o++){var l=t[o],c=i.base?l[0]+i.base:l[0],u=s[c]||0,h="".concat(c," ").concat(u);s[c]=u+1;var d=n(h),p={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==d)e[d].references++,e[d].updater(p);else{var f=r(p,i);i.byIndex=o,e.splice(o,0,{identifier:h,updater:f,references:1})}a.push(h)}return a}function r(t,e){var n=e.domAPI(e);return n.update(t),function(e){if(e){if(e.css===t.css&&e.media===t.media&&e.sourceMap===t.sourceMap&&e.supports===t.supports&&e.layer===t.layer)return;n.update(t=e)}else n.remove()}}t.exports=function(t,r){var s=i(t=t||[],r=r||{});return function(t){t=t||[];for(var a=0;a<s.length;a++){var o=n(s[a]);e[o].references--}for(var l=i(t,r),c=0;c<s.length;c++){var u=n(s[c]);0===e[u].references&&(e[u].updater(),e.splice(u,1))}s=l}}},569:t=>{var e={};t.exports=function(t,n){var i=function(t){if(void 0===e[t]){var n=document.querySelector(t);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(t){n=null}e[t]=n}return e[t]}(t);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},9216:t=>{t.exports=function(t){var e=document.createElement("style");return t.setAttributes(e,t.attributes),t.insert(e,t.options),e}},3565:(t,e,n)=>{t.exports=function(t){var e=n.nc;e&&t.setAttribute("nonce",e)}},7795:t=>{t.exports=function(t){var e=t.insertStyleElement(t);return{update:function(n){!function(t,e,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var s=n.sourceMap;s&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(s))))," */")),e.styleTagTransform(i,t,e.options)}(e,t,n)},remove:function(){!function(t){if(null===t.parentNode)return!1;t.parentNode.removeChild(t)}(e)}}}},4589:t=>{t.exports=function(t,e){if(e.styleSheet)e.styleSheet.cssText=t;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(t))}}},9891:(t,e,n)=>{function i(t){const e=document.createElement("template");return e.innerHTML=t,document.importNode(e.content,!0)}function r(t){const e=document.createElementNS("http://www.w3.org/2000/svg","g");return e.innerHTML=t,e}n.r(e),n.d(e,{bind:()=>me,button:()=>Y,checkbox:()=>yt,color:()=>Ot,date:()=>Pt,datetime:()=>Ft,disposal:()=>fe,email:()=>At,fileOf:()=>qt,form:()=>$t,formatAuto:()=>nt,formatDate:()=>st,formatLocaleAuto:()=>tt,formatLocaleNumber:()=>et,formatNumber:()=>it,formatTrim:()=>rt,input:()=>pe,number:()=>Yt,password:()=>Nt,radio:()=>mt,range:()=>Kt,search:()=>Xt,searchFilter:()=>te,select:()=>se,table:()=>oe,tel:()=>Tt,text:()=>It,textarea:()=>de,toggle:()=>gt,url:()=>Ct});const s=Object.assign(C(i,(t=>{if(null===t.firstChild)return null;if(t.firstChild===t.lastChild)return t.removeChild(t.firstChild);const e=document.createElement("span");return e.appendChild(t),e})),{fragment:C(i,(t=>t))}),a=(Object.assign(C(r,(t=>null===t.firstChild?null:t.firstChild===t.lastChild?t.removeChild(t.firstChild):t)),{fragment:C(r,(t=>{const e=document.createDocumentFragment();for(;t.firstChild;)e.appendChild(t.firstChild);return e}))}),60),o=62,l=47,c=45,u=33,h=61,d=10,p=11,f=12,m=13,y=14,g=17,b=22,v=23,_=26,w="http://www.w3.org/2000/svg",x="http://www.w3.org/1999/xlink",S="http://www.w3.org/XML/1998/namespace",I="http://www.w3.org/2000/xmlns/",A=new Map(["attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map((t=>[t.toLowerCase(),t]))),T=new Map([["xlink:actuate",x],["xlink:arcrole",x],["xlink:href",x],["xlink:role",x],["xlink:show",x],["xlink:title",x],["xlink:type",x],["xml:lang",S],["xml:space",S],["xmlns",I],["xmlns:xlink",I]]);function C(t,e){return function({raw:n}){let i,r,s,w,x=1,S="",I=0;for(let t=0,e=arguments.length;t<e;++t){const e=n[t];if(t>0){const i=arguments[t];switch(x){case _:if(null!=i){const t=`${i}`;if(D(r))S+=t.replace(/[<]/g,N);else{if(new RegExp(`</${r}[\\s>/]`,"i").test(S.slice(-r.length-2)+t))throw new Error("unsafe raw text");S+=t}}break;case 1:null==i||(i instanceof Node||"string"!=typeof i&&i[Symbol.iterator]||/(?:^|>)$/.test(n[t-1])&&/^(?:<|$)/.test(e)?(S+="\x3c!--::"+t+"--\x3e",I|=128):S+=`${i}`.replace(/[<&]/g,N));break;case 9:{let r;if(x=f,/^[\s>]/.test(e)){if(null==i||!1===i){S=S.slice(0,s-n[t-1].length);break}if(!0===i||""==(r=`${i}`)){S+="''";break}if("style"===n[t-1].slice(s,w)&&O(i)||"function"==typeof i){S+="::"+t,I|=1;break}}if(void 0===r&&(r=`${i}`),""===r)throw new Error("unsafe unquoted empty string");S+=r.replace(/^['"]|[\s>&]/g,N);break}case f:S+=`${i}`.replace(/[\s>&]/g,N);break;case p:S+=`${i}`.replace(/['&]/g,N);break;case d:S+=`${i}`.replace(/["&]/g,N);break;case 6:if(O(i)){S+="::"+t+"=''",I|=1;break}throw new Error("invalid binding");case g:break;default:throw new Error("invalid binding")}}for(let t=0,n=e.length;t<n;++t){const n=e.charCodeAt(t);switch(x){case 1:n===a&&(x=2);break;case 2:n===u?x=25:n===l?x=3:k(n)?(i=t,r=void 0,x=4,--t):63===n?(x=5,--t):(x=1,--t);break;case 3:k(n)?(x=4,--t):n===o?x=1:(x=5,--t);break;case 4:E(n)?(x=6,r=B(e,i,t)):n===l?x=y:n===o&&(r=B(e,i,t),x=M(r)?_:1);break;case 6:E(n)||(n===l||n===o?(x=7,--t):n===h?(x=8,s=t+1,w=void 0):(x=8,--t,s=t+1,w=void 0));break;case 8:E(n)||n===l||n===o?(x=7,--t,w=t):n===h&&(x=9,w=t);break;case 7:E(n)||(n===l?x=y:n===h?x=9:n===o?x=M(r)?_:1:(x=8,--t,s=t+1,w=void 0));break;case 9:E(n)||(34===n?x=d:39===n?x=p:n===o?x=M(r)?_:1:(x=f,--t));break;case d:34===n&&(x=m);break;case p:39===n&&(x=m);break;case f:E(n)?x=6:n===o&&(x=M(r)?_:1);break;case m:E(n)?x=6:n===l?x=y:n===o?x=M(r)?_:1:(x=6,--t);break;case y:n===o?x=1:(x=6,--t);break;case 5:n===o&&(x=1);break;case 15:n===c?x=16:n===o?x=1:(x=g,--t);break;case 16:n===c?x=v:n===o?x=1:(x=g,--t);break;case g:n===a?x=18:n===c&&(x=b);break;case 18:n===u?x=19:n!==a&&(x=g,--t);break;case 19:n===c?x=20:(x=g,--t);break;case 20:n===c?x=21:(x=v,--t);break;case 21:x=v,--t;break;case b:n===c?x=v:(x=g,--t);break;case v:n===o?x=1:n===u?x=24:n!==c&&(x=g,--t);break;case 24:n===c?x=b:n===o?x=1:(x=g,--t);break;case 25:n===c&&e.charCodeAt(t+1)===c?(x=15,++t):(x=5,--t);break;case _:n===a&&(x=27);break;case 27:n===l?x=28:(x=_,--t);break;case 28:k(n)?(i=t,x=29,--t):(x=_,--t);break;case 29:E(n)&&r===B(e,i,t)?x=6:n===l&&r===B(e,i,t)?x=y:n===o&&r===B(e,i,t)?x=1:k(n)||(x=_,--t);break;default:x=void 0}}S+=e}const A=t(S),T=document.createTreeWalker(A,I,null,!1),C=[];for(;T.nextNode();){const t=T.currentNode;switch(t.nodeType){case 1:{const e=t.attributes;for(let n=0,i=e.length;n<i;++n){const{name:r,value:s}=e[n];if(/^::/.test(r)){const e=arguments[+r.slice(2)];P(t,r),--n,--i;for(const n in e){const i=e[n];null==i||!1===i||("function"==typeof i?t[n]=i:"style"===n&&O(i)?F(t[n],i):L(t,n,!0===i?"":i))}}else if(/^::/.test(s)){const e=arguments[+s.slice(2)];P(t,r),--n,--i,"function"==typeof e?t[r]=e:F(t[r],e)}}break}case 8:if(/^::/.test(t.data)){const e=t.parentNode,n=arguments[+t.data.slice(2)];if(n instanceof Node)e.insertBefore(n,t);else if("string"!=typeof n&&n[Symbol.iterator])if(n instanceof NodeList||n instanceof HTMLCollection)for(let i=n.length-1,r=t;i>=0;--i)r=e.insertBefore(n[i],r);else for(const i of n)null!=i&&e.insertBefore(i instanceof Node?i:document.createTextNode(i),t);else e.insertBefore(document.createTextNode(n),t);C.push(t)}}}for(const t of C)t.parentNode.removeChild(t);return e(A)}}function N(t){return`&#${t.charCodeAt(0).toString()};`}function k(t){return 65<=t&&t<=90||97<=t&&t<=122}function E(t){return 9===t||10===t||12===t||32===t||13===t}function O(t){return t&&t.toString===Object.prototype.toString}function M(t){return"script"===t||"style"===t||D(t)}function D(t){return"textarea"===t||"title"===t}function B(t,e,n){return t.slice(e,n).toLowerCase()}function L(t,e,n){t.namespaceURI===w&&(e=e.toLowerCase(),e=A.get(e)||e,T.has(e))?t.setAttributeNS(T.get(e),e,n):t.setAttribute(e,n)}function P(t,e){t.namespaceURI===w&&(e=e.toLowerCase(),e=A.get(e)||e,T.has(e))?t.removeAttributeNS(T.get(e),e):t.removeAttribute(e)}function F(t,e){for(const n in e){const i=e[n];n.startsWith("--")?t.setProperty(n,i):t[n]=i}}function V(t){return null==t?null:"number"==typeof t?`${t}px`:`${t}`}function U(t){return{"--input-width":V(t)}}const R={bubbles:!0};function $(t){t.preventDefault()}function j({currentTarget:t}){(t.form||t).dispatchEvent(new Event("input",R))}function z(t){return t.checkValidity()}function W(t){return t}let H=0;function q(){return"__ns__-"+ ++H}function G(t,e){if(t)return t=s`<label>${t}`,void 0!==e&&(t.htmlFor=e.id=q()),t}function Y(t="",{label:e="",value:n,reduce:i,disabled:r,required:a=!1,width:o}={}){const l="string"==typeof t||t instanceof Node;l?(a||void 0!==n||(n=0),void 0===i&&(i=(t=0)=>t+1),r=new Set(r?[t]:[]),t=[[t,i]]):(a||void 0!==n||(n=null),r=new Set(!0===r?Array.from(t,(([t])=>t)):r||void 0));const c=s`<form class=__ns__ onsubmit=${$}>`,u={width:V(o)},h=Array.from(t,(([t,e=W])=>{if("function"!=typeof e)throw new TypeError("reduce is not a function");return s`<button disabled=${r.has(t)} style=${u} onclick=${t=>{c.value=e(c.value),j(t)}}>${t}`}));return(e=G(e,l?h[0]:void 0))&&c.append(e),c.append(...h),c.value=n,c}function K(t){return Array.isArray(t)?t:Array.from(t)}function J(t){return!!t&&"function"==typeof t[Symbol.iterator]}function Q(t){return J(t.columns)?t.columns:t.schema&&J(t.schema.fields)?Array.from(t.schema.fields,(t=>t.name)):"function"==typeof t.columnNames?t.columnNames():void 0}function Z(t,e){return`${t}`.padStart(e,"0")}function X(t){return null==t?"":`${t}`}const tt=at((t=>{const e=et(t);return t=>null==t?"":"number"==typeof t?e(t):t instanceof Date?st(t):`${t}`})),et=at((t=>e=>0===e?"0":e.toLocaleString(t))),nt=tt(),it=et();function rt(t){const e=t.toString(),n=e.length;let i,r=-1;t:for(let t=1;t<n;++t)switch(e[t]){case".":r=i=t;break;case"0":0===r&&(r=t),i=t;break;default:if(!+e[t])break t;r>0&&(r=0)}return r>0?e.slice(0,r)+e.slice(i+1):e}function st(t){return function(t,e){if(t instanceof Date||(t=new Date(+t)),isNaN(t))return"function"==typeof e?e(t):e;const n=t.getUTCHours(),i=t.getUTCMinutes(),r=t.getUTCSeconds(),s=t.getUTCMilliseconds();return`${a=t.getUTCFullYear(),a<0?`-${Z(-a,6)}`:a>9999?`+${Z(a,6)}`:Z(a,4)}-${Z(t.getUTCMonth()+1,2)}-${Z(t.getUTCDate(),2)}${n||i||r||s?`T${Z(n,2)}:${Z(i,2)}${r||s?`:${Z(r,2)}${s?`.${Z(s,3)}`:""}`:""}Z`:""}`;var a}(t,"Invalid Date")}function at(t){let e,n=at;return(i="en")=>i===n?e:e=t(n=i)}function ot(t,e){return ct(e)-ct(t)||(t<e?-1:t>e?1:t>=e?0:NaN)}function lt(t,e){return ct(e)-ct(t)||(e<t?-1:e>t?1:e>=t?0:NaN)}function ct(t){return null!=t&&!Number.isNaN(t)}const ut=([t])=>t,ht=([,t])=>t;function dt({multiple:t,render:e,selectedIndexes:n,select:i}){return function(r,{locale:s,keyof:a=(r instanceof Map?ut:W),valueof:o=(r instanceof Map?ht:W),format:l=(r instanceof Map?ut:tt(s)),multiple:c,key:u,value:h,disabled:d=!1,sort:p,unique:f,...m}={}){if("function"!=typeof a)throw new TypeError("keyof is not a function");if("function"!=typeof o)throw new TypeError("valueof is not a function");if("function"!=typeof l)throw new TypeError("format is not a function");void 0!==t&&(c=t),p=function(t){if(void 0!==t&&!1!==t){if(!0===t||"ascending"===t)return ot;if("descending"===t)return lt;if("function"==typeof t)return t;throw new TypeError("sort is not a function")}}(p);let y=+c;void 0===h&&(h=void 0!==u&&r instanceof Map?y>0?Array.from(u,(t=>r.get(t))):r.get(u):void 0),f=!!f;let g=(r=K(r)).map(((t,e)=>[a(t,e,r),e]));void 0!==p&&g.sort((([t],[e])=>p(t,e))),f&&(g=[...new Map(g.map((t=>[pt(t[0]),t]))).values()]);const b=g.map(ht);!0===c?y=Math.max(1,Math.min(10,b.length)):y>0?c=!0:(c=!1,y=void 0);const[v,_]=e(r,b,function(t,e,n,i,r){const s=new Set(void 0===n?[]:i?K(n):[n]);if(!s.size)return()=>!1;const a=new Set;for(const n of e)s.has(r(t[n],n,t))&&a.add(n);return t=>a.has(t)}(r,b,h,c,o),function(t,e,n,i){if("boolean"==typeof n)return n;const r=new Set(K(n)),s=new Set;for(const n of e)r.has(i(t[n],n,t))&&s.add(n);return t=>s.has(t)}(r,b,d,o),{...m,format:l,multiple:c,size:y});function w(t){if(t&&t.isTrusted&&(v.onchange=null),c)h=n(_).map((t=>o(r[t],t,r)));else{const t=function(t){return t.value?+t.value:-1}(_);h=t<0?null:o(r[t],t,r)}}return v.onchange=j,v.oninput=w,v.onsubmit=$,w(),Object.defineProperty(v,"value",{get:()=>h,set(t){if(c){const e=new Set(t);for(const t of _){const n=+t.value;i(t,e.has(o(r[n],n,r)))}}else _.value=b.find((e=>t===o(r[e],e,r)));w()}})}}function pt(t){return null!==t&&"object"==typeof t?t.valueOf():t}function ft(t,e){return dt({multiple:t,render(n,i,r,a,{format:o,label:l}){const c=s`<form class="__ns__ __ns__-checkbox">
      ${G(l)}<div>
        ${i.map((t=>s`<label><input type=${e} disabled=${"function"==typeof a?a(t):a} name=input value=${t} checked=${r(t)}>${o(n[t],t,n)}`))}
      </div>
    </form>`;return[c,bt(c.elements.input,t)]},selectedIndexes:t=>Array.from(t).filter((t=>t.checked)).map((t=>+t.value)),select(t,e){t.checked=e}})}const mt=ft(!1,"radio"),yt=ft(!0,"checkbox");function gt({label:t,value:e,values:n,disabled:i}={}){const r=s`<input class=__ns__-input type=checkbox name=input disabled=${i}>`,a=s`<form class="__ns__ __ns__-toggle">${G(t,r)}${r}`;return Object.defineProperty(a,"value",{get:()=>void 0===n?r.checked:n[r.checked?0:1],set(t){r.checked=void 0===n?!!t:t===n[0]}}),void 0!==e&&(a.value=e),a}function bt(t,e){return void 0===t?new vt(e?[]:null):void 0===t.length?new(e?wt:_t)(t):t}class vt{constructor(t){this._value=t}get value(){return this._value}set value(t){}*[Symbol.iterator](){}}class _t{constructor(t){this._input=t}get value(){const{_input:t}=this;return t.checked?t.value:""}set value(t){const{_input:e}=this;e.checked||(e.checked=X(t)===e.value)}*[Symbol.iterator](){yield this._input}}class wt{constructor(t){this._input=t,this._value=t.checked?[t.value]:[]}get value(){return this._value}set value(t){const{_input:e}=this;e.checked||(e.checked=X(t)===e.value,this._value=e.checked?[e.value]:[])}*[Symbol.iterator](){yield this._input}}function xt(t){if(void 0===t)return[null,null];const e=q();return[s`<datalist id=${e}>${Array.from(t,(t=>s`<option value=${X(t)}>`))}`,e]}function St(t,e,n,{validate:i=z,submit:r}={},{get:a=(t=>t.value),set:o=((t,e)=>t.value=X(e)),same:l=((t,e)=>t.value===e),after:c=(t=>e.after(t))}={}){const u=(r=!0===r?"Submit":r||null)?s`<button type=submit disabled>${r}`:null;function h(){if(i(e))return n=a(e),!0}return r&&c(u),o(e,n),n=i(e)?a(e):void 0,t.onsubmit=function(t){$(t),r&&(h()?(u.disabled=!0,j(t)):e.reportValidity())},e.oninput=function(t){r?(u.disabled=l(e,n),t.stopPropagation()):h()||t.stopPropagation()},Object.defineProperty(t,"value",{get:()=>n,set(t){o(e,t),h()}})}function It({label:t,value:e="",type:n="text",placeholder:i,pattern:r,spellcheck:a,autocomplete:o,autocapitalize:l,min:c,max:u,minlength:h,maxlength:d,required:p=h>0,datalist:f,readonly:m,disabled:y,width:g,...b}={}){const[v,_]=xt(f),w=s`<input
    type=${n}
    name=text
    list=${_}
    readonly=${m}
    disabled=${y}
    required=${p}
    min=${c}
    max=${u}
    minlength=${h}
    maxlength=${d}
    pattern=${r}
    spellcheck=${kt(a)}
    autocomplete=${Et(o)}
    autocapitalize=${Et(l)}
    placeholder=${i}
  >`;return St(s`<form class=__ns__ style=${U(g)}>
    ${G(t,w)}<div class=__ns__-input>
      ${w}
    </div>${v}
  </form>`,w,e,b)}function At(t){return It({...t,type:"email"})}function Tt(t){return It({...t,type:"tel"})}function Ct(t){return It({...t,type:"url"})}function Nt(t){return It({...t,type:"password"})}function kt(t){return null==t?null:`${t}`}function Et(t){return null==t?null:`${!1===t?"off":!0===t?"on":t}`}function Ot({label:t,value:e,required:n,datalist:i,readonly:r,disabled:a,width:o,...l}={}){const[c,u]=xt(i),h=q(),d=s`<input
    type=color
    name=text
    value=${e}
    id=${h}
    list=${u}
    readonly=${r}
    disabled=${a}
    required=${n}
  >`,p=s`<output
    for=${h}
  >`;return p.value=d.value,d.addEventListener("input",(()=>p.value=d.value)),St(s`<form class=__ns__ style=${U(o)}>
    ${G(t,d)}<div class=__ns__-input>
      <div class=__ns__-input>${d}${p}</div>
    </div>${c}
  </form>`,d,e,l,{after:t=>d.parentNode.after(t)})}const Mt=/^(?:[-+]\d{2})?\d{4}(?:-\d{2}(?:-\d{2})?)?(?:T\d{2}:\d{2}(?::\d{2}(?:\.\d{3})?)?(?:Z|[-+]\d{2}:?\d{2})?)?$/,Dt={type:"date",get:t=>t.valueAsDate,set:(t,e)=>t.value=Ut(e),same:(t,e)=>+t.valueAsDate==+e,format:Ut},Bt={type:"datetime-local",get:t=>t.value?new Date(t.value):null,set:(t,e)=>t.value=Rt(e),same:(t,e)=>+new Date(t.value)==+e,format:Rt};function Lt({label:t,min:e,max:n,required:i,readonly:r,disabled:a,width:o,value:l,...c}={},{type:u,format:h,...d}){const p=s`<input type=${u} name=date readonly=${r} disabled=${a} required=${i} min=${h(e)} max=${h(n)}>`;return St(s`<form class=__ns__ style=${U(o)}>
    ${G(t,p)}<div class=__ns__-input>
      ${p}
    </div>
  </form>`,p,Vt(l),c,d)}function Pt(t){return Lt(t,Dt)}function Ft(t){return Lt(t,Bt)}function Vt(t){return t instanceof Date&&!isNaN(t)?t:"string"==typeof t?(e=t,n=null,Mt.test(e+="")?new Date(e):n):null==t||isNaN(t=+t)?null:new Date(+t);var e,n}function Ut(t){return(t=Vt(t))?t.toISOString().slice(0,10):t}function Rt(t){return(t=Vt(t))?t.toISOString().slice(0,16):t}function $t(t,e){return(Array.isArray(t)?zt:Ht)(t,e)}function jt(t){return s`<div>${t}`}function zt(t,{template:e=jt}={}){let n=(t=[...t]).map((({value:t})=>t));return Object.defineProperty(e(t),"value",{get(){for(let e=0,i=t.length;e<i;++e){const i=t[e].value;Object.is(i,n[e])||(n=[...n],n[e]=i)}return n},set(e=[]){for(let n=0,i=t.length;n<i;++n)t[n].value=e[n]}})}function Wt(t){return s`<div>${Object.values(t)}`}function Ht(t,{template:e=Wt}={}){t={...t};let n=Object.fromEntries(Object.entries(t).map((([t,{value:e}])=>[t,e])));return Object.defineProperty(e(t),"value",{get(){for(const e in n){const i=t[e].value;Object.is(i,n[e])||(n={...n},n[e]=i)}return n},set(e={}){for(const n in t)t[n].value=e[n]}})}function qt(t){class e extends t{constructor(t){super(t.name),Object.defineProperty(this,"_",{value:t}),Object.defineProperty(this,"_url",{writable:!0})}async url(){return this._url||(this._url=URL.createObjectURL(this._))}async blob(){return this._}async stream(){return this._.stream()}}return function({label:t,required:n,accept:i,capture:r,multiple:a,disabled:o,width:l,value:c,submit:u,...h}={}){const d=s`<input
      type=file
      name=file
      disabled=${o}
      required=${n}
      accept=${i}
      capture=${r}
      multiple=${a}
    >`;return St(s`<form class=__ns__ style=${U(l)}>
      ${G(t,d)}<div class=__ns__-input>
        ${d}
      </div>
    </form>`,d,void 0,h,{get:t=>a?Array.from(t.files,(t=>new e(t))):t.files.length?new e(t.files[0]):null,set:()=>{},same:()=>!1})}}const Gt=1e-6;function Yt(t,e){return arguments.length<2&&(e=t,t=void 0),void 0===t&&(t=[]),Jt({extent:t},e)}function Kt(t=[0,1],e){return Jt({extent:t,range:!0},e)}function Jt({extent:[t,e],range:n},{format:i=rt,transform:r,invert:a,label:o="",value:l,step:c,disabled:u,placeholder:h,validate:d=z,width:p}={}){let f;if("function"!=typeof i)throw new TypeError("format is not a function");(null==t||isNaN(t=+t))&&(t=-1/0),(null==e||isNaN(e=+e))&&(e=1/0),t>e&&([t,e]=[e,t],void 0===r&&(r=Qt)),void 0!==c&&(c=+c);const m=s`<input type=number min=${isFinite(t)?t:null} max=${isFinite(e)?e:null} step=${null==c?"any":c} name=number required placeholder=${h} oninput=${function(t){const e=v(m.valueAsNumber);isFinite(e)&&(n&&(n.valueAsNumber=r(e)),d(m))?f=e:t&&t.stopPropagation()}} disabled=${u}>`;let y;if(n){if(void 0===r&&(r=W),"function"!=typeof r)throw new TypeError("transform is not a function");if(void 0===a&&(a=void 0===r.invert?(g=r)===W||g===Qt?g:g===Math.sqrt?Zt:g===Math.log?Math.exp:g===Math.exp?Math.log:t=>function(t,e,n){let i,r,s,a=100;n=void 0===n?0:+n,e=+e;do{r=t(n),s=t(n+Gt),r===s&&(s=r+Gt),n-=i=-1e-6*(r-e)/(r-s)}while(a-- >0&&Math.abs(i)>Gt);return a<0?NaN:n}(g,t,t):r.invert),"function"!=typeof a)throw new TypeError("invert is not a function");let o=+r(t),l=+r(e);o>l&&([o,l]=[l,o]),n=s`<input type=range min=${isFinite(o)?o:null} max=${isFinite(l)?l:null} step=${void 0===c||r!==W&&r!==Qt?"any":c} name=range oninput=${function(r){const s=v(a(n.valueAsNumber));if(isFinite(s)&&(m.valueAsNumber=Math.max(t,Math.min(e,s)),d(m)))return f=m.valueAsNumber,void(m.value=i(f));r&&r.stopPropagation()}} disabled=${u}>`,y=r===W?n:s`<input type=range min=${t} max=${e} step=${void 0===c?"any":c} name=range disabled=${u}>`}else n=null,r=a=W;var g;const b=s`<form class=__ns__ onsubmit=${$} style=${U(p)}>
    ${G(o,m)}<div class=__ns__-input>
      ${m}${n}
    </div>
  </form>`;function v(n){return y?(n=Math.max(t,Math.min(e,n)),isFinite(n)?(y.valueAsNumber=n,y.valueAsNumber):n):+n}return Object.defineProperty(b,"value",{get:()=>f,set(t){t=v(t),isFinite(t)&&(m.valueAsNumber=t,n&&(n.valueAsNumber=r(t)),d(m)&&(f=t,m.value=i(f)))}}),void 0===l&&y&&(l=y.valueAsNumber),void 0!==l&&(b.value=l),b}function Qt(t){return-t}function Zt(t){return t*t}function Xt(t,{locale:e,format:n=re(e),label:i,query:r="",placeholder:a="Search",columns:o=Q(t),spellcheck:l,autocomplete:c,autocapitalize:u,filter:h=(void 0===o?te:ee(o)),datalist:d,disabled:p,required:f=!0,width:m}={}){let y=[];t=K(t),f=!!f;const[g,b]=xt(d),v=s`<input
    name=input
    type=search
    list=${b}
    disabled=${p}
    spellcheck=${kt(l)}
    autocomplete=${Et(c)}
    autocapitalize=${Et(u)}
    placeholder=${a}
    value=${r}
    oninput=${x}
  >`,_=s`<output name=output>`,w=s`<form class=__ns__ onsubmit=${$} style=${U(m)}>
    ${G(i,v)}<div class=__ns__-input>
      ${v}${_}
    </div>${g}
  </form>`;function x(){y=v.value||f?t.filter(h(v.value)):[],void 0!==o&&(y.columns=o),_.value=n(y.length)}return x(),Object.defineProperties(w,{value:{get:()=>y},query:{get:()=>r,set(t){r=v.value=X(t),x()}}})}function te(t){const e=`${t}`.split(/\s+/g).filter((t=>t)).map(ie);return t=>{if(null==t)return!1;if("object"==typeof t)t:for(const n of e){for(const e of ne(t))if(n.test(e))continue t;return!1}else for(const n of e)if(!n.test(t))return!1;return!0}}function ee(t){return e=>{const n=`${e}`.split(/\s+/g).filter((t=>t)).map(ie);return e=>{t:for(const i of n){for(const n of t)if(i.test(e[n]))continue t;return!1}return!0}}}function*ne(t){for(const e in t)yield t[e]}function ie(t){return new RegExp(`\\b${e=t,e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}`,"i");var e}const re=at((t=>{const e=et(t);return t=>`${e(t)} result${1===t?"":"s"}`})),se=dt({render(t,e,n,i,{format:r,multiple:a,size:o,label:l,width:c}){const u=s`<select class=__ns__-input disabled=${!0===i} multiple=${a} size=${o} name=input>
      ${e.map((e=>s`<option value=${e} disabled=${"function"==typeof i&&i(e)} selected=${n(e)}>${X(r(t[e],e,t))}`))}
    </select>`;return[s`<form class=__ns__ style=${U(c)}>${G(l,u)}${u}`,u]},selectedIndexes:t=>Array.from(t.selectedOptions,(t=>+t.value)),select(t,e){t.selected=e}}),ae=22;function oe(t,e={}){const{rows:n=11.5,height:i,maxHeight:r=(void 0===i?(n+1)*ae-1:void 0),width:a={},maxWidth:o}=e,l=q(),c=s`<form class="__ns__ __ns__-table" id=${l} style=${{height:V(i),maxHeight:V(r),width:"string"==typeof a||"number"==typeof a?V(a):void 0,maxWidth:V(o)}}>`;return t&&"function"==typeof t.then?(Object.defineProperty(c,"value",{configurable:!0,set(){throw new Error("cannot set value while data is unresolved")}}),Promise.resolve(t).then((t=>le({root:c,id:l},t,e)))):le({root:c,id:l},t,e),c}function le({root:t,id:e},n,{columns:i=Q(n),value:r,required:a=!0,sort:o,reverse:l=!1,format:c,locale:u,align:h,header:d,rows:p=11.5,width:f={},multiple:m=!0,layout:y}={}){i=void 0===i?function(t){const e=new Set;for(const n of t)for(const t in n)e.add(t);return Array.from(e)}(n):K(i),void 0===y&&(y=i.length>=12?"auto":"fixed"),c=function(t={},e,n,i){const r=Object.create(null);for(const s of n)if(s in t)r[s]=t[s];else switch(he(e,s)){case"number":r[s]=et(i);break;case"date":r[s]=st;break;default:r[s]=tt(i)}return r}(c,n,i,u),h=function(t={},e,n){const i=Object.create(null);for(const r of n)r in t?i[r]=t[r]:"number"===he(e,r)&&(i[r]="right");return i}(h,n,i);let g=[],b=[],v=n[Symbol.iterator](),_=0,w=function(t){return"number"==typeof t.length?t.length:"number"==typeof t.size?t.size:"function"==typeof t.numRows?t.numRows():void 0}(n),x=I(2*p);function S(){_>=0&&(_=v=void 0,b=Uint32Array.from(g=K(n),((t,e)=>e)),w=b.length)}function I(t){if(t=Math.floor(t),void 0!==w)return Math.min(w,t);if(t<=_)return t;for(;t>_;){const{done:t,value:e}=v.next();if(t)return w=_;b.push(_++),g.push(e)}return _}let A=null,T=!1,C=new Set,N=null,k=null;const E=s`<tbody>`,O=s`<tr><td><input type=${m?"checkbox":"radio"} name=${m?null:"radio"}></td>${i.map((()=>s`<td>`))}`,M=s`<tr><th><input type=checkbox onclick=${function(t){if(S(),this.checked){C=new Set(b);for(const t of E.childNodes)ce(t).checked=!0}else{for(let t of C)L(t);N=k=null,t.detail&&t.currentTarget.blur()}$()}} disabled=${!m}></th>${i.map((t=>s`<th title=${t} onclick=${e=>R(e,t)}><span></span>${d&&t in d?d[t]:t}</th>`))}</tr>`;function D(t,e){if(_===t){for(;t<e;++t)B(v.next().value,t);_=e}else for(let n;t<e;++t)n=b[t],B(g[n],n)}function B(t,e){const r=O.cloneNode(!0),s=ce(r);if(s.onclick=U,s.checked=C.has(e),s.value=e,null!=t)for(let s=0;s<i.length;++s){let a=i[s],o=t[a];ct(o)&&(o=c[a](o,e,n),o instanceof Node||(o=document.createTextNode(o)),r.childNodes[s+1].appendChild(o))}E.append(r)}function L(t){S();let e=b.indexOf(t);e<E.childNodes.length&&(ce(E.childNodes[e]).checked=!1),C.delete(t)}function P(t){S();let e=b.indexOf(t);e<E.childNodes.length&&(ce(E.childNodes[e]).checked=!0),C.add(t)}function*F(t,e){if(S(),(t=b.indexOf(t))<(e=b.indexOf(e)))for(;t<=e;)yield b[t++];else for(;e<=t;)yield b[e++]}function U(t){S();let e=+this.value;if(m)if(t.shiftKey){if(null===N)N=C.size?function(t){return t[Symbol.iterator]().next().value}(C):b[0];else for(let t of F(N,k))L(t);k=e;for(let t of F(N,k))P(t)}else N=k=e,C.has(e)?(L(e),N=k=null,t.detail&&t.currentTarget.blur()):P(e);else{for(let t of C)L(t);P(e)}$()}function R(e,n){S();const i=e.currentTarget;let r;if(A===i&&e.metaKey)ue(A).textContent="",A=null,T=!1,r=ot;else{A===i?T=!T:(A&&(ue(A).textContent=""),A=i,T=e.altKey);const t=T?lt:ot;r=(e,i)=>t(g[e][n],g[i][n]),ue(i).textContent=T?"":""}for(b.sort(r),C=new Set(Array.from(C).sort(r)),t.scrollTo(t.scrollLeft,0);E.firstChild;)E.firstChild.remove();D(0,x=I(2*p)),N=k=null,$()}function $(){const t=ce(M);t.disabled=!m&&!C.size,t.indeterminate=m&&C.size&&C.size!==w,t.checked=C.size,r=void 0}if(t.appendChild(s.fragment`<table style=${{tableLayout:y}}>
  <thead>${I(1)||i.length?M:null}</thead>
  ${E}
</table>
<style>${i.map(((t,n)=>{const i=[];if(null!=h[t]&&i.push(`text-align:${h[t]}`),null!=f[t]&&i.push(`width:${V(f[t])}`),i.length)return`#${e} tr>:nth-child(${n+2}){${i.join(";")}}`})).filter(W).join("\n")}</style>`),t.onscroll=()=>{t.scrollHeight-t.scrollTop<p*ae*1.5&&x<I(x+1)&&D(x,x=I(x+p))},void 0===o&&l&&(S(),b.reverse()),void 0!==r){if(S(),m){const t=new Set(r);C=new Set(b.filter((e=>t.has(g[e]))))}else{const t=g.indexOf(r);C=t<0?new Set:new Set([t])}$()}if(I(1)?D(0,x):E.append(s`<tr>${i.length?s`<td>`:null}<td rowspan=${i.length} style="padding-left: var(--length3); font-style: italic;">No results.</td></tr>`),void 0!==o){let t=i.indexOf(o);t>=0&&(l&&(A=M.childNodes[t+1]),R({currentTarget:M.childNodes[t+1]},i[t]))}return Object.defineProperty(t,"value",{get(){if(void 0===r)if(S(),m)(r=Array.from(a&&0===C.size?b:C,(t=>g[t]))).columns=i;else if(C.size){const[t]=C;r=g[t]}else r=null;return r},set(t){if(S(),m){const e=new Set(t),n=new Set(b.filter((t=>e.has(g[t]))));for(const t of C)n.has(t)||L(t);for(const t of n)C.has(t)||P(t)}else{const e=g.indexOf(t);C=e<0?new Set:new Set([e])}r=void 0}})}function ce(t){return t.firstChild.firstChild}function ue(t){return t.firstChild}function he(t,e){for(const n of t){if(null==n)continue;const t=n[e];if(null!=t)return"number"==typeof t?"number":t instanceof Date?"date":void 0}}function de({value:t="",label:e,placeholder:n,spellcheck:i,autocomplete:r,autocapitalize:a,rows:o=3,minlength:l,maxlength:c,required:u=l>0,readonly:h,disabled:d,monospace:p=!1,resize:f=o<12,width:m,...y}={}){const g=s`<textarea
    name=text
    readonly=${h}
    disabled=${d}
    required=${u}
    rows=${o}
    minlength=${l}
    maxlength=${c}
    spellcheck=${kt(i)}
    autocomplete=${Et(r)}
    autocapitalize=${Et(a)}
    placeholder=${n}
    onkeydown=${function(t){if(y.submit&&"Enter"===t.key&&(t.metaKey||t.ctrlKey))return b.onsubmit(t)}}
    style=${{width:m,fontFamily:p?"var(--monospace, monospace)":null,resize:f?null:"none"}}
  >`,b=s`<form class="__ns__ __ns__-textarea" style=${U(m)}>
    ${G(e,g)}<div>
      ${g}
    </div>
  </form>`;return St(b,g,t,y)}function pe(t){const e=new EventTarget;return e.value=t,e}function fe(t){return new Promise((e=>{requestAnimationFrame((()=>{const n=t.closest(".observablehq");if(!n)return e();const i=new MutationObserver((()=>{n.contains(t)||(i.disconnect(),e())}));i.observe(n,{childList:!0})}))}))}function me(t,e,n=fe(t)){const i=ge(e),r=()=>ye(t,e);return r(),t.addEventListener(ge(t),(()=>(ye(e,t),e.dispatchEvent(new Event(i,R))))),e.addEventListener(i,r),n.then((()=>e.removeEventListener(i,r))),t}function ye(t,e){const n=function(t){switch(t.type){case"range":case"number":return t.valueAsNumber;case"date":return t.valueAsDate;case"checkbox":return t.checked;case"file":return t.multiple?t.files:t.files[0];default:return t.value}}(e);switch(t.type){case"range":case"number":t.valueAsNumber=n;break;case"date":t.valueAsDate=n;break;case"checkbox":t.checked=n;break;case"file":t.multiple?t.files=n:t.files=[n];break;default:t.value=n}}function ge(t){switch(t.type){case"button":case"submit":return"click";case"file":return"change";default:return"input"}}}},e={};function n(i){var r=e[i];if(void 0!==r)return r.exports;var s=e[i]={id:i,exports:{}};return t[i](s,s.exports,n),s.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var i in e)n.o(e,i)&&!n.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nc=void 0;var i={};(()=>{let t;n.d(i,{Q:()=>O}),t={install:()=>{},wrap:(t,e)=>e(),uninstall:()=>{}};const e=t;var r={},s={};function a(t){return new Function("d","return {"+t.map((function(t,e){return JSON.stringify(t)+": d["+e+'] || ""'})).join(",")+"}")}function o(t){var e=Object.create(null),n=[];return t.forEach((function(t){for(var i in t)i in e||n.push(e[i]=i)})),n}function l(t,e){var n=t+"",i=n.length;return i<e?new Array(e-i+1).join(0)+n:n}var c=function(t){var e=new RegExp('[",\n\r]'),n=t.charCodeAt(0);function i(t,e){var i,a=[],o=t.length,l=0,c=0,u=o<=0,h=!1;function d(){if(u)return s;if(h)return h=!1,r;var e,i,a=l;if(34===t.charCodeAt(a)){for(;l++<o&&34!==t.charCodeAt(l)||34===t.charCodeAt(++l););return(e=l)>=o?u=!0:10===(i=t.charCodeAt(l++))?h=!0:13===i&&(h=!0,10===t.charCodeAt(l)&&++l),t.slice(a+1,e-1).replace(/""/g,'"')}for(;l<o;){if(10===(i=t.charCodeAt(e=l++)))h=!0;else if(13===i)h=!0,10===t.charCodeAt(l)&&++l;else if(i!==n)continue;return t.slice(a,e)}return u=!0,t.slice(a,o)}for(10===t.charCodeAt(o-1)&&--o,13===t.charCodeAt(o-1)&&--o;(i=d())!==s;){for(var p=[];i!==r&&i!==s;)p.push(i),i=d();e&&null==(p=e(p,c++))||a.push(p)}return a}function c(e,n){return e.map((function(e){return n.map((function(t){return h(e[t])})).join(t)}))}function u(e){return e.map(h).join(t)}function h(t){return null==t?"":t instanceof Date?(r=(n=t).getUTCHours(),s=n.getUTCMinutes(),a=n.getUTCSeconds(),o=n.getUTCMilliseconds(),isNaN(n)?"Invalid Date":((i=n.getUTCFullYear())<0?"-"+l(-i,6):i>9999?"+"+l(i,6):l(i,4))+"-"+l(n.getUTCMonth()+1,2)+"-"+l(n.getUTCDate(),2)+(o?"T"+l(r,2)+":"+l(s,2)+":"+l(a,2)+"."+l(o,3)+"Z":a?"T"+l(r,2)+":"+l(s,2)+":"+l(a,2)+"Z":s||r?"T"+l(r,2)+":"+l(s,2)+"Z":"")):e.test(t+="")?'"'+t.replace(/"/g,'""')+'"':t;var n,i,r,s,a,o}return{parse:function(t,e){var n,r,s=i(t,(function(t,i){if(n)return n(t,i-1);r=t,n=e?function(t,e){var n=a(t);return function(i,r){return e(n(i),r,t)}}(t,e):a(t)}));return s.columns=r||[],s},parseRows:i,format:function(e,n){return null==n&&(n=o(e)),[n.map(h).join(t)].concat(c(e,n)).join("\n")},formatBody:function(t,e){return null==e&&(e=o(t)),c(t,e).join("\n")},formatRows:function(t){return t.map(u).join("\n")},formatRow:u,formatValue:h}}(","),u=c.parse;function h(t){for(var e in t){var n,i,r=t[e].trim();if(r)if("true"===r)r=!0;else if("false"===r)r=!1;else if("NaN"===r)r=NaN;else if(isNaN(n=+r)){if(!(i=r.match(/^([-+]\d{2})?\d{4}(-\d{2}(-\d{2})?)?(T\d{2}:\d{2}(:\d{2}(\.\d{3})?)?(Z|[-+]\d{2}:\d{2})?)?$/)))continue;d&&i[4]&&!i[7]&&(r=r.replace(/-/g,"/").replace(/T/," ")),r=new Date(r)}else r=n;else r=null;t[e]=r}return t}c.parseRows,c.format,c.formatBody,c.formatRows,c.formatRow,c.formatValue;const d=new Date("2019-01-01T00:00").getHours()||new Date("2019-07-01T00:00").getHours(),p=n(2672),f=n(6932);class m{constructor(t,e){this.outputData=t,this.mimeType=e}getData(){const t=this.getJsonData(this.outputData);if(void 0!==t)return t.features?(console.log("data.table:format: GeoJSON"),this.flattenGeoData(t)):t;let e=this.outputData.text();if(e.length>0){const t=this.getJsonData(e);if(void 0!==t)return t.features?(console.log("data.table:format: GeoJSON"),this.flattenGeoData(t)):t;if(e.startsWith('<?xml version="1.0"'))return this.xmlParse(e);if(this.isCsv(e))return u(e,h);if("{}"!==e&&!e.startsWith("<Buffer "))return e}const n=this.outputData.data();return console.log(n),n.length>0?(console.log(`data.table:dataType: ${n.constructor}`),p.fromArrow(n)):this.outputData}getJsonData(t){try{if("string"==typeof t){const e=this.patchJson(t);let n=JSON.parse(e);return n.data&&(n=n.data),Array.isArray(n)?(console.log("data.table:format: JSON array"),n):(console.log("data.table:format: JSON"),n)}let e=t.json();if(e.data&&(e=e.data),Array.isArray(e))return console.log("data.table:format: JSON array"),e;if(console.log("data.table:format: JSON"),"string"==typeof e){if(this.isCsv(e))return u(e,h);if(e.startsWith('<?xml version="1.0"'))return this.xmlParse(e)}}catch(t){console.log("data.table: JSON.parse error:\n",t.message)}}patchJson(t){let e=t.replace(/\\\\"/g,'"');return e=e.replace(/"{/g,"{"),e=e.replace(/}"/g,"}"),e=e.replace(/\\xa0/g," "),e=e.replace(/\\n/g,""),e.startsWith("'")&&e.endsWith("'")&&(e=e.substr(1,e.length-2)),e}flattenGeoData(t){return t.features?t.features.map((t=>{let e={};Object.keys(null==t?void 0:t.geometry).forEach((n=>{e[`geometry.${n}`]=t.geometry[n]}));let n={};Object.keys(null==t?void 0:t.properties).forEach((e=>{n[`${e}`]=t.properties[e]}));const{geometry:i,properties:r,...s}=t;return{...s,...n,...e}})):t}isCsv(t){if(void 0===t||0===t.length)return!1;const e=t.trimEnd().split("\n",10),n=Math.min(e.length,10);if(e.length>0){const t=e[0].split(","),i=t.length;if(i>1){console.log("data.table:columns:",t);for(let e=0;e<i;e++){let n=t[e];if(n.startsWith("[")||n.startsWith("{"))return!1}for(let t=1;t<n;t++)if(e[t].split(",").length<i)return!1;return console.log("data.table:format: CSV"),!0}}return!1}xmlParse(t){let e={};const n={attributeNamePrefix:"",textNodeName:"value",ignoreAttributes:!1,ignoreNameSpace:!0,allowBooleanAttributes:!0,parseNodeValue:!0,parseAttributeValue:!0,trimValues:!0};try{e=f.parse(t,n),console.log("data.table:format: XML");for(let t of Object.values(e)){const e=t;for(let t of Object.values(e))if(Array.isArray(t))return t}}catch(t){console.log("data.table: XML parse error:\n",t.message)}return e}}var y=n(3379),g=n.n(y),b=n(7795),v=n.n(b),_=n(569),w=n.n(_),x=n(3565),S=n.n(x),I=n(9216),A=n.n(I),T=n(4589),C=n.n(T),N=n(651),k={};k.styleTagTransform=C(),k.setAttributes=S(),k.insert=w().bind(null,"head"),k.domAPI=v(),k.insertStyleElement=A(),g()(N.Z,k),N.Z&&N.Z.locals&&N.Z.locals;const E=n(9891),O=t=>({renderOutputItem(n,i){e.wrap(i,(()=>{const e=document.createElement("div");e.className="data-table",i.appendChild(e),function(t){console.log(`data.table:mimeType: ${t.mimeType}`);let e=new m(t.value,t.mimeType).getData();if(Array.isArray(e)){const n=E.table(e,{layout:"auto",width:"auto",height:360});t.container.appendChild(n)}else{const n=document.createElement("pre");n.className="text-output";const i=document.createElement("code");i.textContent="string"!=typeof e?JSON.stringify(e,null,2):t.value.text(),n.appendChild(i),t.container.appendChild(n)}}({container:e,mimeType:n.mime,value:n,context:t})}))},disposeOutputItem(t){}})})();var r=i.Q;export{r as activate};